import{j as e,X as s,a2 as t,a8 as a,aB as r,z as n,aC as l,H as i,A as o,ay as c,ax as d}from"./vendor-ui-CAOOb9ur.js";import{r as m,f as x,h,L as g}from"./vendor-react-C_40T_Qy.js";import{B as u,I as p,o as b}from"./index-CHW3rl59.js";import{A as v,a as j,b as y}from"./avatar-Cbexax3d.js";import{S as f,a as N,b as w,c as k,d as S,e as C}from"./sheet-BX1Mcph7.js";import{O as _}from"./OptimizedImage-ChM7nsgN.js";import{L as D}from"./Loading-CFf4ybmz.js";import{S as $}from"./switch-BF6JMZ3p.js";import{I as A}from"./input-DjJBUjUv.js";import{u as L}from"./useTranslation-DgYtz7Wb.js";import"./vendor-charts-knjLkUkQ.js";import"./vendor-utils-tyqSID0v.js";import"./index-BJWtVpZN.js";const F=({month:s,pricingData:t,selectedDates:a,onDateSelect:r,basePrice:n})=>{const l=e=>e.toISOString().split("T")[0],i=(()=>{const e=s.getFullYear(),t=s.getMonth(),a=new Date(e,t,1),r=new Date(e,t+1,0).getDate(),n=a.getDay(),l=[];for(let s=0;s<n;s++)l.push(null);for(let s=1;s<=r;s++)l.push(new Date(e,t,s));return l})();return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900",children:s.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center text-[10px] uppercase font-semibold text-gray-400 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:i.map((s,i)=>{if(!s)return e.jsx("div",{className:"aspect-square"},`empty-${i}`);const o=l(s),c=(e=>{const s=l(e),a=t.get(s);return(null==a?void 0:a.price)||n})(s),d=(e=>{const s=l(e),a=t.get(s);return!1!==(null==a?void 0:a.is_available)})(s),m=(e=>{const s=l(e);return a.includes(s)})(s),x=(e=>{const s=new Date;return s.setHours(0,0,0,0),e<s})(s);return e.jsxs("button",{onClick:()=>!x&&r(o),disabled:x,className:`\n                                aspect-square p-1 sm:p-2 text-left transition-all relative rounded-xl border flex flex-col justify-between overflow-hidden\n                                ${!x&&"hover:border-black hover:shadow-sm cursor-pointer"}\n                                ${x?"opacity-40 cursor-not-allowed border-gray-100 bg-gray-50":""}\n                                ${m?"border-2 border-black bg-gray-900 text-white z-10":"border-gray-200 bg-white"}\n                                ${d||x||m?"":"bg-gray-50 border-gray-200"}\n                            `,children:[e.jsx("span",{className:"text-xs font-medium "+(m?"text-white":x?"text-gray-400":"text-gray-900"),children:s.getDate()}),!x&&e.jsx("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:e.jsxs("span",{className:"text-[10px] sm:text-xs font-medium truncate w-full text-center "+(m?"text-white":d?"text-gray-700":"text-gray-400 line-through"),children:["$",c]})})]},o)})})]})},M=({settings:t,onClose:a,onSave:r})=>{const[n,l]=m.useState(t.base_price||0),[i,o]=m.useState(t.weekend_price||0),[c,d]=m.useState(!!t.weekend_price),[x,h]=m.useState(1===t.smart_pricing_enabled),[g,p]=m.useState(t.weekly_discount||0),[b,v]=m.useState(t.monthly_discount||0),j=Math.round(n*(1-g/100)),y=Math.round(n*(1-b/100));return e.jsxs("div",{className:"bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Price settings"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"These apply to all nights, unless you customize them by date."}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Base price"}),e.jsx("span",{className:"text-sm text-gray-600",children:"FCFA"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Per night"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"}),e.jsx("input",{type:"number",value:0===n?"":n,onChange:e=>l(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-28 focus:outline-none focus:ring-0"})]})]})]}),c?e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Custom weekend price"}),e.jsx("button",{onClick:()=>d(!1),className:"text-sm font-semibold underline hover:text-gray-600",children:"Remove"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"}),e.jsx("input",{type:"number",value:0===i?"":i,onChange:e=>o(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-28 focus:outline-none focus:ring-0"})]})]}):e.jsx("button",{onClick:()=>{d(!0),o(n)},className:"w-full border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors text-left",children:e.jsx("span",{className:"text-sm font-semibold",children:"Add custom weekend price"})}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 flex items-center justify-between hover:border-gray-900 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Smart Pricing"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Automatically adjust prices"})]}),e.jsx($,{checked:x,onCheckedChange:h})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Discounts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adjust your pricing to attract more guests."}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 mb-3 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-600",children:"For 7 nights or more"})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("input",{type:"number",value:0===g?"":g,onChange:e=>p(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",min:"0",max:"100"}),e.jsx("span",{className:"text-3xl font-semibold",children:"%"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Weekly average is ",j," FCFA"]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-600",children:"For 28 nights or more"})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("input",{type:"number",value:0===b?"":b,onChange:e=>v(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",min:"0",max:"100"}),e.jsx("span",{className:"text-3xl font-semibold",children:"%"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monthly average is ",y," FCFA"]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-white",children:e.jsx(u,{onClick:()=>{r({base_price:n,weekend_price:c?i:void 0,smart_pricing_enabled:x?1:0,weekly_discount:g,monthly_discount:b})},className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-lg font-semibold",children:"Save"})})]})},I=({settings:a,onClose:r,onSave:n})=>{const[l,i]=m.useState(a.min_nights),[o,c]=m.useState(a.max_nights),[d,x]=m.useState("same_day"===a.advance_notice?0:parseInt(a.advance_notice.split("_")[0])||1),[h,g]=m.useState(a.same_day_cutoff_time||"12:00"),[p,b]=m.useState(a.preparation_time),[v,j]=m.useState(a.availability_window),y=Array.from({length:24},(e,s)=>`${s.toString().padStart(2,"0")}:00`);return e.jsxs("div",{className:"bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex items-center justify-between border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Availability"}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-8 pt-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Trip length"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Minimum nights"}),e.jsx(A,{type:"number",value:l,onChange:e=>i(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 h-auto w-20 focus-visible:ring-0",min:1})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Maximum nights"}),e.jsx(A,{type:"number",value:o,onChange:e=>c(Number(e.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 h-auto w-24 focus-visible:ring-0",min:1})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Advance notice"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How much notice do you need between a guest's booking and their arrival?"}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:"Days"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:e=>x(Number(e.target.value)),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:0,children:"Same day"}),e.jsx("option",{value:1,children:"1 day"}),e.jsx("option",{value:2,children:"2 days"}),e.jsx("option",{value:3,children:"3 days"}),e.jsx("option",{value:4,children:"4 days"}),e.jsx("option",{value:5,children:"5 days"}),e.jsx("option",{value:6,children:"6 days"}),e.jsx("option",{value:7,children:"7 days"})]}),e.jsx(t,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:"Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:h,onChange:e=>g(e.target.value),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:y.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(t,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Guests can book on the same day as check-in until this time."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Preparation time"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Block time before and after each reservation to prepare your space."}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:p,onChange:e=>b(e.target.value),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"1_night",children:"1 night before and after each reservation"}),e.jsx("option",{value:"2_nights",children:"2 nights before and after each reservation"})]}),e.jsx(t,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Availability window"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How far in advance can guests book?"}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:v,onChange:e=>j(Number(e.target.value)),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:3,children:"3 months in advance"}),e.jsx("option",{value:6,children:"6 months in advance"}),e.jsx("option",{value:9,children:"9 months in advance"}),e.jsx("option",{value:12,children:"12 months in advance"}),e.jsx("option",{value:24,children:"24 months in advance"})]}),e.jsx(t,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-white",children:e.jsx(u,{onClick:()=>{n({min_nights:l,max_nights:o,advance_notice:0===d?"same_day":`${d}_day${d>1?"s":""}`,same_day_cutoff_time:h,preparation_time:p,availability_window:v})},className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-lg font-semibold",children:"Save"})})]})},P=()=>{var $;const A=x(),{t:P}=L(),[T]=h(),U=T.get("listing")||"",[B,z]=m.useState([]),[E,O]=m.useState(new Map),[H,Y]=m.useState(null),[V,W]=m.useState("default"),[q,G]=m.useState(!1),[K,R]=m.useState(new Date),[Z,J]=m.useState((new Date).getFullYear()),[Q,X]=m.useState(!0),[ee,se]=m.useState(!1),[te,ae]=m.useState(0),[re,ne]=m.useState(0),[le,ie]=m.useState(!1),[oe,ce]=m.useState(!1),[de,me]=m.useState([]),[xe,he]=m.useState(!1),ge=localStorage.getItem("username")||"",ue=(e=>{const s=null==e?void 0:e.trim();if(!s)return"AD";const t=s.split(/\s+/);return 1===t.length?s.slice(0,2).toUpperCase():(t[0][0]+t[1][0]).toUpperCase()})(ge||"User"),[pe,be]=m.useState(1),ve=m.useCallback(async()=>{var e;try{const s=(null==(e=(await p.get(`/listings/${U}`)).data.listing)?void 0:e.price_per_night)||0;ae(s)}catch(s){}},[U]),je=m.useCallback(async()=>{const e=new Date(Z,0,1),s=new Date(Z+1,11,31);try{const t=await p.get(`/calendar/${U}`,{params:{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0]}}),a=new Map;t.data.forEach(e=>{a.set(e.date,e)}),O(a)}catch(t){}finally{X(!1)}},[U,Z]),ye=m.useCallback(async()=>{try{const e=await p.get(`/calendar/${U}/settings`);Y(e.data)}catch(e){}},[U]);m.useEffect(()=>{(async()=>{he(!0);try{const e=await p.get("/listings/my-listings"),s=Array.isArray(e.data)?e.data:[];if(me(s),!U)return void(0===s.length&&A("/host/dashboard"));if(!s.some(e=>{var s;return(null==(s=e.listing)?void 0:s.id)===U}))return void A("/host/calendar");await Promise.all([ve(),je(),ye()])}catch(e){A("/host/dashboard")}finally{he(!1)}})()},[U,A,ve,je,ye]),m.useEffect(()=>{U&&(X(!0),je())},[Z,U,je]),m.useEffect(()=>{z([]),O(new Map),Y(null),ne(0)},[U]);const fe=e=>{var s;z(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]);const t=(null==(s=E.get(e))?void 0:s.price)||(null==H?void 0:H.base_price)||te;ne(t),ie(!1)},Ne=async()=>{if(0===B.length||ee)return;if(de.length>0&&!de.some(e=>{var s;return(null==(s=e.listing)?void 0:s.id)===U}))return;const e=!B.every(e=>{const s=E.get(e);return(null==s?void 0:s.is_available)??!0}),s=new Map(E),t=new Map(E),a=(null==H?void 0:H.base_price)||te||0;B.forEach(s=>{const r=t.get(s);r?t.set(s,{...r,is_available:e}):t.set(s,{id:-1,listing_id:U,date:s,price:a,is_available:e})}),O(t),se(!0);try{await p.put(`/calendar/${U}/dates`,{dates:B,is_available:e}),await je()}catch(r){O(s)}finally{se(!1)}};B.length>0&&1===B.length?(null==($=E.get(B[0]))?void 0:$.price)||null==H||H.base_price:null==H||H.base_price;const we=!(B.length>0)||B.every(e=>{var s;return(null==(s=E.get(e))?void 0:s.is_available)??!0});return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50 pt-safe",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 md:h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("div",{className:"text-green-600 font-bold text-xl cursor-pointer",onClick:()=>A("/"),children:"Le Mboko"}),e.jsxs("nav",{className:"hidden md:flex gap-8 text-sm font-medium",children:[e.jsx(g,{to:"/host/reservations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:P("nav.reservations","reservations")}),e.jsxs(g,{to:"/host/calendar",className:"text-gray-900 font-semibold relative pb-6",children:[P("nav.calendar","Calendar"),e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),e.jsx(g,{to:"/host/dashboard",className:"text-gray-600 hover:text-gray-900 transition-colors",children:P("nav.listings","Listings")}),e.jsx(g,{to:"/messages?view=host",className:"text-gray-600 hover:text-gray-900 transition-colors",children:P("nav.messages","Messages")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{variant:"ghost",className:"text-sm font-medium hover:bg-gray-100 rounded-full px-4",onClick:()=>A("/"),children:P("host.header.switchToTraveling","Switch to traveling")}),e.jsxs(f,{open:oe,onOpenChange:ce,children:[e.jsx(N,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3 border border-gray-300 rounded-full py-1.5 px-3 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(a,{className:"h-4 w-4 text-gray-700"}),e.jsxs(v,{className:"h-8 w-8",children:[e.jsx(j,{src:"/placeholder-user.jpg"}),e.jsx(y,{className:"bg-gray-700 text-white text-xs",children:ue})]})]})}),e.jsxs(w,{side:"right",className:"w-[360px] sm:w-[420px]",children:[e.jsxs(k,{children:[e.jsx(S,{children:P("common.menu","Menu")}),e.jsx(C,{})]}),e.jsxs("div",{className:"mt-6 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[e.jsxs(v,{className:"h-10 w-10",children:[e.jsx(j,{src:"/placeholder-user.jpg"}),e.jsx(y,{className:"bg-gray-700 text-white text-sm",children:ue})]}),e.jsx("div",{className:"font-semibold text-gray-900",children:ge||"User"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100",onClick:()=>{ce(!1),A("/account")},children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{children:P("account.settings","Account settings")})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100",onClick:()=>{ce(!1),A("/host/intro")},children:[e.jsx(n,{className:"h-5 w-5"}),e.jsx("span",{children:P("host.header.createListing","Create a new listing")})]}),e.jsx("div",{className:"pt-3 mt-2 border-t",children:e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 text-red-600",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userId"),localStorage.removeItem("email"),ce(!1),A("/")},children:[e.jsx(l,{className:"h-5 w-5"}),e.jsx("span",{children:P("auth.logout","Log out")})]})})]})]})]})]})]})}),e.jsx("main",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 pb-24 md:pb-12",children:U?e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("select",{value:K.getFullYear(),onChange:e=>(e=>{J(e);const s=new Date(e,0,1);R(s),setTimeout(()=>{const s=document.getElementById(`month-${e}-0`);s&&s.scrollIntoView({behavior:"smooth",block:"start"})},100)})(Number(e.target.value)),className:"text-3xl font-bold bg-transparent border-none cursor-pointer pr-8 focus:outline-none appearance-none hover:text-gray-600 transition-colors",children:Array.from({length:5},(e,s)=>(new Date).getFullYear()+s).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(t,{className:"h-6 w-6 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("select",{value:K.getMonth(),onChange:e=>(e=>{const s=new Date(Z,e,1);R(s);const t=`month-${Z}-${e}`,a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"start"})})(Number(e.target.value)),className:"text-3xl font-bold bg-transparent border-none cursor-pointer pr-8 focus:outline-none appearance-none hover:text-gray-600 transition-colors",children:Array.from({length:12},(e,s)=>s).map(s=>e.jsx("option",{value:s,children:new Date(0,s).toLocaleString("default",{month:"long"})},s))}),e.jsx(t,{className:"h-6 w-6 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-gray-600 transition-colors"})]})]}),e.jsx("div",{children:e.jsx(u,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>A("/host/calendar"),children:P("host.calendar.changeListing","Change listing")})})]}),Q?e.jsx(D,{message:P("host.calendar.loading","Loading calendar...")}):e.jsx("div",{className:"space-y-12",children:(()=>{const e=[],s=Z;for(let t=s;t<s+2;t++)for(let s=0;s<12;s++)e.push(new Date(t,s,1));return e})().map((s,t)=>{const a=`month-${s.getFullYear()}-${s.getMonth()}`;return e.jsx("div",{id:a,children:e.jsx(F,{month:s,pricingData:E,selectedDates:B,onDateSelect:fe,basePrice:(null==H?void 0:H.base_price)||te})},a)})})]}),e.jsx("div",{className:"lg:w-80 w-full",children:e.jsx("div",{className:"lg:sticky lg:top-24 space-y-4 lg:h-[calc(100vh-8rem)] lg:overflow-y-auto no-scrollbar",children:B.length>0?e.jsx(e.Fragment,{children:le?e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:1===B.length?new Date(B[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${B.length} dates`}),e.jsx("button",{onClick:()=>ie(!1),className:"p-1 hover:bg-gray-800 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"text-sm font-medium mb-4",children:P("host.calendar.customSettings","Custom settings")}),e.jsx("div",{className:"bg-gray-800 rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:P("host.calendar.minNights","Minimum nights")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),be(pe>1?pe-1:1)},className:"w-8 h-8 rounded-full border border-gray-600 hover:border-white transition-colors flex items-center justify-center",disabled:pe<=1,children:e.jsx("span",{className:"text-lg",children:"âˆ’"})}),e.jsx("span",{className:"text-base font-medium w-8 text-center",children:pe}),e.jsx("button",{onClick:e=>{e.stopPropagation(),be(pe+1)},className:"w-8 h-8 rounded-full border border-gray-600 hover:border-white transition-colors flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"+"})})]})]})}),e.jsx("button",{onClick:async()=>{if(0!==B.length)try{await p.put(`/calendar/${U}/dates`,{dates:B,price:re}),await je(),ie(!1)}catch(e){}},className:"w-full bg-white text-gray-900 hover:bg-gray-100 rounded-lg px-4 py-3 transition-colors font-medium",children:P("common.done","Done")})]}):e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:1===B.length?new Date(B[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${B.length} dates`})}),e.jsx("button",{onClick:()=>z([]),className:"p-1 hover:bg-gray-800 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm font-medium",children:P("host.calendar.available","Available")}),e.jsx("button",{onClick:Ne,disabled:ee,className:"w-12 h-6 rounded-full transition-colors "+(we?"bg-green-500":"bg-red-500"),"aria-pressed":we,"aria-label":we?P("host.calendar.available","Available"):P("host.calendar.unavailable","Unavailable"),children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-white shadow-sm transition-transform "+(we?"translate-x-6":"translate-x-0.5")})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:P("host.calendar.price","Price")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold",children:"$"}),e.jsx("input",{type:"number",value:re,onChange:e=>ne(Number(e.target.value)),onBlur:()=>(async e=>{if(0!==B.length)try{await p.put(`/calendar/${U}/dates`,{dates:B,price:e}),await je(),ne(e)}catch(s){}})(re),className:"text-2xl font-semibold bg-transparent border-none text-white w-24 focus:outline-none focus:ring-0"})]})]}),e.jsx("button",{onClick:()=>ie(!0),className:"w-full bg-gray-800 hover:bg-gray-700 rounded-lg px-4 py-3 transition-colors text-left",children:e.jsx("span",{className:"text-sm font-medium",children:P("host.calendar.customSettings","Custom settings")})})]})}):e.jsx(e.Fragment,{children:"price"===V&&H?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 h-full overflow-hidden",children:e.jsx(M,{settings:H,onClose:()=>W("default"),onSave:async e=>{await p.put(`/calendar/${U}/settings`,e),await ye(),W("default")}})}):"availability"===V&&H?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 h-full overflow-hidden",children:e.jsx(I,{settings:H,onClose:()=>W("default"),onSave:async e=>{await p.put(`/calendar/${U}/settings`,e),await ye(),W("default")}})}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>W("price"),className:"w-full flex items-center justify-between hover:bg-gray-50 rounded-lg p-3 transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:P("host.calendar.priceSettings","Price settings")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(null==H?void 0:H.base_price)||te," ",P("host.editor.perNight","per night")]}),(null==H?void 0:H.weekend_price)&&e.jsxs("p",{className:"text-sm text-gray-600",children:["$",H.weekend_price," ",P("host.calendar.weekendPrice","weekend price")]}),(null==H?void 0:H.weekly_discount)&&H.weekly_discount>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:[H.weekly_discount,"% ",P("host.calendar.weeklyDiscount","weekly discount")]})]}),e.jsx(t,{className:"h-5 w-5 text-gray-400 -rotate-90"})]}),e.jsxs("button",{onClick:()=>W("availability"),className:"w-full flex items-center justify-between hover:bg-gray-50 rounded-lg p-3 transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:P("host.calendar.availabilitySettings","Availability settings")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(null==H?void 0:H.min_nights)||1," - ",(null==H?void 0:H.max_nights)||365," ",P("host.calendar.nightStays","night stays")]}),e.jsx("p",{className:"text-sm text-gray-600",children:P("host.calendar.sameDayNotice","Same-day advance notice")})]}),e.jsx(t,{className:"h-5 w-5 text-gray-400 -rotate-90"})]})]})})})})]}):e.jsxs("div",{className:"py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:P("host.calendar.pickListing","Choose a listing")}),e.jsx("p",{className:"text-gray-600",children:P("host.calendar.pickListingHelp","Select a listing to manage its availability")})]}),xe?e.jsx(D,{message:P("common.loading","Loading...")}):de.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(s=>{var t,a;return e.jsxs("button",{onClick:()=>A(`/host/calendar?listing=${s.listing.id}`),className:"text-left bg-white rounded-xl border border-gray-200 hover:shadow-md transition overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-gray-100",children:(null==(a=null==(t=s.photos)?void 0:t[0])?void 0:a.url)?e.jsx(_,{src:b(s.photos[0].url),alt:s.listing.title||"Listing",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(i,{className:"h-8 w-8"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.listing.title||P("host.dashboard.untitled","Untitled Listing")}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:[s.listing.city,s.listing.country].filter(Boolean).join(", ")})]})]},s.listing.id)})}):e.jsx("div",{className:"text-gray-500",children:P("host.calendar.noListings","No listings yet")})]})}),B.length>0&&e.jsx("div",{className:"md:hidden fixed bottom-20 inset-x-0 z-40 px-4",children:e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:1===B.length?new Date(B[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${B.length} dates`})}),e.jsx("button",{onClick:()=>z([]),className:"p-1 hover:bg-gray-800 rounded-full","aria-label":P("common.clear","Clear selection"),children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 mt-1",children:[e.jsx("span",{className:"text-sm font-medium",children:P("host.calendar.available","Available")}),e.jsx("button",{onClick:Ne,className:"w-12 h-6 rounded-full transition-colors "+(we?"bg-green-500":"bg-red-500"),"aria-pressed":we,"aria-label":we?P("host.calendar.available","Available"):P("host.calendar.unavailable","Unavailable"),children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-white shadow-sm transition-transform "+(we?"translate-x-6":"translate-x-0.5")})})]})]})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 bg-white/90 backdrop-blur-lg border-t border-gray-200 pb-safe transition-all duration-300",children:e.jsx("div",{className:"max-w-md mx-auto px-6",children:e.jsxs("ul",{className:"grid grid-cols-4 h-16",children:[e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs(g,{to:"/host/reservations",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(i,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:P("nav.reservations","reservations")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs(g,{to:"/host/calendar",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform",children:e.jsx(o,{className:"h-6 w-6 text-primary fill-current"})}),e.jsx("span",{className:"text-[10px] font-medium text-primary",children:P("nav.calendar","Calendar")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs(g,{to:"/host/dashboard",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(c,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:P("nav.listings","Listings")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs(g,{to:"/messages?view=host",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(d,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:P("nav.messages","Messages")})]})})]})})})]})};export{P as default};
