import{r as y,M as k,j as e,N as I,E as P,B as W,G as z}from"./index-BumHlSai.js";import{u as C}from"./useWishlist-DPRVGm7i.js";import{O as E}from"./OptimizedImage-xP7m_j1R.js";import{u as T}from"./useTranslation-DUME4FCN.js";import{S as u}from"./star-CVLH76DC.js";import{H as $}from"./heart-DX2l2ZpK.js";const M=({id:a,name:l,location:x,price:p,images:s,rating:i,isGuestFavorite:h=!1})=>{var m;const[n,f]=y.useState(0),{isInWishlist:g,addToWishlist:j,removeFromWishlistByProduct:b}=C(),{toast:v}=k(),{t:r}=T(),c=g(a),N=async o=>{o.preventDefault(),o.stopPropagation();try{const t=a;c?await b(t):await j(t)}catch{v({title:"Error",description:"Failed to update wishlist",variant:"destructive"})}},w=s&&s.length>1;return e.jsx(I,{to:`/product/${a}`,className:"block flex-shrink-0 w-full sm:w-[280px] group cursor-pointer",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"relative aspect-[20/19] sm:aspect-square rounded-xl overflow-hidden bg-muted mb-3",children:[s&&s.length>0?e.jsx(E,{src:P((m=s[n])==null?void 0:m.image_url),alt:l,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-out"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:e.jsx("span",{className:"text-sm",children:r("host.editor.noPhotosYet")})}),h&&e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsxs("span",{className:"px-3 py-1 text-xs font-bold bg-white/90 backdrop-blur-sm text-foreground rounded-full shadow-sm flex items-center gap-1",children:[e.jsx(u,{className:"h-3 w-3 fill-current"}),r("Guest favorite")]})}),e.jsx(W,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 z-10 h-8 w-8 rounded-full hover:bg-white/90 hover:scale-110 transition-all p-0 focus:ring-0",onClick:N,children:e.jsx($,{className:`h-6 w-6 transition-colors ${c?"fill-green-600 text-green-600":"fill-black/50 text-white stroke-[2px]"}`})}),w&&e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.slice(0,5).map((o,t)=>e.jsx("button",{className:`h-1.5 rounded-full transition-all shadow-sm ${t===n?"w-1.5 bg-white scale-125":"w-1.5 bg-white/60 hover:bg-white/80"}`,onClick:d=>{d.preventDefault(),d.stopPropagation(),f(t)},"aria-label":`View image ${t+1}`},t))}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-8 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold text-[15px] text-foreground line-clamp-1 group-hover:text-primary transition-colors",children:x}),i&&e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(u,{className:"h-3 w-3 fill-current text-foreground"}),e.jsx("span",{className:"text-sm text-foreground",children:i.toFixed(2)})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:l}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[e.jsx("span",{className:"font-semibold text-[15px] text-foreground",children:z(p)}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",r("per night")]})]})]})]})})};export{M as P};
