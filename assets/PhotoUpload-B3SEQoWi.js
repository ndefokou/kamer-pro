import{j as e,ap as t,I as o,X as s}from"./vendor-ui-DcvuiMJW.js";import{e as a,r}from"./vendor-react-CPc5zwff.js";import{a5 as l,m as i,B as n,n as c,G as d}from"./index-Dd0d9_cy.js";import{O as p}from"./OptimizedImage-Dw--M-ma.js";import{u as h}from"./useTranslation-BTMhbqKL.js";import"./vendor-charts-CNjKuHaK.js";import"./vendor-utils-tyqSID0v.js";const m=()=>{const m=a(),{t:u}=h(),{draft:x,updateDraft:g,nextStep:f,previousStep:j}=l(),{toast:v}=i(),[b,y]=r.useState(x.photos||[]),[N,k]=r.useState(x.coverPhotoIndex||0),[C,w]=r.useState(!1),[S,P]=r.useState(null);r.useEffect(()=>{new Set(b);b.length},[b]);return e.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:u("host.photos.title","Add photos of your place")}),e.jsx("p",{className:"text-muted-foreground",children:u("host.photos.subtitle","You'll need at least 3 photos to get started. You can add more or make changes later.")})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("label",{htmlFor:"photo-upload",className:"block border-2 border-dashed border-border rounded-lg p-12 text-center cursor-pointer hover:border-primary transition-colors",children:[e.jsx(t,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:u("host.photos.dropTitle","Drag your photos here")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:u("host.photos.dropHelp","Choose at least 3 photos")}),e.jsx(n,{type:"button",variant:"outline",disabled:C,children:C?u("host.photos.uploading","Uploading..."):u("host.photos.uploadFromDevice","Upload from your device")}),e.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const t=e.target.files;if(!t||0===t.length)return;if(C)return;w(!0);const o=new FormData;Array.from(t).forEach(e=>{o.append("images",e)});try{const s=(await d.post("/upload/images",o,{headers:{"Content-Type":"multipart/form-data"}})).data;y(e=>[...e,...s.urls]),v({title:u("host.photos.uploadSuccessTitle","Photos uploaded"),description:u("host.photos.uploadSuccessDesc","{{count}} photo(s) uploaded successfully",{count:t.length})}),e.target.value=""}catch(s){v({title:u("host.photos.uploadFailedTitle","Upload failed"),description:u("host.photos.uploadFailedDesc","Failed to upload photos. Please try again."),variant:"destructive"}),e.target.value=""}finally{w(!1)}},className:"hidden",disabled:C})]})}),b.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[b.length," ",1!==b.length?u("host.photos.photosPlural","photos"):u("host.photos.photoSingular","photo")]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:b.map((t,a)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden group cursor-pointer "+(a===N?"ring-4 ring-primary":""),onClick:()=>P(t),children:[e.jsx(p,{src:c(t),alt:`Photo ${a+1}`,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsxs(n,{size:"sm",variant:"secondary",onClick:e=>{e.stopPropagation(),(e=>{k(e)})(a)},children:[e.jsx(o,{className:"h-4 w-4 mr-1"}),a===N?u("host.photos.cover","Cover"):u("host.photos.setAsCover","Set as cover")]}),e.jsx(n,{size:"sm",variant:"destructive",onClick:e=>{e.stopPropagation(),(e=>{const t=b.filter((t,o)=>o!==e);y(t),N===e?k(0):N>e&&k(N-1)})(a)},children:e.jsx(s,{className:"h-4 w-4"})})]}),a===N&&e.jsx("div",{className:"absolute top-2 left-2 bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:u("host.photos.coverPhoto","Cover photo")})]},a))})]}),S&&e.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4 md:p-8",onClick:()=>P(null),children:[e.jsx("button",{onClick:()=>P(null),className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(s,{className:"h-6 w-6"})}),e.jsx(p,{src:c(S),alt:"Full size view",className:"w-full h-full object-contain",onClick:e=>e.stopPropagation()})]}),e.jsxs("div",{className:"flex justify-between items-center mt-12 pt-6 border-t",children:[e.jsx(n,{variant:"outline",onClick:()=>{g({photos:b,coverPhotoIndex:N}),j(),m("/host/location")},children:u("common.back","Back")}),e.jsx(n,{onClick:()=>{g({photos:b,coverPhotoIndex:N}),f(),m("/host/title")},disabled:b.length<3,size:"lg",children:u("common.continue","Continue")})]}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:u("common.stepOf","Step {{current}} of {{total}}",{current:4,total:10})})]})})};export{m as default};
