const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewMap-2hh8rHVQ.js","assets/vendor-ui-DcvuiMJW.js","assets/vendor-react-CPc5zwff.js","assets/vendor-maps-DGfzlnCx.js","assets/marker-shadow-D5DIcCoR.js","assets/marker-shadow-Dgihpmma.css","assets/useTranslation-BptfK32d.js","assets/index-DwPe7WlF.js","assets/vendor-charts-CNjKuHaK.js","assets/vendor-utils-tyqSID0v.js","assets/index-lw8G4jxF.css"])))=>i.map(i=>d[i]);
import{j as e,X as s,y as t,a3 as a,z as i,K as r,J as l,I as o,M as n,ao as d,r as c,q as h,am as m,aE as x,aF as u,aA as g,aG as p,a0 as b,a7 as v,H as y,ay as f,ax as j}from"./vendor-ui-DcvuiMJW.js";import{r as N,R as w,e as k,k as C}from"./vendor-react-CPc5zwff.js";import{B as _,n as S,o as A,_ as D,m as M,a5 as $,G as P}from"./index-DwPe7WlF.js";import{O as F}from"./OptimizedImage-DunbvjKP.js";import{g as L,a as T,D as E,A as z,H as G}from"./HouseRulesSection-zgccbfet.js";import{u as H}from"./useTranslation-BptfK32d.js";import{I as Y}from"./input-C5CbV-TI.js";import{A as V}from"./vendor-utils-tyqSID0v.js";import"./vendor-charts-CNjKuHaK.js";const I=({selectedAmenities:r,onToggle:l,onClose:o})=>{const{t:n}=H(),[d,c]=N.useState(""),[h,m]=N.useState("All"),x=N.useMemo(()=>{let e=L();if(d){const s=d.toLowerCase();e=e.filter(e=>e.label.toLowerCase().includes(s)||e.description.toLowerCase().includes(s))}else"All"!==h&&(e=e.filter(e=>e.category===h));return e},[d,h]),u=N.useMemo(()=>{const e={};x.forEach(s=>{e[s.category]||(e[s.category]=[]),e[s.category].push(s)});const s=[];return T.forEach(t=>{e[t]&&s.push({category:t,amenities:e[t]})}),s},[x]);return e.jsxs("div",{className:"fixed inset-0 z-50 flex overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 transition-opacity",onClick:o}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:o,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Add amenities"}),e.jsx("div",{className:"w-9"})," "]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar -mx-6 px-6",children:[e.jsx("button",{onClick:()=>m("All"),className:"whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium border transition-colors "+("All"===h?"border-black bg-black text-white":"border-gray-200 hover:border-black bg-white text-gray-700"),children:"All"}),T.map(s=>e.jsx("button",{onClick:()=>m(s),className:"whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium border transition-colors "+(h===s?"border-black bg-black text-white":"border-gray-200 hover:border-black bg-white text-gray-700"),children:s},s))]}),e.jsxs("div",{className:"relative",children:[e.jsx(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search amenities",value:d,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-100 border-transparent focus:bg-white focus:border-black focus:ring-0 rounded-full transition-all font-medium"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:u.length>0?e.jsx("div",{className:"space-y-8",children:u.map(({category:s,amenities:t})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s}),e.jsx("div",{className:"space-y-4",children:t.map(s=>{const t=r.includes(s.id),o=s.icon;return e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-start gap-4 pr-4",children:[e.jsx("div",{className:"mt-1",children:e.jsx(o,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-900",children:n(`amenities.${s.id}`)}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]})]}),e.jsx("button",{onClick:()=>l(s.id),className:"flex-shrink-0 w-8 h-8 rounded-full border flex items-center justify-center transition-all "+(t?"bg-black border-black text-white":"border-gray-300 hover:border-black text-gray-600"),children:t?e.jsx(a,{className:"h-4 w-4"}):e.jsx(i,{className:"h-4 w-4"})})]},s.id)})})]},s))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:['No amenities found matching "',d,'"']})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-white",children:e.jsx(_,{onClick:o,className:"w-full bg-black text-white hover:bg-gray-800 py-6 text-lg rounded-xl",children:"Done"})})]})]})},W=[{id:"not safe children 2 12",label:"Not a good fit for children 2 – 12",description:"This property has features that may not be safe for kids.",category:"considerations"},{id:"not safe infants under 2",label:"Not a good fit for infants under 2",description:"This property has features that may not be safe for babies or toddlers this age.",category:"considerations"},{id:"no pool gate",label:"Pool or hot tub doesn't have a gate or lock",description:"Guests have access to an unsecured swimming pool or hot tub. Check your local laws for specific requirements.",category:"considerations"},{id:"nearby water",label:"Nearby water, like a lake or river",description:"Guests have unrestricted access to a body of water, like an ocean, pond, creek, or wetlands, directly on or next to the property.",category:"considerations"},{id:"climbing structure",label:"Climbing or play structure(s) on the property",description:"Guests will have access to structures like a playset, slide, swings, or climbing ropes.",category:"considerations"},{id:"heights without rails",label:"There are heights without rails or protection",description:"Guests have access to an area higher than 30 inches (76 centimeters), like a balcony, roof, terrace, or cliff, that doesn't have a rail or other protection.",category:"considerations"},{id:"dangerous animals",label:"Potentially dangerous animal(s) on the property",description:"Guests and their pets will be around animals, like a horse, mountain lion, or farm animal, that could cause harm.",category:"considerations"}],B=[{id:"exteriorsecuritycamera",label:"Exterior security camera present",description:"This property has one or more exterior cameras that record or transmit video, images, or audio. You must disclose them if they're turned off.\n\nNote: Security cameras that monitor indoor spaces or outdoor areas where greater privacy is expected, like a shower, are not allowed.",category:"devices"},{id:"noisedecibelmonitor",label:"Noise decibel monitor present",description:"This property has one or more devices that can assess sound level but don't record audio.",category:"devices"},{id:"carbonmonoxidealarm",label:"Carbon monoxide alarm",description:"A device that alerts if it detects unsafe levels of carbon monoxide (Check your local laws, which may require a working carbon monoxide detector in your listing)",category:"devices"},{id:"smokealarm",label:"Smoke alarm",description:"A device that alerts when it detects smoke (Check your local laws, which may require a working smoke detector in your listing)",category:"devices"}],O=N.lazy(()=>D(()=>import("./PreviewMap-2hh8rHVQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),R=({listing:t,isOpen:a,onClose:m})=>{const{t:x,i18n:u}=H(),[g,p]=N.useState(0),[b,v]=N.useState(!1),[y,f]=N.useState(null),[j,k]=N.useState(null),[C,D]=N.useState(1),[M,$]=N.useState(0),[P,L]=N.useState(0),[T,G]=N.useState(0),[Y,V]=N.useState(!1),[I,R]=N.useState(new Date),[J,q]=N.useState(!1),[U,K]=N.useState(0),[Q,Z]=N.useState(!1),[X,ee]=N.useState(null),se=C+M;if(w.useEffect(()=>{if(!J||-1===U)return;const e=e=>{"ArrowLeft"===e.key&&U>0?K(U-1):"ArrowRight"===e.key&&U<t.photos.length-1?K(U+1):"Escape"===e.key&&(q(!1),K(-1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[J,U,t.photos.length]),!a)return null;let te=E;try{te=t.house_rules?JSON.parse(t.house_rules):E}catch(ce){}const ae=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),ie=e=>new Date(e.getFullYear(),e.getMonth(),1).getDay(),re=(e,s)=>!!e&&(e.getDate()===s.getDate()&&e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear()),le=e=>!(!y||!j)&&(e>y&&e<j),oe=e=>{!y||y&&j?(f(e),k(null)):e>y?k(e):(f(e),k(null))},ne=()=>{R(new Date(I.getFullYear(),I.getMonth()+1))},de=()=>{R(new Date(I.getFullYear(),I.getMonth()-1))};return e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsx("header",{className:"sticky top-0 bg-white border-b border-gray-200 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[e.jsx("button",{onClick:m,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(r,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium underline",children:"Share"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium underline",children:"Save"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-2",children:t.title||x("host.preview.untitled","Untitled Listing")}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{className:"h-4 w-4 fill-current"}),e.jsx("span",{className:"font-medium",children:x("host.preview.new","New")})]}),e.jsx("span",{className:"text-gray-600",children:"·"}),e.jsxs("span",{className:"underline font-medium",children:[t.city,", ",t.country]})]}),e.jsx("div",{className:"mb-8 rounded-xl overflow-hidden",children:t.photos.length>0?e.jsxs("div",{className:"relative",children:[1===t.photos.length?e.jsx(F,{src:S(t.photos[0].url),alt:t.photos[0].caption||t.title,className:"w-full h-[500px] object-cover"}):t.photos.length<=4?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.photos.slice(0,4).map((s,t)=>e.jsx(F,{src:S(s.url),alt:s.caption||`Photo ${t+1}`,className:"w-full object-cover "+(0===t?"col-span-2 h-[400px]":"h-[250px]")},s.id))}):e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("div",{className:"col-span-2 row-span-2",children:e.jsx(F,{src:S(t.photos[0].url),alt:t.photos[0].caption,className:"w-full h-full object-cover"})}),t.photos.slice(1,5).map((s,t)=>e.jsx(F,{src:S(s.url),alt:s.caption||`Photo ${t+2}`,className:"w-full h-[250px] object-cover"},s.id))]}),t.photos.length>5&&e.jsx("button",{onClick:()=>{q(!0),K(-1)},className:"absolute bottom-4 right-4 bg-white px-4 py-2 rounded-lg border border-gray-900 font-medium text-sm hover:bg-gray-50 transition-colors",children:x("host.preview.showAllPhotos","Show all photos")})]}):e.jsx("div",{className:"w-full h-[400px] bg-gray-100 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400",children:x("host.preview.noPhotos","No photos available")})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:x("host.preview.hostedBy",{type:t.property_type,name:"Arthur"})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsxs("span",{children:[t.max_guests," ",x("host.preview.guests","guests")]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:["1 ",x("host.preview.bed","bed")]})]})]}),(()=>{if(!t.description)return null;let s=[],a=t.description;try{if(t.description.trim().startsWith("{")){const e=JSON.parse(t.description);s=[["listingDescription",x("listing.details.about")],["propertyDetails",x("propertyDetails")],["guestAccess",x("guestAccess")],["guestInteraction",x("guestInteraction")],["otherNotes",x("otherNotes")],["otherDetails",x("otherDetails")]].map(([s,t])=>({title:t,text:"string"==typeof e[s]?e[s].trim():""})).filter(e=>e.text),s.length>0&&(a=null)}}catch(ce){a=t.description}return e.jsx("div",{className:"pb-8 border-b border-gray-200",children:s.length>0?e.jsx("div",{className:"space-y-6",children:s.map((s,t)=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.text})]},t))}):e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a})})})(),t.amenities&&t.amenities.length>0&&e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:x("host.preview.offers","What this place offers")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(b?t.amenities:t.amenities.slice(0,10)).map(s=>{const t=z[s];if(!t)return null;const a=t.icon;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(a,{className:"h-6 w-6 text-gray-700"}),e.jsx("span",{className:"text-gray-900",children:x(`amenities.${s}`)})]},s)}),b&&["wifi","tv","kitchen","washer","parking","air_conditioning","workspace","pool","hottub","gym","bbq","fireplace","smoke_alarm","carbon_monoxide_alarm"].filter(e=>{var s;return!(null==(s=t.amenities)?void 0:s.includes(e))&&z[e]}).slice(0,6).map(s=>{const t=z[s].icon;return e.jsxs("div",{className:"flex items-center gap-4 opacity-60",children:[e.jsx(t,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-gray-500 line-through",children:x(`amenities.${s}`)})]},`unavailable-${s}`)})]}),t.amenities.length>10&&e.jsx(_,{variant:"outline",className:"mt-6 rounded-lg border-gray-900 font-semibold",onClick:()=>v(!b),children:b?x("host.preview.showLess","Show less"):x("host.preview.showAllAmenities",{count:t.amenities.length})})]}),e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:x("host.preview.selectCheckIn","Select check-in date")}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:x("host.preview.addDates","Add your travel dates for exact pricing")}),(()=>{const s=ae(I),t=ie(I),a=[];for(let i=0;i<t;i++)a.push(e.jsx("div",{className:"h-12"},`empty-${i}`));for(let i=1;i<=s;i++){const s=new Date(I.getFullYear(),I.getMonth(),i),t=re(y,s),r=re(j,s),l=le(s),o=s<new Date((new Date).setHours(0,0,0,0));a.push(e.jsx("button",{onClick:()=>!o&&oe(s),disabled:o,className:`h-12 flex items-center justify-center rounded-full text-sm font-medium transition-colors\n                        ${o?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}\n                        ${t||r?"bg-gray-900 text-white":""}\n                        ${l?"bg-gray-100":""}\n                        ${o||t||r||l?"":"text-gray-900"}\n                    `,children:i},i))}return e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:de,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsx("h4",{className:"text-lg font-semibold",children:I.toLocaleDateString(u.language,{month:"long",year:"numeric"})}),e.jsx("button",{onClick:ne,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(h,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx("div",{className:"h-12 flex items-center justify-center text-xs font-semibold text-gray-600",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:a})]})})()]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 border border-gray-200 rounded-xl p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:"text-2xl font-semibold",children:A(t.price_per_night)}),e.jsx("span",{className:"text-gray-600",children:x("host.preview.night","night")})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(o,{className:"h-4 w-4 fill-current"}),e.jsx("span",{className:"font-medium",children:x("host.preview.new","New")})]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-lg mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-300",children:[e.jsxs("button",{onClick:()=>Z(!0),className:"p-3 border-r border-gray-300 text-left hover:bg-gray-50",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:x("host.preview.checkIn","Check-in")}),e.jsx("div",{className:"text-sm text-gray-900",children:y?y.toLocaleDateString(u.language,{month:"short",day:"numeric",year:"numeric"}):x("host.preview.addDate","Add date")})]}),e.jsxs("button",{onClick:()=>Z(!0),className:"p-3 text-left hover:bg-gray-50",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:x("host.preview.checkout","Checkout")}),e.jsx("div",{className:"text-sm text-gray-900",children:j?j.toLocaleDateString(u.language,{month:"short",day:"numeric",year:"numeric"}):x("host.preview.addDate","Add date")})]})]}),e.jsxs("div",{className:"p-3 relative",children:[e.jsxs("button",{onClick:()=>V(!Y),className:"w-full text-left",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:x("host.preview.guestPicker.label","Guests")}),e.jsxs("div",{className:"text-sm text-gray-900",children:[x("host.preview.guestCount",{count:se,defaultValue:`${se} guest${se>1?"s":""}`}),P>0&&`, ${x("host.preview.infantCount",{count:P,defaultValue:`${P} infant${P>1?"s":""}`})}`,T>0&&`, ${x("host.preview.petCount",{count:T,defaultValue:`${T} pet${T>1?"s":""}`})}`]})]}),Y&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-10 w-96",children:[e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x("host.preview.guestPicker.adults","Adults")}),e.jsx("div",{className:"text-sm text-gray-500",children:x("host.preview.guestPicker.adultsAge","Age 13+")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>D(Math.max(1,C-1)),disabled:C<=1,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(C<=1?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:C}),e.jsx("button",{onClick:()=>D(Math.min(t.max_guests-M,C+1)),disabled:se>=t.max_guests,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(se>=t.max_guests?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(i,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x("host.preview.guestPicker.children","Children")}),e.jsx("div",{className:"text-sm text-gray-500",children:x("host.preview.guestPicker.childrenAge","Ages 2–12")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>$(Math.max(0,M-1)),disabled:M<=0,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(M<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:M}),e.jsx("button",{onClick:()=>$(Math.min(t.max_guests-C,M+1)),disabled:se>=t.max_guests,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(se>=t.max_guests?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(i,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x("host.preview.guestPicker.infants","Infants")}),e.jsx("div",{className:"text-sm text-gray-500",children:x("host.preview.guestPicker.infantsAge","Under 2")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>L(Math.max(0,P-1)),disabled:P<=0,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(P<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:P}),e.jsx("button",{onClick:()=>L(P+1),className:"w-8 h-8 rounded-full border border-gray-400 text-gray-600 hover:border-black hover:text-black flex items-center justify-center transition-colors",children:e.jsx(i,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:x("host.preview.guestPicker.pets","Pets")}),e.jsx("div",{className:"text-sm text-blue-600 underline cursor-pointer",children:x("host.preview.guestPicker.serviceAnimal","Bringing a service animal?")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>G(Math.max(0,T-1)),disabled:T<=0,className:"w-8 h-8 rounded-full border flex items-center justify-center transition-colors "+(T<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"),children:e.jsx(n,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:T}),e.jsx("button",{onClick:()=>G(T+1),className:"w-8 h-8 rounded-full border border-gray-400 text-gray-600 hover:border-black hover:text-black flex items-center justify-center transition-colors",children:e.jsx(i,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600",children:x("host.preview.guestPicker.maxGuests",{count:t.max_guests})})}),e.jsx("button",{onClick:()=>V(!1),className:"mt-4 w-full text-right text-sm font-semibold underline hover:text-gray-600",children:x("host.preview.guestPicker.close","Close")})]})]})]}),e.jsx(_,{className:"w-full bg-gradient-to-r from-[#10B981] to-[#059669] hover:from-[#059669] hover:to-[#047857] text-white font-semibold py-3 rounded-lg mb-4",children:x("host.preview.checkAvailability","Check availability")}),e.jsx("p",{className:"text-center text-sm text-gray-500 mb-6",children:x("host.preview.noCharge","You won't be charged yet")}),y&&j&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"underline",children:[A(t.price_per_night)," x ",Math.ceil((j.getTime()-y.getTime())/864e5)," nights"]}),e.jsx("span",{children:A(t.price_per_night*Math.ceil((j.getTime()-y.getTime())/864e5))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"underline",children:x("host.preview.cleaningFee","Cleaning fee")}),e.jsx("span",{children:"5000 FCFA"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"underline",children:x("host.preview.serviceFee","Service fee")}),e.jsx("span",{children:A(Math.round(t.price_per_night*Math.ceil((j.getTime()-y.getTime())/864e5)*.14))})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex justify-between font-semibold",children:[e.jsx("span",{children:x("host.preview.total","Total")}),e.jsx("span",{children:A(t.price_per_night*Math.ceil((j.getTime()-y.getTime())/864e5)+5e3+Math.round(t.price_per_night*Math.ceil((j.getTime()-y.getTime())/864e5)*.14))})]})]})]})})]}),e.jsxs("div",{className:"py-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:x("host.preview.location.title","Where you'll be")}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"font-medium text-gray-900 text-lg",children:t.address||`${t.city}, ${t.country}`}),t.latitude&&t.longitude&&e.jsxs("p",{className:"text-gray-500 mt-1",children:[t.latitude,", ",t.longitude]})]}),e.jsxs("div",{className:"h-[400px] rounded-xl overflow-hidden z-0 relative",children:[e.jsx(N.Suspense,{fallback:e.jsx("div",{className:"h-full w-full bg-slate-100 flex items-center justify-center",children:e.jsx(d,{className:"h-8 w-8 text-slate-300 animate-pulse"})}),children:e.jsx(O,{latitude:t.latitude,longitude:t.longitude,title:t.title,selectedCategory:X})}),e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-2 z-[400] overflow-x-auto max-w-[90%] px-2 no-scrollbar",children:[{id:"restaurants",label:"Restaurants",icon:"Utensils"},{id:"shopping",label:"Shopping",icon:"ShoppingBag"},{id:"transport",label:"Transport Hub",icon:"Bus"},{id:"attractions",label:"Attractions",icon:"Camera"},{id:"groceries",label:"Groceries",icon:"ShoppingCart"}].map(s=>e.jsxs("button",{onClick:()=>ee(X===s.id?null:s.id),className:"flex items-center gap-2 px-4 py-2 rounded-full shadow-lg text-sm font-medium transition-all whitespace-nowrap\n                                        "+(X===s.id?"bg-gray-900 text-white scale-105":"bg-white text-gray-700 hover:bg-gray-50 hover:scale-105"),children:["restaurants"===s.id&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),e.jsx("path",{d:"M7 2v20"}),e.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),"shopping"===s.id&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),"transport"===s.id&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 6v6"}),e.jsx("path",{d:"M15 6v6"}),e.jsx("path",{d:"M2 12h19.6"}),e.jsx("path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"}),e.jsx("circle",{cx:"7",cy:"18",r:"2"}),e.jsx("path",{d:"M9 18h5"}),e.jsx("circle",{cx:"16",cy:"18",r:"2"})]}),"attractions"===s.id&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),"groceries"===s.id&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"8",cy:"21",r:"1"}),e.jsx("circle",{cx:"19",cy:"21",r:"1"}),e.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),x(`host.preview.location.categories.${s.id}`,s.label)]},s.id))})]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-200",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold mb-6 text-gray-900",children:x("host.preview.thingsToKnow","Things to Know (Important things)")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:x("host.preview.houseRules","House rules")}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:["Check-in: ",te.check_in_start," - ",te.check_in_end]}),e.jsxs("p",{children:["Checkout: ",te.checkout_time]}),e.jsxs("p",{children:[t.max_guests," ",x("host.preview.guests","guests")," maximum"]}),e.jsx("p",{children:te.pets_allowed?x("host.preview.petsAllowed","Pets allowed"):x("host.preview.noPets","No pets")}),e.jsx("p",{children:te.events_allowed?x("host.preview.eventsAllowed","Events allowed"):x("host.preview.noParties","No parties or events")}),e.jsx("p",{children:te.smoking_allowed?x("host.preview.smokingAllowed","Smoking, vaping, e-cigarettes allowed"):x("host.preview.noSmoking","No smoking, vaping, e-cigarettes")}),e.jsx("p",{children:te.quiet_hours?x("host.preview.quietHours","Quiet hours enforced"):x("host.preview.noQuietHours","Quiet hours not enforced")}),e.jsx("p",{children:te.commercial_photography_allowed?x("host.preview.photographyAllowed","Commercial photography and filming allowed"):x("host.preview.photographyNotAllowed","No commercial photography or filming")})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Safety & property"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[B.map(s=>{var a;return(null==(a=t.safety_items)?void 0:a.includes(s.id))?e.jsx("p",{children:s.label},s.id):"carbon_monoxide_alarm"===s.id?e.jsx("p",{children:"Carbon monoxide alarm not reported"},s.id):"smoke_alarm"===s.id?e.jsx("p",{children:"Smoke alarm not reported"},s.id):null}),W.map(s=>{var a;return(null==(a=t.safety_items)?void 0:a.includes(s.id))?e.jsx("p",{children:s.label},s.id):null})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Cancellation policy"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:["flexible"===t.cancellation_policy&&e.jsx("p",{children:"Free cancellation for 48 hours. Full refund 1 day prior to arrival."}),"moderate"===t.cancellation_policy&&e.jsx("p",{children:"Free cancellation for 48 hours. Full refund 5 days prior to arrival."}),"strict"===t.cancellation_policy&&e.jsx("p",{children:"Full refund for 48 hours after booking, if the check-in date is at least 14 days away. 50% refund up to 7 days prior to arrival."}),!t.cancellation_policy&&e.jsx("p",{children:"Add a cancellation policy."}),e.jsx("p",{className:"underline cursor-pointer",children:"Learn more"})]})]})]})]})]}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Select dates"}),e.jsx("p",{className:"text-gray-600",children:"Add your travel dates for exact pricing"})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase text-gray-700 mb-2",children:"Check-in"}),e.jsx("input",{type:"text",placeholder:"MM/DD/YYYY",value:y?y.toLocaleDateString("en-US"):"",onChange:e=>{const s=new Date(e.target.value);isNaN(s.getTime())||f(s)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase text-gray-700 mb-2",children:"Checkout"}),e.jsx("input",{type:"text",placeholder:"Add date",value:j?j.toLocaleDateString("en-US"):"",onChange:e=>{const s=new Date(e.target.value);isNaN(s.getTime())||k(s)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",disabled:!y})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:(()=>{const s=new Date(I),t=ae(s),a=ie(s);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:de,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsxs("h3",{className:"text-lg font-semibold",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()]}),e.jsx("div",{className:"w-9"})," "]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx("div",{className:"h-10 flex items-center justify-center text-xs font-semibold text-gray-600",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:a}).map((s,t)=>e.jsx("div",{className:"h-10"},`empty-${t}`)),Array.from({length:t}).map((t,a)=>{const i=a+1,r=new Date(s.getFullYear(),s.getMonth(),i),l=re(y,r),o=re(j,r),n=le(r),d=r<new Date((new Date).setHours(0,0,0,0));return e.jsx("button",{onClick:()=>!d&&oe(r),disabled:d,className:`h-10 flex items-center justify-center rounded-full text-sm font-medium transition-colors\n                                                                    ${d?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}\n                                                                    ${l||o?"bg-gray-900 text-white":""}\n                                                                    ${n?"bg-gray-100":""}\n                                                                    ${d||l||o||n?"":"text-gray-900"}\n                                                                `,children:i},i)})]})]})})()}),e.jsx("div",{children:(()=>{const s=new Date(I.getFullYear(),I.getMonth()+1),t=ae(s),a=ie(s);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-9"})," ",e.jsxs("h3",{className:"text-lg font-semibold",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()]}),e.jsx("button",{onClick:ne,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(h,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx("div",{className:"h-10 flex items-center justify-center text-xs font-semibold text-gray-600",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:a}).map((s,t)=>e.jsx("div",{className:"h-10"},`empty-${t}`)),Array.from({length:t}).map((t,a)=>{const i=a+1,r=new Date(s.getFullYear(),s.getMonth(),i),l=re(y,r),o=re(j,r),n=le(r),d=r<new Date((new Date).setHours(0,0,0,0));return e.jsx("button",{onClick:()=>!d&&oe(r),disabled:d,className:`h-10 flex items-center justify-center rounded-full text-sm font-medium transition-colors\n                                                                    ${d?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}\n                                                                    ${l||o?"bg-gray-900 text-white":""}\n                                                                    ${n?"bg-gray-100":""}\n                                                                    ${d||l||o||n?"":"text-gray-900"}\n                                                                `,children:i},i)})]})]})})()})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{f(null),k(null)},className:"text-sm font-semibold underline hover:text-gray-600 transition-colors",children:"Clear dates"}),e.jsx("button",{onClick:()=>Z(!1),className:"px-6 py-3 bg-gray-900 text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Close"})]})]})}),J&&t.photos.length>0&&e.jsxs("div",{className:"fixed inset-0 bg-white z-[60] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>q(!1),className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(s,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Close"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(r,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Share"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(l,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Save"})]})]})]}),-1===U?e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-gray-900 text-2xl font-semibold mb-6",children:["All photos (",t.photos.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.photos.map((s,t)=>e.jsx("button",{onClick:()=>K(t),className:"aspect-square rounded-lg overflow-hidden hover:opacity-80 transition-opacity",children:e.jsx("img",{src:S(s.url),alt:s.caption||`Photo ${t+1}`,className:"w-full h-full object-cover"})},s.id))})]})}):e.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[e.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 text-gray-900 font-medium",children:[U+1," / ",t.photos.length]}),U>0&&e.jsx("button",{onClick:()=>K(U-1),className:"absolute left-4 p-3 bg-white rounded-full hover:bg-gray-100 transition-colors z-10",children:e.jsx(c,{className:"h-6 w-6"})}),e.jsx("div",{className:"max-w-6xl max-h-[80vh] flex items-center justify-center",children:e.jsx("img",{src:S(t.photos[U].url),alt:t.photos[U].caption||`Photo ${U+1}`,className:"max-w-full max-h-[80vh] object-contain"})}),U<t.photos.length-1&&e.jsx("button",{onClick:()=>K(U+1),className:"absolute right-4 p-3 bg-white rounded-full hover:bg-gray-100 transition-colors z-10",children:e.jsx(h,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>K(-1),className:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-white px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Show all photos"})]})]})]})},J=({isOpen:t,onClose:i,selectedItems:r,onSave:l,initialSection:o="considerations"})=>{const[n,d]=N.useState(o),[c,h]=N.useState(r);if(!t)return null;const m=e=>{h(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},x=()=>{l(c),i()},u=()=>{h(r),i()},g=(t,i)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:u,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:i}),e.jsx("div",{className:"w-9"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-6",children:t.map(t=>{const i=c.includes(t.id);return e.jsx("div",{className:"border-b border-gray-100 pb-6 last:border-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:t.label}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:t.description}),t.learnMoreUrl&&e.jsx("button",{className:"text-sm font-medium underline mt-2",children:"Learn more"})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(t.id),className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all "+(i?"border-gray-300 hover:border-black text-gray-600":"bg-black border-black text-white"),children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>m(t.id),className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all "+(i?"bg-black border-black text-white":"border-gray-300 hover:border-black text-gray-600"),children:e.jsx(a,{className:"h-5 w-5"})})]})]})},t.id)})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:u,className:"text-base font-medium text-gray-900 hover:underline",children:"Cancel"}),e.jsx(_,{onClick:x,className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6",children:"Save"})]})]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[null===n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:u,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Guest safety"}),e.jsx("div",{className:"w-9"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The safety devices and considerations you share with guests help them make informed decisions when booking your property."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>d("considerations"),className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Safety considerations"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Add details"})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("button",{onClick:()=>d("devices"),className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Safety devices"}),e.jsx("div",{className:"text-sm text-gray-500",children:c.filter(e=>B.some(s=>s.id===e)).length>0?`${c.filter(e=>B.some(s=>s.id===e)).length} selected`:"Noise decibel monitor present"})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}),"considerations"===n&&g(W,"Safety considerations"),"devices"===n&&g(B,"Safety devices")]})})},q=["Bay view","Beach view","Canal view","City skyline view","Courtyard view","Desert view","Garden view","Golf course view","Harbor view","Lake view","Marina view","Mountain view","Ocean view","Park view","Pool view","Resort view","River view","Valley view","Vineyard view","Water view"],U=({showAddressModal:t,onCloseAddressModal:a,address:i,city:r,country:l,onSaveAddress:o,showNeighborhoodModal:n,onCloseNeighborhoodModal:d,neighborhoodDescription:c,onSaveNeighborhood:h,showGettingAroundModal:m,onCloseGettingAroundModal:x,gettingAroundDescription:u,onSaveGettingAround:g,showScenicViewsModal:p,onCloseScenicViewsModal:b,scenicViews:v,onSaveScenicViews:y,showLocationSharingModal:f,onCloseLocationSharingModal:j,showGeneralLocation:k,onSaveLocationSharing:C})=>{const[S,A]=N.useState(i),[D,M]=N.useState(r),[$,P]=N.useState(l),[F,L]=N.useState(c),[T,E]=N.useState(u),[z,G]=N.useState(v),[H,V]=N.useState(k);w.useEffect(()=>{A(i),M(r),P(l)},[i,r,l]),w.useEffect(()=>{L(c)},[c]),w.useEffect(()=>{E(u)},[u]),w.useEffect(()=>{G(v)},[v]),w.useEffect(()=>{V(k)},[k]);return e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Address"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Street address"}),e.jsx(Y,{value:S,onChange:e=>A(e.target.value),placeholder:"nkolbisson",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Apt, floor, bldg (if applicable)"}),e.jsx(Y,{placeholder:"",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"City / town / village"}),e.jsx(Y,{value:D,onChange:e=>M(e.target.value),placeholder:"Douala",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Province / state / territory (if applicable)"}),e.jsx(Y,{value:$,onChange:e=>P(e.target.value),placeholder:"Littoral Region",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Postal code (if applicable)"}),e.jsx(Y,{placeholder:"",className:"w-full"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(_,{variant:"ghost",onClick:a,children:"Cancel"}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{o({address:S,city:D,country:$}),a()},children:"Save"})]})]}),n&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Neighborhood description"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Share some highlights about the neighborhood."}),e.jsx("textarea",{value:F,onChange:e=>L(e.target.value),className:"w-full h-64 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Describe the neighborhood..."})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(_,{variant:"ghost",onClick:d,children:"Cancel"}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{h(F),d()},children:"Save"})]})]}),m&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Getting around"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Share transportation options and parking details."}),e.jsx("textarea",{value:T,onChange:e=>E(e.target.value),className:"w-full h-64 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Describe how to get around..."})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(_,{variant:"ghost",onClick:x,children:"Cancel"}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{g(T),x()},children:"Save"})]})]}),p&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Scenic views"}),e.jsx("button",{onClick:b,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-2",children:q.map(s=>e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("span",{className:"text-gray-900",children:s}),e.jsx("input",{type:"checkbox",checked:z.includes(s),onChange:()=>(e=>{G(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(s),className:"h-5 w-5 rounded border-gray-300 text-black focus:ring-black"})]},s))})}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(_,{variant:"ghost",onClick:b,children:"Cancel"}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{y(z),b()},children:"Save"})]})]}),f&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Location sharing"}),e.jsx("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"General location"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Guests will see an approximate location on the map before booking. Your exact address is only shared after a reservation is confirmed."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Show listing's general location"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Display approximate location to guests"})]}),e.jsx("button",{onClick:()=>V(!H),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(H?"bg-black":"bg-gray-300"),children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(H?"translate-x-6":"translate-x-1")})})]}),H&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Note:"})," Guests will see a circle on the map showing the general area where your property is located. The exact address will only be revealed after they complete their booking."]})})]})}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(_,{variant:"ghost",onClick:j,children:"Cancel"}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{C(H),j()},children:"Save"})]})]}),(t||n||m||p||f)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{a(),d(),x(),b(),j()}})]})},K=()=>{var t;const a=k(),{id:r}=C(),{t:l}=H(),{toast:w}=M(),{draft:D}=$(),[L,T]=N.useState(null),[Y,O]=N.useState(!0),[q,K]=N.useState("photos"),[Q,Z]=N.useState("overview"),[X,ee]=N.useState(null),[se,te]=N.useState(!1),[ae,ie]=N.useState(!1),[re,le]=N.useState(!1),[oe,ne]=N.useState(null),[de,ce]=N.useState(""),[he,me]=N.useState({});N.useEffect(()=>{L&&me({title:L.title,description:L.description})},[L]);const[xe,ue]=N.useState(!1),[ge,pe]=N.useState("considerations"),[be,ve]=N.useState(!1),[ye,fe]=N.useState(null),[je,Ne]=N.useState(null),[we,ke]=N.useState(!1),Ce=N.useRef(null),_e=N.useRef(null),Se=e=>{if(fe(e),L){const s=L.photos.findIndex(s=>s.url===e);Ne(s>=0?s:0)}},Ae=N.useCallback(()=>{if(!L||null===je)return;const e=(je-1+L.photos.length)%L.photos.length;Ne(e),fe(L.photos[e].url)},[L,je]),De=N.useCallback(()=>{if(!L||null===je)return;const e=(je+1)%L.photos.length;Ne(e),fe(L.photos[e].url)},[L,je]);N.useEffect(()=>{if(!ye)return;const e=e=>{"ArrowLeft"===e.key?Ae():"ArrowRight"===e.key?De():"Escape"===e.key&&fe(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[ye,je,L,Ae,De]);const[Me,$e]=N.useState(!1),[Pe,Fe]=N.useState(!1),[Le,Te]=N.useState(!1),[Ee,ze]=N.useState(!1),[Ge,He]=N.useState(!1),[Ye,Ve]=N.useState(""),[Ie,We]=N.useState(""),[Be,Oe]=N.useState([]),[Re,Je]=N.useState(!0),[qe,Ue]=N.useState(!1),[Ke,Qe]=N.useState(!1),[Ze,Xe]=N.useState(null),[es,ss]=N.useState(""),ts=async e=>{if(L&&r&&confirm(l("host.editor.confirmDeletePhoto","Are you sure you want to delete this photo?")))try{const s=L.photos.filter(s=>s.id!==e),t=s.map((e,s)=>({url:e.url,caption:e.caption,room_type:e.room_type||null,is_cover:1===e.is_cover||!0===e.is_cover,display_order:s}));await P.post(`/listings/${r}/photos`,{photos:t}),T({...L,photos:s}),w({title:l("common.deleted","Deleted"),description:l("host.editor.photoDeleted","Photo has been deleted.")})}catch(s){w({title:l("common.error","Error"),description:l("host.editor.deletePhotoFailed","Failed to delete photo"),variant:"destructive"})}},as=async e=>{if(L&&r)try{const s=L.photos.map(s=>({...s,is_cover:s.id===e?1:0})),t=s.map((s,t)=>({url:s.url,caption:s.caption,room_type:s.room_type||null,is_cover:s.id===e,display_order:t}));await P.post(`/listings/${r}/photos`,{photos:t}),T({...L,photos:s}),w({title:l("common.updated","Updated"),description:l("host.editor.coverPhotoUpdated","Cover photo has been updated.")})}catch(s){w({title:l("common.error","Error"),description:l("host.editor.setCoverFailed","Failed to update cover photo"),variant:"destructive"})}},is=async()=>{if(L&&r&&Ze)try{const e=L.photos.map(e=>e.id===Ze?{...e,caption:es}:e),s=e.map((e,s)=>({url:e.url,caption:e.caption,room_type:e.room_type||null,is_cover:1===e.is_cover||!0===e.is_cover,display_order:s}));await P.post(`/listings/${r}/photos`,{photos:s}),T({...L,photos:e}),Xe(null),w({title:l("common.saved","Saved"),description:l("host.editor.captionSaved","Caption has been saved.")})}catch(e){w({title:l("common.error","Error"),description:l("host.editor.saveCaptionFailed","Failed to save caption"),variant:"destructive"})}};if(N.useEffect(()=>{r&&((async()=>{try{const e=await P.get(`/listings/${r}`);T(e.data.listing?{...e.data.listing,amenities:e.data.amenities||[],photos:e.data.photos||[],safety_items:e.data.safety_items||[]}:null)}catch(e){}finally{O(!1)}})(),(async()=>{try{const e=await P.get(`/calendar/${r}/settings`);ee(e.data)}catch(e){}})())},[r]),Y)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l("common.loading","Loading...")});if(!L)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l("host.editor.notFound","Listing not found")});const rs=[{id:"photos",label:l("host.editor.sidebar.photos","Photos"),icon:m,description:l("host.editor.sidebar.addAtLeastNPhotos","Add at least 5 photos")},{id:"title",label:l("host.editor.sidebar.title","Title"),icon:x,description:(null==L?void 0:L.title)||l("host.editor.sidebar.addTitle","Add a title")},{id:"description",label:l("host.editor.sidebar.description","Description"),icon:null,description:(()=>{try{const e=(null==L?void 0:L.description)?JSON.parse(L.description):null;return(null==e?void 0:e.listingDescription)||l("host.editor.sidebar.addDescription","Add a description")}catch{return(null==L?void 0:L.description)||l("host.editor.sidebar.addDescription","Add a description")}})()},{id:"pricing",label:l("host.editor.sidebar.pricing","Pricing"),icon:null,description:`${A(L.price_per_night)} ${l("host.editor.perNight","per night")}`},{id:"availability",label:l("host.editor.sidebar.availability","Availability"),icon:null,description:(null==X?void 0:X.min_nights)?l("host.editor.sidebar.nightStaysRangeWithCount","{{min}} – {{max}} night stays",{min:X.min_nights,max:X.max_nights||365}):l("host.editor.sidebar.addDetails","Add details")},{id:"number_of_guests",label:l("host.editor.sidebar.numberOfGuests","Number of guests"),icon:u,description:`${L.max_guests} ${l("common.guests","guests")}`},{id:"amenities",label:l("host.editor.sidebar.amenities","Amenities"),icon:i,description:L.amenities&&L.amenities.length>0?L.amenities.slice(0,2).map(e=>{var s;return null==(s=z[e])?void 0:s.label}).join(" · ")+(L.amenities.length>2?` +${L.amenities.length-2} ${l("host.editor.more","more")}`:""):l("host.editor.sidebar.addDetails","Add details")},{id:"location",label:l("host.editor.sidebar.location","Location"),icon:d,description:L.address||L.city||l("host.editor.sidebar.addLocation","Add location")},{id:"house_rules",label:l("host.editor.sidebar.houseRules","House rules"),icon:g,description:l("host.editor.sidebar.guestsMustAgree","Guests must agree to your rules")},{id:"guest_safety",label:l("host.editor.sidebar.guestSafety","Guest safety"),icon:p,description:(()=>{const e=((null==L?void 0:L.safety_items)||[]).filter(e=>B.some(s=>s.id===e)).length;return e>0?`${e} ${l("host.editor.safetyDevice","safety device")}${e>1?"s":""}`:l("host.editor.sidebar.addSafetyInformation","Add safety information")})()},{id:"cancellation_policy",label:l("host.editor.sidebar.cancellationPolicy","Cancellation policy"),icon:x,description:L.cancellation_policy||l("host.editor.sidebar.addPolicy","Add policy")}],ls=[{id:"flexible",label:l("host.editor.cancellation.flexible","Flexible"),description:l("host.editor.cancellation.flexibleDesc","Full refund 1 day prior to arrival")},{id:"moderate",label:l("host.editor.cancellation.moderate","Moderate"),description:l("host.editor.cancellation.moderateDesc","Full refund 5 days prior to arrival")},{id:"strict",label:l("host.editor.cancellation.strict","Strict"),description:l("host.editor.cancellation.strictDesc","Full refund for 48 hours after booking, if the check-in date is at least 14 days away. 50% refund up to 7 days prior to arrival.")}],os=[{id:"additional",label:"Additional photos",image:L.photos.length>0?S(L.photos[0].url):null}],ns=(null==(t=rs.find(e=>e.id===q))?void 0:t.label)||l("host.editor.listingEditor","Listing editor");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsxs("header",{className:"h-16 md:h-20 border-b border-gray-200 flex items-center justify-between px-4 sm:px-6 sticky top-0 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{"overview"===Q?qe?Ue(!1):a("/host/dashboard"):Z("overview")},className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(c,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold",children:"overview"!==Q?l("host.editor.photoTour","Photo tour"):qe?ns:l("host.editor.listingEditor","Listing editor")})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsxs("button",{onClick:()=>a("/host/preview"),className:"hidden md:inline-flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 transition-colors",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:l("host.editor.view","View")})]}),"published"!==L.status&&e.jsx(_,{onClick:async()=>{var e,s;if(r)try{Qe(!0),await P.post(`/listings/${r}/publish`),w({title:l("host.preview.publishedTitle","Listing published!"),description:l("host.preview.publishedDesc","Your listing is now live on Le Mboko")}),a("/host/dashboard")}catch(t){let a=l("host.preview.publishFailedDesc","Please check all required fields");t instanceof V&&(null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.error)?a=t.response.data.error:t instanceof Error&&(a=t.message),w({title:l("host.preview.publishFailedTitle","Failed to publish"),description:a,variant:"destructive"})}finally{Qe(!1)}},disabled:Ke,className:"rounded-full",children:Ke?l("host.preview.publishing","Publishing..."):l("host.preview.publishListing","Publish listing")})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("aside",{className:"hidden lg:block w-80 border-r border-gray-200 overflow-y-auto h-[calc(100vh-64px)] pb-10",children:e.jsx("div",{className:"p-6",children:"overview"===Q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full mb-8 w-fit",children:e.jsx("button",{className:"px-4 py-1.5 bg-white rounded-full text-sm font-semibold shadow-sm",children:l("host.editor.yourSpace","Your space")})}),e.jsxs("button",{onClick:()=>a((e=>{switch(e){case 0:return"/host/intro";case 1:return"/host/amenities";case 2:return"/host/location";case 3:return"/host/photos";case 4:return"/host/title";case 5:return"/host/description";case 6:return"/host/booking-settings";case 7:return"/host/pricing";case 8:return"/host/safety";default:return"/host/preview"}})(D.step||0)),className:"w-full text-left mb-8 border border-gray-200 rounded-xl p-4 flex items-center justify-between cursor-pointer hover:border-gray-300 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"font-semibold text-sm",children:l("host.editor.completeRequiredSteps","Complete required steps")})]}),e.jsx("p",{className:"text-xs text-gray-500",children:l("host.editor.finalTasksToPublish","Finish these final tasks to publish your listing and start getting booked.")})]}),e.jsx(c,{className:"h-4 w-4 rotate-180 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:rs.map(s=>e.jsxs("button",{onClick:()=>K(s.id),className:"w-full text-left p-4 rounded-xl border transition-all "+(q===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300 bg-white"),children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]},s.id))}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>ie(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[e.jsx(b,{className:"h-5 w-5"}),l("host.editor.view","View")]})})]}):e.jsx("div",{className:"space-y-6",children:os.map(s=>e.jsxs("button",{onClick:()=>Z("additional"),className:"w-full group flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl overflow-hidden mb-2 border-2 transition-all "+(Q===s.id?"border-black ring-1 ring-black":"border-transparent group-hover:scale-105"),children:s.image?e.jsx(F,{src:s.image,alt:s.label,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(m,{className:"h-8 w-8 text-gray-400"})})}),e.jsx("span",{className:"text-xs font-medium "+(Q===s.id?"text-black":"text-gray-500"),children:s.label})]},s.id))})})}),e.jsx("main",{className:"flex-1 overflow-y-auto h-[calc(100vh-64px)] p-4 sm:p-6 md:p-8 lg:p-12 pb-24 md:pb-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:["overview"===Q&&!qe&&e.jsxs("div",{className:"md:hidden mb-6",children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full mb-4 w-fit",children:e.jsx("button",{className:"px-4 py-1.5 bg-white rounded-full text-sm font-semibold shadow-sm",children:l("host.editor.yourSpace","Your space")})}),e.jsx("div",{className:"space-y-3",children:rs.map(s=>e.jsxs("button",{onClick:()=>{K(s.id),Ue(!0),Z("overview"),"undefined"!=typeof window&&"scrollTo"in window&&window.scrollTo({top:0,behavior:"smooth"})},className:"w-full text-left p-4 rounded-xl border transition-all "+(q===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300 bg-white"),children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]},s.id))})]}),"overview"===Q?"photos"===q&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:l("host.editor.photoTour","Photo tour")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>ve(!0),children:l("host.editor.allPhotos","All photos")}),e.jsx(_,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>{var e;return null==(e=Ce.current)?void 0:e.click()},children:e.jsx(i,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-2xl",children:l("host.editor.photoTourHelp","Manage photos and add details. Guests will only see your tour if every room has a photo.")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[L.photos.map(s=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"aspect-[4/3] rounded-xl overflow-hidden bg-gray-100 relative group cursor-pointer",onClick:()=>Se(s.url),children:[e.jsx(F,{src:S(s.url),alt:s.caption,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-3",children:[e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),ts(s.id)},className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100 shadow-sm",title:l("common.delete","Delete"),children:e.jsx(v,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(_,{variant:"secondary",size:"sm",className:"rounded-full bg-white text-black hover:bg-gray-100",onClick:e=>{e.stopPropagation(),as(s.id)},children:[e.jsx(o,{className:"h-4 w-4 mr-1 "+(1===s.is_cover||!0===s.is_cover?"fill-yellow-400 text-yellow-400":"")}),1===s.is_cover||!0===s.is_cover?l("host.editor.cover","Cover"):l("host.editor.setAsCover","Set as cover")]})})]}),(1===s.is_cover||!0===s.is_cover)&&e.jsx("div",{className:"absolute top-3 left-3 bg-white text-black px-2 py-1 rounded text-xs font-semibold shadow-sm",children:l("host.editor.cover","Cover")})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-1",children:Ze===s.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:es,onChange:e=>ss(e.target.value),className:"flex-1 text-sm border-b border-black focus:outline-none",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&is(),"Escape"===e.key&&Xe(null)}}),e.jsx("button",{onClick:is,className:"text-xs font-semibold underline",children:l("common.save","Save")})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:s.caption||l("host.editor.addCaption","Add a caption")}),e.jsx("button",{onClick:()=>{Xe(s.id),ss(s.caption||"")},className:"text-xs font-semibold underline shrink-0",children:l("common.edit","Edit")})]})})]},s.id)),0===L.photos.length&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx("p",{className:"text-gray-500",children:l("host.editor.noPhotosYet","No photos uploaded yet")}),e.jsxs(_,{variant:"outline",className:"mt-4 rounded-full",onClick:()=>{var e;return null==(e=Ce.current)?void 0:e.click()},children:[e.jsx(i,{className:"h-4 w-4 mr-2"}),l("host.editor.addPhotos","Add photos")]})]})]})]}):qe?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:l("host.editor.additionalPhotos","Additional photos")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>ve(!0),children:l("host.editor.managePhotos","Manage photos")}),e.jsx(_,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>{var e;return null==(e=Ce.current)?void 0:e.click()},children:e.jsx(i,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-2xl",children:"additional"===Q?l("host.editor.additionalPhotosHelp","These photos aren't included in a room or space, but they'll still appear in your listing."):l("host.editor.addRoomPhotosHelp","Add photos to this room to complete your photo tour.")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[L.photos.map(s=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"aspect-[4/3] rounded-xl overflow-hidden bg-gray-100 relative group cursor-pointer",onClick:()=>Se(s.url),children:[e.jsx(F,{src:S(s.url),alt:s.caption,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-3",children:[e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),ts(s.id)},className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100 shadow-sm",children:e.jsx(v,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(_,{variant:"secondary",size:"sm",className:"rounded-full bg-white text-black hover:bg-gray-100",onClick:e=>{e.stopPropagation(),as(s.id)},children:[e.jsx(o,{className:"h-4 w-4 mr-1 "+(1===s.is_cover||!0===s.is_cover?"fill-yellow-400 text-yellow-400":"")}),1===s.is_cover||!0===s.is_cover?l("host.editor.cover","Cover"):l("host.editor.setAsCover","Set as cover")]})})]}),(1===s.is_cover||!0===s.is_cover)&&e.jsx("div",{className:"absolute top-3 left-3 bg-white text-black px-2 py-1 rounded text-xs font-semibold shadow-sm",children:l("host.editor.cover","Cover")})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-1",children:Ze===s.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:es,onChange:e=>ss(e.target.value),className:"flex-1 text-sm border-b border-black focus:outline-none",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&is(),"Escape"===e.key&&Xe(null)}}),e.jsx("button",{onClick:is,className:"text-xs font-semibold underline",children:l("common.save","Save")})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:s.caption||l("host.editor.addCaption","Add a caption")}),e.jsx("button",{onClick:()=>{Xe(s.id),ss(s.caption||"")},className:"text-xs font-semibold underline shrink-0",children:l("common.edit","Edit")})]})})]},s.id)),0===L.photos.length&&e.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:l("host.editor.noPhotosYet","No photos uploaded yet")})})]})]}),"title"===q&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:l("host.editor.sidebar.title","Title")}),e.jsx("p",{className:"text-gray-500 text-sm",children:l("host.editor.title.help","Your title should highlight what makes your place special.")})]}),e.jsx("button",{onClick:()=>(async e=>{if(L)try{const s={};"title"===e&&(s.title=he.title),await P.put(`/listings/${r}`,s),T({...L,...s}),w({title:l("common.saved","Saved"),description:l("host.editor.savedSuccessfully","Your changes have been saved.")})}catch(s){w({title:l("common.error","Error"),description:l("host.editor.saveFailed","Failed to save changes"),variant:"destructive"})}})("title"),className:"font-medium underline hover:text-gray-800",children:l("host.editor.save","Save")})]}),e.jsx("textarea",{value:he.title||"",onChange:e=>me({...he,title:e.target.value}),className:"w-full p-4 border rounded-xl text-lg min-h-[100px] focus:outline-none focus:ring-2 focus:ring-black",placeholder:l("host.editor.title.placeholder","Add a title"),maxLength:50})]}),"pricing"===q&&X&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:l("host.editor.sidebar.pricing","Pricing")}),e.jsx("p",{className:"text-gray-500",children:l("host.editor.pricing.simpleHelp","Set your nightly price")})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:l("host.editor.pricing.nightlyPrice","Nightly price")}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("input",{type:"number",value:X.base_price??L.price_per_night,onChange:e=>ee({...X,base_price:Number(e.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-32 focus:outline-none focus:ring-0",min:0}),e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{className:"rounded-lg",onClick:async()=>{try{await P.put(`/calendar/${r}/settings`,{base_price:X.base_price??L.price_per_night}),w({title:l("common.saved","Saved"),description:l("host.editor.pricing.updated","Nightly price updated")})}catch(e){w({title:l("common.error","Error"),description:l("host.editor.pricing.updateFailed","Failed to update price"),variant:"destructive"})}},children:l("common.save","Save")})})]}),"availability"===q&&X&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:l("host.editor.sidebar.availability","Availability")}),e.jsx("p",{className:"text-gray-500",children:l("host.editor.availability.help","These settings apply to all nights, unless you customize them by date.")})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:l("host.editor.availability.tripLength","Trip length")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:l("host.editor.availability.minNights","Minimum nights")}),e.jsx("input",{type:"number",value:X.min_nights||"",onChange:e=>ee({...X,min_nights:""===e.target.value?void 0:Number(e.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",placeholder:"1"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:l("host.editor.availability.maxNights","Maximum nights")}),e.jsx("input",{type:"number",value:X.max_nights||"",onChange:e=>ee({...X,max_nights:""===e.target.value?void 0:Number(e.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-24 focus:outline-none focus:ring-0",placeholder:"365"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:l("host.editor.availability.advanceNotice","Advance notice")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l("host.editor.availability.advanceNoticeHelp","How much notice do you need between a guest's booking and their arrival?")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:l("host.editor.availability.days","Days")}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:X.advance_notice,onChange:e=>ee({...X,advance_notice:e.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"same_day",children:l("host.editor.availability.sameDay","Same day")}),e.jsx("option",{value:"1_day",children:l("host.editor.availability.1day","1 day")}),e.jsx("option",{value:"2_days",children:l("host.editor.availability.2days","2 days")}),e.jsx("option",{value:"3_days",children:l("host.editor.availability.3days","3 days")}),e.jsx("option",{value:"7_days",children:l("host.editor.availability.7days","7 days")})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:l("host.editor.availability.sameDayHelp","Guests can book on the same day as check-in until this time.")})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:l("host.editor.availability.time","Time")}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:X.same_day_cutoff_time,onChange:e=>ee({...X,same_day_cutoff_time:e.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:Array.from({length:24}).map((s,t)=>{const a=t,i=`${0===a?12:a>12?a-12:a}:00 ${a<12?"AM":"PM"}`;return e.jsx("option",{value:`${a}:00`,children:i},t)})}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:l("host.editor.availability.preparationTime","Preparation time")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l("host.editor.availability.preparationTimeHelp","Block time before and after each reservation to prepare your space.")}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:X.preparation_time,onChange:e=>ee({...X,preparation_time:e.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"none",children:l("host.editor.availability.none","None")}),e.jsx("option",{value:"1_night",children:l("host.editor.availability.1night","1 night before and after each reservation")}),e.jsx("option",{value:"2_nights",children:l("host.editor.availability.2nights","2 nights before and after each reservation")})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:l("host.editor.availability.availabilityWindow","Availability window")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l("host.editor.availability.availabilityWindowHelp","How far in advance can guests book?")}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:X.availability_window,onChange:e=>ee({...X,availability_window:Number(e.target.value)}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:3,children:l("host.editor.availability.monthsInAdvance",{count:3,defaultValue:"3 months in advance"})}),e.jsx("option",{value:6,children:l("host.editor.availability.monthsInAdvance",{count:6,defaultValue:"6 months in advance"})}),e.jsx("option",{value:9,children:l("host.editor.availability.monthsInAdvance",{count:9,defaultValue:"9 months in advance"})}),e.jsx("option",{value:12,children:l("host.editor.availability.monthsInAdvance",{count:12,defaultValue:"12 months in advance"})}),e.jsx("option",{value:24,children:l("host.editor.availability.monthsInAdvance",{count:24,defaultValue:"24 months in advance"})})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(c,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})})]}),e.jsx("div",{className:"flex justify-end border-t pt-6",children:e.jsx(_,{onClick:async()=>{try{await P.put(`/calendar/${r}/settings`,{min_nights:X.min_nights,max_nights:X.max_nights,advance_notice:X.advance_notice,same_day_cutoff_time:X.same_day_cutoff_time,preparation_time:X.preparation_time,availability_window:X.availability_window})}catch(e){}},className:"bg-black text-white hover:bg-gray-800 rounded-lg px-6",children:l("common.save","Save")})})]}),"number_of_guests"===q&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl mx-auto text-center pt-12",children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(u,{className:"h-16 w-16 text-gray-800"})})}),e.jsx("h2",{className:"text-xl text-gray-600 mb-12",children:l("host.editor.guests.howMany","How many guests can fit comfortably in your space?")}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-12",children:[e.jsx("button",{onClick:()=>{const e=Math.max(1,L.max_guests-1);T({...L,max_guests:e})},disabled:L.max_guests<=1,className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:border-black disabled:opacity-50 disabled:hover:border-gray-300 transition-colors",children:e.jsx(n,{className:"h-6 w-6 text-gray-600"})}),e.jsx("span",{className:"text-8xl font-semibold text-gray-900",children:L.max_guests}),e.jsx("button",{onClick:()=>{const e=L.max_guests+1;T({...L,max_guests:e})},className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:border-black transition-colors",children:e.jsx(i,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(_,{onClick:async()=>{try{await P.put(`/listings/${r}`,{max_guests:L.max_guests})}catch(e){}},className:"bg-black text-white hover:bg-gray-800 rounded-lg px-8 py-6 text-lg font-semibold",children:l("host.editor.save","Save")})})]}),"amenities"===q&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:l("host.editor.sidebar.amenities","Amenities")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>te(!0),children:l("edit","Edit")}),e.jsx(_,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>te(!0),children:e.jsx(i,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8",children:l("host.editor.amenities.help","You've added these to your listing so far.")}),e.jsx("div",{className:"space-y-6",children:L.amenities&&L.amenities.length>0?L.amenities.map(s=>{const t=z[s];if(!t)return null;const a=t.icon;return e.jsxs("div",{className:"flex gap-4 pb-6 border-b border-gray-100 last:border-0",children:[e.jsx(a,{className:"h-6 w-6 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.label}),e.jsx("div",{className:"text-sm text-gray-500",children:t.description})]})]},s)}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:l("host.editor.amenities.none","No amenities added yet")}),e.jsx(_,{variant:"outline",className:"rounded-full",onClick:()=>te(!0),children:l("host.editor.amenities.add","Add amenities")})]})})]}),"location"===q&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:l("host.editor.sidebar.location","Location")}),e.jsx("p",{className:"text-gray-500",children:l("host.editor.location.help","Your exact address will only be shared with confirmed guests.")})]}),L.latitude&&L.longitude?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-64 bg-gray-100 relative",children:e.jsx("iframe",{width:"100%",height:"100%",frameBorder:"0",style:{border:0},src:`https://www.openstreetmap.org/export/embed.html?bbox=${L.longitude-.01},${L.latitude-.01},${L.longitude+.01},${L.latitude+.01}&layer=mapnik&marker=${L.latitude},${L.longitude}`,allowFullScreen:!0})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(d,{className:"h-5 w-5 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:L.address||`${L.city}, ${L.country}`}),e.jsxs("div",{className:"text-sm text-gray-500",children:[L.latitude.toFixed(6),", ",L.longitude.toFixed(6)]})]})]}),e.jsx(_,{variant:"outline",className:"w-full rounded-lg border-gray-300",onClick:()=>a(`/host/location?listing=${r}`),children:l("host.editor.location.edit","Edit location")})]})]}),e.jsxs("div",{className:"border rounded-xl divide-y",children:[e.jsxs("button",{onClick:()=>$e(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.location.address","Address")}),e.jsx("div",{className:"text-sm text-gray-500",children:L.address||`${L.city}, ${L.country}`})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>He(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.location.sharing","Location sharing")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.editor.location.sharingHelp","Show listing's general location")})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>Fe(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.location.neighborhood","Neighborhood description")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.editor.addDetails","Add details")})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>ze(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.location.scenicViews","Scenic views")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.editor.addDetails","Add details")})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[e.jsx(d,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:l("host.editor.location.none","No location set")}),e.jsx("p",{className:"text-gray-500 mb-6",children:l("host.editor.location.noneHelp","Add your property's location to help guests find you.")}),e.jsx(_,{className:"bg-black text-white hover:bg-gray-800 rounded-lg",onClick:()=>a(`/host/location?listing=${r}`),children:l("host.editor.location.add","Add location")})]})]}),"house_rules"===q&&L&&e.jsx("div",{className:""+(qe?"":"hidden md:block"),children:e.jsx(G,{rules:(()=>{try{return L.house_rules?JSON.parse(L.house_rules):E}catch{return E}})(),maxGuests:L.max_guests||1,onRulesChange:async e=>{const s=JSON.stringify(e);T({...L,house_rules:s});try{await P.put(`/listings/${r}`,{house_rules:s})}catch(t){}},onMaxGuestsChange:async e=>{T({...L,max_guests:e});try{await P.put(`/listings/${r}`,{max_guests:e})}catch(s){}}})}),"description"===q&&(()=>{var s,t;const a=(()=>{try{return L.description?JSON.parse(L.description):{listingDescription:"",propertyDetails:"",guestAccess:"",guestInteraction:"",otherDetails:""}}catch{return{listingDescription:L.description||"",propertyDetails:"",guestAccess:"",guestInteraction:"",otherDetails:""}}})(),i=[{id:"listingDescription",title:l("host.editor.description.listingDescription"),subtitle:a.listingDescription||l("host.editor.sidebar.addDescription"),placeholder:l("host.editor.description.placeholderDetailed.listingDescription")},{id:"propertyDetails",title:l("host.editor.description.propertyDetails"),subtitle:a.propertyDetails||l("host.editor.sidebar.addDetails"),placeholder:l("host.editor.description.placeholderDetailed.propertyDetails")},{id:"guestAccess",title:l("host.editor.description.guestAccess"),subtitle:a.guestAccess||l("host.editor.sidebar.addDetails"),placeholder:l("host.editor.description.placeholderDetailed.guestAccess")},{id:"guestInteraction",title:l("host.editor.description.guestInteraction"),subtitle:a.guestInteraction||l("host.editor.sidebar.addDetails"),placeholder:l("host.editor.description.placeholderDetailed.guestInteraction")},{id:"otherDetails",title:l("host.editor.description.otherDetails"),subtitle:a.otherDetails||l("host.editor.sidebar.addDetails"),placeholder:l("host.editor.description.placeholderDetailed.otherDetails")}];return e.jsxs("div",{className:""+(qe?"":"hidden md:block"),children:[e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:l("host.editor.sidebar.description","Description")})}),e.jsx("div",{className:"space-y-0 border border-gray-200 rounded-xl overflow-hidden",children:i.map((s,t)=>e.jsxs("button",{onClick:()=>{ne(s.id),ce(a[s.id]||"")},className:"w-full text-left p-4 hover:bg-gray-50 transition-colors flex items-center justify-between "+(t!==i.length-1?"border-b border-gray-200":""),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:s.title}),e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:s.subtitle})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400 flex-shrink-0 ml-4"})]},s.id))})]}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>ne(null),className:"p-2 hover:bg-gray-100 rounded-full -ml-2",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-base font-semibold absolute left-1/2 -translate-x-1/2",children:null==(s=i.find(e=>e.id===oe))?void 0:s.title}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["propertyDetails"===oe&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share a general description of your property's rooms and spaces so guests know what to expect."}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:l("host.editor.description.availableCharacters",{count:500-de.length})}),e.jsx("textarea",{value:de,onChange:e=>{e.target.value.length<=500&&ce(e.target.value)},className:"w-full min-h-[400px] text-base border-none p-0 resize-none focus:ring-0 focus:outline-none placeholder-gray-400",placeholder:null==(t=i.find(e=>e.id===oe))?void 0:t.placeholder,autoFocus:!0})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>ne(null),className:"text-base font-medium text-gray-900 hover:underline",children:l("common.cancel")}),e.jsx(_,{onClick:async()=>{const e={...a,[oe]:de},s=JSON.stringify(e);T({...L,description:s});try{await P.put(`/listings/${r}`,{description:s}),ne(null)}catch(t){}},disabled:0===de.length,className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6 disabled:opacity-50 disabled:cursor-not-allowed",children:l("common.save")})]})]})})]})})(),"guest_safety"===q&&L&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsx("h2",{className:"text-2xl font-semibold",children:l("host.editor.sidebar.guestSafety","Guest safety")})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[0===(L.safety_items||[]).filter(e=>!B.some(s=>s.id===e)).length&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.safety.coAlarmMissing","Carbon monoxide alarm not reported")})}),!(L.safety_items||[]).some(e=>"smoke_alarm"===e)&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.safety.smokeAlarmMissing","Smoke alarm not reported")})}),(L.safety_items||[]).some(e=>"noise_decibel_monitor"===e)&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.safety.noiseMonitorPresent","Noise decibel monitor present")})})]}),e.jsx("p",{className:"text-gray-500 mb-6",children:l("host.editor.safety.help","The safety devices and considerations you share with guests help them make informed decisions when booking your property.")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{pe("considerations"),ue(!0)},className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.safety.considerations","Safety considerations")}),e.jsx("div",{className:"text-sm text-gray-500",children:(L.safety_items||[]).filter(e=>W.some(s=>s.id===e)).length>0?`${(L.safety_items||[]).filter(e=>W.some(s=>s.id===e)).length} ${l("common.selected","selected")}`:l("host.editor.addDetails","Add details")})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>{pe("devices"),ue(!0)},className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:l("host.editor.safety.devices","Safety devices")}),e.jsx("div",{className:"text-sm text-gray-500",children:(L.safety_items||[]).filter(e=>B.some(s=>s.id===e)).length>0?`${(L.safety_items||[]).filter(e=>B.some(s=>s.id===e)).length} ${l("common.selected","selected")}`:l("host.editor.safety.noiseMonitorPresent","Noise decibel monitor present")})]}),e.jsx(c,{className:"h-5 w-5 rotate-180 text-gray-400"})]})]})]}),"cancellation_policy"===q&&L&&e.jsxs("div",{className:(qe?"":"hidden md:block")+" max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:l("host.editor.sidebar.cancellationPolicy","Cancellation policy")}),e.jsx("p",{className:"text-gray-500",children:l("host.editor.cancellation.help","Choose a policy that works for you and your guests.")})]}),e.jsx("div",{className:"space-y-4",children:ls.map(s=>e.jsx("div",{className:"p-4 border rounded-xl cursor-pointer transition-all "+(L.cancellation_policy===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300"),onClick:async()=>{T({...L,cancellation_policy:s.id});try{await P.put(`/listings/${r}`,{cancellation_policy:s.id})}catch(e){}},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]}),e.jsx("div",{className:"w-5 h-5 rounded-full border flex items-center justify-center mt-0.5 "+(L.cancellation_policy===s.id?"border-black":"border-gray-300"),children:L.cancellation_policy===s.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-black rounded-full"})})]})},s.id))})]}),"overview"===Q&&!qe&&"photos"!==q&&"title"!==q&&"description"!==q&&"pricing"!==q&&"availability"!==q&&"number_of_guests"!==q&&"amenities"!==q&&"house_rules"!==q&&"guest_safety"!==q&&"cancellation_policy"!==q&&e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:l("host.editor.selectSection")})]})}),"overview"===Q&&!qe&&e.jsx("div",{className:"md:hidden fixed bottom-24 left-1/2 -translate-x-1/2 z-[60]",children:e.jsxs("button",{onClick:()=>ie(!0),className:"inline-flex items-center gap-2 px-6 py-3 rounded-full bg-gray-900 text-white shadow-lg",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:l("host.editor.view")})]})})]}),L&&e.jsx(R,{listing:L,isOpen:ae,onClose:()=>ie(!1)}),se&&L&&e.jsx(I,{selectedAmenities:L.amenities||[],onToggle:async e=>{const s=L.amenities||[],t=s.includes(e)?s.filter(s=>s!==e):[...s,e];T({...L,amenities:t});try{await P.post(`/listings/${r}/amenities`,{amenities:t})}catch(a){T({...L,amenities:s})}},onClose:()=>te(!1)}),xe&&L&&e.jsx(J,{isOpen:xe,onClose:()=>ue(!1),selectedItems:L.safety_items||[],initialSection:ge,onSave:async e=>{T({...L,safety_items:e});try{await P.put(`/listings/${r}`,{safety_items:e})}catch(s){T({...L,safety_items:L.safety_items||[]})}}}),e.jsx(U,{showAddressModal:Me,onCloseAddressModal:()=>$e(!1),address:(null==L?void 0:L.address)||"",city:(null==L?void 0:L.city)||"",country:(null==L?void 0:L.country)||"",onSaveAddress:async e=>{if(L){T({...L,...e});try{await P.put(`/listings/${r}`,e)}catch(s){}}},showNeighborhoodModal:Pe,onCloseNeighborhoodModal:()=>Fe(!1),neighborhoodDescription:Ye,onSaveNeighborhood:async e=>{Ve(e);try{await P.put(`/listings/${r}`,{neighborhood_description:e})}catch(s){}},showGettingAroundModal:Le,onCloseGettingAroundModal:()=>Te(!1),gettingAroundDescription:Ie,onSaveGettingAround:async e=>{We(e);try{await P.put(`/listings/${r}`,{getting_around:e})}catch(s){}},showScenicViewsModal:Ee,onCloseScenicViewsModal:()=>ze(!1),scenicViews:Be,onSaveScenicViews:async e=>{Oe(e);try{await P.put(`/listings/${r}`,{scenic_views:e})}catch(s){}},showLocationSharingModal:Ge,onCloseLocationSharingModal:()=>He(!1),showGeneralLocation:Re,onSaveLocationSharing:async e=>{Je(e);try{await P.put(`/listings/${r}`,{show_general_location:e})}catch(s){}}}),e.jsx("input",{ref:Ce,type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const s=e.target.files;if(s&&0!==s.length){ke(!0);try{const e=(await P.get(`/listings/${r}`)).data.photos||[],t=[];for(const r of Array.from(s)){const e=new FormData;e.append("file",r);const s=await P.post("/upload/images",e,{headers:{"Content-Type":"multipart/form-data"}});t.push(s.data.urls[0])}const a=e.map(e=>({url:e.url,caption:e.caption,room_type:e.room_type,is_cover:1===e.is_cover,display_order:e.display_order})),i=t.map(e=>({url:e,caption:"Additional photo",room_type:null,is_cover:!1,display_order:0}));await P.post(`/listings/${r}/photos`,{photos:[...a,...i]});const l=await P.get(`/listings/${r}`);T(l.data)}catch(t){}finally{ke(!1),Ce.current&&(Ce.current.value="")}}},className:"hidden"}),be&&L&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-semibold",children:["All photos (",L.photos.length,")"]}),e.jsx("button",{onClick:()=>ve(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(s,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:L.photos.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:L.photos.map(s=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>Se(s.url),children:e.jsx("img",{src:S(s.url),alt:s.caption||"Listing photo",className:"w-full h-full object-cover"})},s.id))}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No photos uploaded yet"})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx(_,{onClick:()=>ve(!1),className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6",children:"Close"})})]})}),ye&&e.jsxs("div",{className:"fixed inset-0 bg-black z-[60] flex items-center justify-center p-4 md:p-8",onClick:()=>fe(null),onTouchStart:e=>{_e.current=e.touches[0].clientX},onTouchEnd:e=>{const s=_e.current,t=e.changedTouches[0].clientX;if(null!==s){const e=t-s;Math.abs(e)>40&&(e>0?Ae():De())}_e.current=null},children:[e.jsx("button",{onClick:()=>fe(null),className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(s,{className:"h-6 w-6"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),Ae()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(c,{className:"h-6 w-6"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),De()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(h,{className:"h-6 w-6"})}),e.jsx("img",{src:S(ye),alt:"Full size view",className:"w-full h-full object-contain",onClick:e=>e.stopPropagation()})]})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 border-t bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 pb-safe",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsxs("ul",{className:"grid grid-cols-4 h-16 text-xs",children:[e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/reservations",className:"flex flex-col items-center gap-1 text-gray-600",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:l("nav.reservations","Reservations")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/dashboard",className:"flex flex-col items-center gap-1 text-gray-900 font-medium",children:[e.jsx(f,{className:"h-5 w-5"}),e.jsx("span",{children:l("nav.listings","Listings")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"#",className:"flex flex-col items-center gap-1 text-gray-600",children:[e.jsx(j,{className:"h-5 w-5"}),e.jsx("span",{children:l("nav.messages","Messages")})]})})]})})})]})};export{K as default};
