import{O as z,p as T,aD as B,M as E,r as c,j as t,B as i,E as j,X as y,ab as O}from"./index-BumHlSai.js";import{O as N}from"./OptimizedImage-xP7m_j1R.js";import{u as A}from"./useTranslation-DUME4FCN.js";import{S as H}from"./star-CVLH76DC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),R=()=>{const u=T(),{t:o}=A(),{draft:m,updateDraft:x,nextStep:k,previousStep:C}=B(),{toast:g}=E(),[a,f]=c.useState(m.photos||[]),[l,d]=c.useState(m.coverPhotoIndex||0),[p,v]=c.useState(!1),[b,h]=c.useState(null),P=async s=>{const e=s.target.files;if(!e)return;v(!0);const r=new FormData;Array.from(e).forEach(n=>{r.append("images",n)});try{const F=(await O.post("/upload/images",r,{headers:{"Content-Type":"multipart/form-data"}})).data,I=[...a,...F.urls];f(I),g({title:o("host.photos.uploadSuccessTitle","Photos uploaded"),description:o("host.photos.uploadSuccessDesc","{{count}} photo(s) uploaded successfully",{count:e.length})})}catch{g({title:o("host.photos.uploadFailedTitle","Upload failed"),description:o("host.photos.uploadFailedDesc","Failed to upload photos. Please try again."),variant:"destructive"})}finally{v(!1)}},w=s=>{const e=a.filter((r,n)=>n!==s);f(e),l===s?d(0):l>s&&d(l-1)},S=s=>{d(s)},U=()=>{x({photos:a,coverPhotoIndex:l}),k(),u("/host/title")},D=()=>{x({photos:a,coverPhotoIndex:l}),C(),u("/host/location")};return t.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-2",children:o("host.photos.title","Add photos of your place")}),t.jsx("p",{className:"text-muted-foreground",children:o("host.photos.subtitle","You'll need at least 3 photos to get started. You can add more or make changes later.")})]}),t.jsx("div",{className:"mb-8",children:t.jsxs("label",{htmlFor:"photo-upload",className:"block border-2 border-dashed border-border rounded-lg p-12 text-center cursor-pointer hover:border-primary transition-colors",children:[t.jsx(M,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:o("host.photos.dropTitle","Drag your photos here")}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o("host.photos.dropHelp","Choose at least 3 photos")}),t.jsx(i,{type:"button",variant:"outline",disabled:p,children:p?o("host.photos.uploading","Uploading..."):o("host.photos.uploadFromDevice","Upload from your device")}),t.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:P,className:"hidden",disabled:p})]})}),a.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[a.length," ",a.length!==1?o("host.photos.photosPlural","photos"):o("host.photos.photoSingular","photo")]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.map((s,e)=>t.jsxs("div",{className:`relative aspect-square rounded-lg overflow-hidden group cursor-pointer ${e===l?"ring-4 ring-primary":""}`,onClick:()=>h(s),children:[t.jsx(N,{src:j(s),alt:`Photo ${e+1}`,className:"w-full h-full object-cover"}),t.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[t.jsxs(i,{size:"sm",variant:"secondary",onClick:r=>{r.stopPropagation(),S(e)},children:[t.jsx(H,{className:"h-4 w-4 mr-1"}),e===l?o("host.photos.cover","Cover"):o("host.photos.setAsCover","Set as cover")]}),t.jsx(i,{size:"sm",variant:"destructive",onClick:r=>{r.stopPropagation(),w(e)},children:t.jsx(y,{className:"h-4 w-4"})})]}),e===l&&t.jsx("div",{className:"absolute top-2 left-2 bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:o("host.photos.coverPhoto","Cover photo")})]},e))})]}),b&&t.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4 md:p-8",onClick:()=>h(null),children:[t.jsx("button",{onClick:()=>h(null),className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:t.jsx(y,{className:"h-6 w-6"})}),t.jsx(N,{src:j(b),alt:"Full size view",className:"w-full h-full object-contain",onClick:s=>s.stopPropagation()})]}),t.jsxs("div",{className:"flex justify-between items-center mt-12 pt-6 border-t",children:[t.jsx(i,{variant:"outline",onClick:D,children:o("common.back","Back")}),t.jsx(i,{onClick:U,disabled:a.length<3,size:"lg",children:o("common.continue","Continue")})]}),t.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:o("common.stepOf","Step {{current}} of {{total}}",{current:4,total:10})})]})})};export{R as default};
