import{j as e,c as z,b as Z,r as n,a as oe,u as _e,R as Pe,d as Se,e as Me,f as ne,P as le,g as D,A as ie,h as ce,i as Oe,k as Re,l as Ae,m as Ee,n as $e,F as De,D as Fe,C as Le,o as Ie,p as V,X as J,B as G,q as Te,H as ze,s as We,t as Be}from"./index-BumHlSai.js";import{u as He}from"./useQuery-wQaSLt0g.js";import{D as Ge}from"./index.esm-DZts7F4_.js";import{C as Ke}from"./chevron-right-Cey3u9Ra.js";import{C as Ue}from"./chevron-left-BgQrOA8v.js";import{u as X}from"./useTranslation-DUME4FCN.js";import{f as qe}from"./fr-WkZ76UWi.js";import{S as T}from"./search-bg3BFgJa.js";import{M as ee}from"./minus-BBPBE3n7.js";import{P as te}from"./plus-zj-BiCMM.js";import{C as Ve}from"./calendar-B4NFKoEL.js";import{e as Xe,f as R}from"./format-OVVNnQ9P.js";import{S as Qe,H as Ye}from"./Header-CQjoyTD4.js";import{F as Ze}from"./Footer-D_4nY92E.js";import{M as Je}from"./MobileNav-DOEiLKDh.js";import{P as et}from"./PropertyCard-DJ6Lzmt9.js";import"./LanguageSwitcher-B49yhAFl.js";import"./index-BcTPR2G6.js";import"./check-Cw4ObBPz.js";import"./menu-CwDdBYwq.js";import"./heart-DX2l2ZpK.js";import"./message-square-BTQwkIw7.js";import"./useWishlist-DPRVGm7i.js";import"./OptimizedImage-xP7m_j1R.js";import"./star-CVLH76DC.js";function U({className:t,classNames:u,showOutsideDays:o=!0,...m}){return e.jsx(Ge,{showOutsideDays:o,className:z("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:z(Z({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:z(Z({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...u},components:{IconLeft:({...i})=>e.jsx(Ue,{className:"h-4 w-4"}),IconRight:({...i})=>e.jsx(Ke,{className:"h-4 w-4"})},...m})}U.displayName="Calendar";var W="Popover",[de]=Se(W,[oe]),F=oe(),[tt,M]=de(W),me=t=>{const{__scopePopover:u,children:o,open:m,defaultOpen:i,onOpenChange:l,modal:a=!1}=t,c=F(u),d=n.useRef(null),[y,j]=n.useState(!1),[N,g]=_e({prop:m,defaultProp:i??!1,onChange:l,caller:W});return e.jsx(Pe,{...c,children:e.jsx(tt,{scope:u,contentId:Me(),triggerRef:d,open:N,onOpenChange:g,onOpenToggle:n.useCallback(()=>g(C=>!C),[g]),hasCustomAnchor:y,onCustomAnchorAdd:n.useCallback(()=>j(!0),[]),onCustomAnchorRemove:n.useCallback(()=>j(!1),[]),modal:a,children:o})})};me.displayName=W;var ue="PopoverAnchor",st=n.forwardRef((t,u)=>{const{__scopePopover:o,...m}=t,i=M(ue,o),l=F(o),{onCustomAnchorAdd:a,onCustomAnchorRemove:c}=i;return n.useEffect(()=>(a(),()=>c()),[a,c]),e.jsx(ie,{...l,...m,ref:u})});st.displayName=ue;var xe="PopoverTrigger",he=n.forwardRef((t,u)=>{const{__scopePopover:o,...m}=t,i=M(xe,o),l=F(o),a=ne(u,i.triggerRef),c=e.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ye(i.open),...m,ref:a,onClick:D(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?c:e.jsx(ie,{asChild:!0,...l,children:c})});he.displayName=xe;var Q="PopoverPortal",[at,rt]=de(Q,{forceMount:void 0}),pe=t=>{const{__scopePopover:u,forceMount:o,children:m,container:i}=t,l=M(Q,u);return e.jsx(at,{scope:u,forceMount:o,children:e.jsx(ce,{present:o||l.open,children:e.jsx(Oe,{asChild:!0,container:i,children:m})})})};pe.displayName=Q;var A="PopoverContent",fe=n.forwardRef((t,u)=>{const o=rt(A,t.__scopePopover),{forceMount:m=o.forceMount,...i}=t,l=M(A,t.__scopePopover);return e.jsx(ce,{present:m||l.open,children:l.modal?e.jsx(nt,{...i,ref:u}):e.jsx(lt,{...i,ref:u})})});fe.displayName=A;var ot=Ee("PopoverContent.RemoveScroll"),nt=n.forwardRef((t,u)=>{const o=M(A,t.__scopePopover),m=n.useRef(null),i=ne(u,m),l=n.useRef(!1);return n.useEffect(()=>{const a=m.current;if(a)return Re(a)},[]),e.jsx(Ae,{as:ot,allowPinchZoom:!0,children:e.jsx(ge,{...t,ref:i,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:D(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),l.current||(c=o.triggerRef.current)==null||c.focus()}),onPointerDownOutside:D(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,y=c.button===2||d;l.current=y},{checkForDefaultPrevented:!1}),onFocusOutside:D(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),lt=n.forwardRef((t,u)=>{const o=M(A,t.__scopePopover),m=n.useRef(!1),i=n.useRef(!1);return e.jsx(ge,{...t,ref:u,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var a,c;(a=t.onCloseAutoFocus)==null||a.call(t,l),l.defaultPrevented||(m.current||(c=o.triggerRef.current)==null||c.focus(),l.preventDefault()),m.current=!1,i.current=!1},onInteractOutside:l=>{var d,y;(d=t.onInteractOutside)==null||d.call(t,l),l.defaultPrevented||(m.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=l.target;((y=o.triggerRef.current)==null?void 0:y.contains(a))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}})}),ge=n.forwardRef((t,u)=>{const{__scopePopover:o,trapFocus:m,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:y,onInteractOutside:j,...N}=t,g=M(A,o),C=F(o);return $e(),e.jsx(De,{asChild:!0,loop:!0,trapped:m,onMountAutoFocus:i,onUnmountAutoFocus:l,children:e.jsx(Fe,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:j,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:y,onDismiss:()=>g.onOpenChange(!1),children:e.jsx(Le,{"data-state":ye(g.open),role:"dialog",id:g.contentId,...C,...N,ref:u,style:{...N.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),be="PopoverClose",it=n.forwardRef((t,u)=>{const{__scopePopover:o,...m}=t,i=M(be,o);return e.jsx(le.button,{type:"button",...m,ref:u,onClick:D(t.onClick,()=>i.onOpenChange(!1))})});it.displayName=be;var ct="PopoverArrow",dt=n.forwardRef((t,u)=>{const{__scopePopover:o,...m}=t,i=F(o);return e.jsx(Ie,{...i,...m,ref:u})});dt.displayName=ct;function ye(t){return t?"open":"closed"}var mt=me,ut=he,xt=pe,ve=fe;const se=mt,ae=ut,q=n.forwardRef(({className:t,align:u="center",sideOffset:o=4,...m},i)=>e.jsx(xt,{children:e.jsx(ve,{ref:i,align:u,sideOffset:o,className:z("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...m})}));q.displayName=ve.displayName;const re=["weekend","week","month"],ht=()=>{const{t,i18n:u}=X(),o=u.language==="fr"?qe:Xe,m=V(),[i,l]=n.useState(""),[a,c]=n.useState(void 0),[d,y]=n.useState("dates"),[j,N]=n.useState("weekend"),[g,C]=n.useState([]),[r,b]=n.useState({adults:0,children:0,infants:0,pets:0}),[f,h]=n.useState(!1),[k,p]=n.useState(!1),[x,v]=n.useState("destination"),[w,_]=n.useState(!1),[S,L]=n.useState("where"),[we,je]=n.useState(0),[E,Ne]=n.useState(typeof window<"u"?window.matchMedia("(max-width: 640px)").matches:!1),[B,$]=n.useState("dates");n.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(max-width: 640px)"),P=O=>Ne(O.matches);try{s.addEventListener("change",P)}catch{s.addListener(P)}return()=>{try{s.removeEventListener("change",P)}catch{s.removeListener(P)}}},[]),n.useEffect(()=>(w?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[w]);const H=()=>{const s=new URLSearchParams;i.trim()&&s.set("search",i.trim()),d==="dates"&&(a!=null&&a.from)?(s.set("checkin",a.from.toISOString()),a.to&&s.set("checkout",a.to.toISOString())):d==="flexible"&&(s.set("flexible_duration",j),g.length>0&&s.set("flexible_months",g.join(",")));const P=r.adults+r.children;P>0&&s.set("guests",P.toString()),_(!1),m(`/marketplace?${s.toString()}`)},Ce=s=>{s.preventDefault(),H()},I=(s,P)=>{b(O=>{const ke=P==="add"?O[s]+1:O[s]-1;return{...O,[s]:Math.max(0,ke)}})},Y=[{name:t("search.suggestions_list.Centre.name"),desc:t("search.suggestions_list.Centre.desc"),icon:"ðŸ“"},{name:t("search.suggestions_list.Littoral.name"),desc:t("search.suggestions_list.Littoral.desc"),icon:"ðŸŒŠ"},{name:t("search.suggestions_list.South.name"),desc:t("search.suggestions_list.South.desc"),icon:"ðŸŒ´"},{name:t("search.suggestions_list.Southwest.name"),desc:t("search.suggestions_list.Southwest.desc"),icon:"ðŸŒ‹"},{name:t("search.suggestions_list.Northwest.name"),desc:t("search.suggestions_list.Northwest.desc"),icon:"â›°ï¸"},{name:t("search.suggestions_list.West.name"),desc:t("search.suggestions_list.West.desc"),icon:"ðŸžï¸"},{name:t("search.suggestions_list.Adamawa.name"),desc:t("search.suggestions_list.Adamawa.desc"),icon:"ðŸ„"},{name:t("search.suggestions_list.North.name"),desc:t("search.suggestions_list.North.desc"),icon:"ðŸŒ¾"},{name:t("search.suggestions_list.Far North.name"),desc:t("search.suggestions_list.Far North.desc"),icon:"ðŸœï¸"},{name:t("search.suggestions_list.East.name"),desc:t("search.suggestions_list.East.desc"),icon:"ðŸŒ³"}];return w&&E?e.jsxs("div",{className:"fixed inset-0 z-[60] bg-gray-100 flex flex-col font-sans",children:[e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between bg-white relative",children:[e.jsx("button",{onClick:()=>_(!1),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-6 text-sm font-medium",children:e.jsx("button",{className:"text-gray-900 border-b-2 border-gray-900 pb-1",children:t("Stays")})}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx("div",{className:`bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 ${S==="where"?"ring-2 ring-black bg-white":"bg-white"}`,children:S==="where"?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:t("where")}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(T,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-800"}),e.jsx("input",{type:"text",placeholder:t("search destinations"),value:i,onChange:s=>l(s.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-100 rounded-xl font-medium text-gray-900 placeholder:text-gray-500 focus:outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"mt-4 max-h-[300px] overflow-y-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wider",children:t("common.suggestions")}),e.jsx("div",{className:"space-y-2",children:Y.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-xl cursor-pointer",onClick:()=>{l(s.name),L("when")},children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.desc})]})]},s.name))})]})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>L("where"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("where")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:i||t("common.anywhere")})]})}),e.jsx("div",{className:`bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 ${S==="when"?"ring-2 ring-black":""}`,children:S==="when"?e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 px-2",children:t("common.when")}),e.jsxs("div",{className:"flex justify-center mb-4 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>y("dates"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-all ${d==="dates"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"}`,children:t("common.dates")}),e.jsx("button",{onClick:()=>y("flexible"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-all ${d==="flexible"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"}`,children:t("common.flexible")})]}),d==="dates"?e.jsx("div",{className:"flex justify-center",children:e.jsx(U,{mode:"range",selected:a,onSelect:c,numberOfMonths:1,className:"border-0 bg-transparent p-0 w-full flex justify-center",disabled:{before:new Date(new Date().setHours(0,0,0,0))},locale:o,classNames:{month:"space-y-4 w-full",table:"w-full border-collapse space-y-1",head_row:"flex w-full mt-2 mb-2",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem] flex-1",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 flex-1",day:"h-9 w-9 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100 w-full h-full flex items-center justify-center",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground rounded-full",day_today:"bg-accent text-accent-foreground rounded-full",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"}})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("common.howLong")}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:re.map(s=>e.jsx("button",{onClick:()=>N(s),className:`px-4 py-2 rounded-full border text-sm font-medium transition-colors ${j===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"}`,children:t(`common.flexibleOptions.duration.${s}`)},s))})]})})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>L("when"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("common.when")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:d==="dates"&&(a!=null&&a.from)?`${R(a.from,"MMM dd",{locale:o})}${a.to?` - ${R(a.to,"MMM dd",{locale:o})}`:""}`:t("common.addDates")})]})}),e.jsx("div",{className:`bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 ${S==="who"?"ring-2 ring-black":""}`,children:S==="who"?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:t("common.who")}),e.jsx("div",{className:"space-y-6",children:[{type:"adults",label:t("common.adults"),sub:t("Age 13+")},{type:"children",label:t("common.children"),sub:t("Ages 2-12")},{type:"infants",label:t("common.infants"),sub:t("Under 2")},{type:"pets",label:t("common.pets"),sub:t("Traveling with a service animal?")}].map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.sub})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>I(s.type,"sub"),disabled:r[s.type]===0,children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-4 text-center text-gray-900 font-medium",children:r[s.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black grid place-items-center",onClick:()=>I(s.type,"add"),children:e.jsx(te,{className:"h-4 w-4"})})]})]},s.type))})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>L("who"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("common.who")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:r.adults+r.children>0?t("common.guest_count",{count:r.adults+r.children}):t("common.addGuests")})]})})]}),e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 pb-6 flex items-center justify-between",children:[e.jsx("button",{className:"text-base font-semibold underline text-gray-900",onClick:()=>{l(""),c(void 0),b({adults:0,children:0,infants:0,pets:0})},children:t("common.clearAll")}),e.jsxs("button",{className:"bg-[#E91E63] text-white px-8 py-3 rounded-lg font-bold text-lg flex items-center gap-2",onClick:H,children:[e.jsx(T,{className:"h-5 w-5"}),t("common.search")]})]})]}):e.jsxs("form",{onSubmit:Ce,className:"w-full max-w-4xl mx-auto relative z-40",children:[e.jsx("div",{className:"md:hidden w-full px-4",children:e.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-full shadow-md border border-gray-200 p-3",onClick:()=>_(!0),children:[e.jsx(T,{className:"h-5 w-5 text-gray-900 ml-2"}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t("search.start_research")})}),e.jsx("div",{className:"p-2 bg-white rounded-full border border-gray-200",children:e.jsx("div",{className:"h-4 w-4 border-t-2 border-r-2 border-gray-900 rotate-45 transform translate-y-[1px] translate-x-[-1px]"})})]})}),e.jsxs("div",{className:"hidden md:flex items-center bg-white rounded-full shadow-soft hover:shadow-elevated border border-gray-200 transition-all duration-300 relative",children:[e.jsxs(se,{open:f,onOpenChange:h,children:[e.jsx(ae,{asChild:!0,children:e.jsxs("div",{className:`flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 rounded-full transition-colors ${f?"bg-gray-100 shadow-sm":""}`,children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("where")}),e.jsx("input",{type:"text",placeholder:t("search destinations"),value:i,onChange:s=>l(s.target.value),className:"w-full bg-transparent border-0 p-0 text-sm text-gray-900 placeholder:text-gray-500 focus:outline-none truncate font-medium"})]})}),e.jsx(q,{className:"w-[350px] p-0 rounded-3xl overflow-hidden shadow-xl border-0 mt-4",align:"start",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-4 px-2 uppercase tracking-wider",children:t("common.suggestions")}),e.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:Y.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer transition-colors",onClick:()=>{l(s.name),h(!1),p(!0)},children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.desc})]})]},s.name))})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs(se,{open:k,onOpenChange:p,children:[e.jsx(ae,{asChild:!0,children:e.jsxs("div",{className:`flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors ${k?"bg-gray-100 rounded-full shadow-sm":""}`,children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("when")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:d==="dates"&&(a!=null&&a.from)?e.jsxs(e.Fragment,{children:[R(a.from,"MMM dd",{locale:o}),a.to?` - ${R(a.to,"MMM dd",{locale:o})}`:""]}):d==="flexible"?t("common.flexibleOptions.summary",{duration:t(`common.flexibleOptions.duration.${j}`),months:g.length>0?t("common.flexibleOptions.months",{count:g.length}):t("common.flexibleOptions.anytime")}):e.jsx("span",{className:"text-gray-400 font-normal",children:t("add dates")})})]})}),e.jsx(q,{className:"w-[88vw] max-w-[330px] sm:w-[660px] sm:max-w-[660px] p-0 rounded-3xl shadow-xl border-0 mt-4 overflow-hidden",align:"center",children:e.jsxs("div",{className:"p-3 sm:p-6 max-w-[330px] mx-auto sm:max-w-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"text-sm font-semibold text-gray-900",children:t("Stays")})}),e.jsx("button",{type:"button","aria-label":t("common.close"),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",onClick:()=>p(!1),children:e.jsx(J,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${x==="destination"?"bg-black text-white":"bg-gray-100 text-gray-700"}`,onClick:()=>v("destination"),type:"button",children:t("common.destination")}),e.jsx("button",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${x==="nearby"?"bg-black text-white":"bg-gray-100 text-gray-700"}`,onClick:()=>v("nearby"),type:"button",children:t("common.nearby")})]}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:t("common.when")}),e.jsxs("div",{className:"flex justify-center mb-6 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>y("dates"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-all ${d==="dates"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"}`,children:t("common.dates")}),e.jsx("button",{onClick:()=>y("flexible"),className:`px-4 py-1.5 text-sm font-semibold rounded-full transition-all ${d==="flexible"?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"}`,children:t("common.flexible")})]}),B==="dates"&&d==="dates"&&e.jsx("div",{children:e.jsxs("div",{className:`rounded-2xl border border-gray-200 p-4 bg-white shadow-lg ${E?"max-w-[300px] mx-auto":""}`,children:[e.jsx(U,{mode:"range",selected:a,onSelect:c,numberOfMonths:E?1:2,className:`border-0 ${E?"scale-[0.86] origin-top-left transform-gpu":""}`,disabled:{before:new Date(new Date().setHours(0,0,0,0))},locale:o,formatters:{formatWeekdayName:s=>R(s,"EEEEE",{locale:o}).toUpperCase()},classNames:{caption_label:"text-base font-semibold capitalize",...E?{head_cell:"text-muted-foreground rounded-md w-7 font-normal text-[0.7rem]",day:"h-7 w-7 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100",cell:"h-7 w-7 text-center text-[0.8rem] p-0 relative"}:{}}}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:[0,1,2,3].map(s=>e.jsx("button",{type:"button",onClick:()=>je(s),className:`px-2.5 py-1 rounded-full border text-xs ${we===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"}`,children:s===0?t("common.exactDates"):`Â± ${s} jour${s>1?"s":""}`},s))})]})}),B==="guests"&&e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white overflow-hidden shadow-lg max-w-[330px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 cursor-pointer",onClick:()=>$("dates"),children:[e.jsx("span",{className:"text-sm text-gray-700",children:t("common.when").replace("?","")}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:a!=null&&a.from?`${R(a.from,"d MMM",{locale:o})}${a!=null&&a.to?` - ${R(a.to,"d MMM",{locale:o})}`:""}`:t("add dates")})]}),e.jsx("h3",{className:"text-lg font-semibold px-5 py-4",children:t("common.who")}),e.jsx("div",{className:"divide-y divide-gray-200",children:[{type:"adults",label:t("common.adults"),sub:t("Age 13+")},{type:"children",label:t("common.children"),sub:t("Ages 2-12")},{type:"infants",label:t("common.infants"),sub:t("Under 2")},{type:"pets",label:t("common.pets"),sub:t("Traveling with a service animal?")}].map(s=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-5",children:[e.jsxs("div",{className:"pr-6",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.type==="pets"?e.jsx("button",{type:"button",className:"underline underline-offset-2 hover:text-gray-700",children:s.sub}):s.sub})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>I(s.type,"sub"),disabled:r[s.type]===0,"aria-label":`Decrease ${s.label}`,children:e.jsx(ee,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-gray-900 font-medium",children:r[s.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black grid place-items-center",onClick:()=>I(s.type,"add"),"aria-label":`Increase ${s.label}`,children:e.jsx(te,{className:"h-3 w-3"})})]})]},s.type))})]}),d==="months"&&e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"grid grid-cols-6 gap-4 px-2",children:t("common.months",{returnObjects:!0}).map(s=>e.jsxs("div",{onClick:()=>{C(P=>P.includes(s)?P.filter(O=>O!==s):[...P,s])},className:`flex flex-col items-center p-4 border rounded-xl cursor-pointer transition-all ${g.includes(s)?"border-black bg-gray-50":"border-gray-200 hover:border-black bg-white hover:bg-gray-50"}`,children:[e.jsx(Ve,{className:"h-8 w-8 mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsx("span",{className:"text-xs text-gray-500",children:"2026"})]},s))})}),d==="flexible"&&e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("common.howLong")}),e.jsx("div",{className:"flex justify-center gap-3",children:re.map(s=>e.jsx("button",{onClick:()=>N(s),className:`px-6 py-2 rounded-full border text-sm font-medium transition-colors ${j===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"}`,children:t(`common.flexibleOptions.duration.${s}`)},s))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>{c(void 0),C([]),N("weekend"),$("dates"),b({adults:0,children:0,infants:0,pets:0})},children:t("common.clearAll")}),B==="dates"?e.jsx(G,{type:"button",onClick:()=>$("guests"),children:t("common.next")}):e.jsx(G,{type:"button",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{p(!1),H()},children:t("common.search")})]})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{$("guests"),p(!0)},onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),$("guests"),p(!0))},className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors rounded-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("who")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:r.adults+r.children>0?t("common.guest_count",{count:r.adults+r.children}):e.jsx("span",{className:"text-gray-400 font-normal",children:t("add guests")})})]}),e.jsx("div",{className:"pr-2",children:e.jsx(G,{type:"submit",size:"icon",className:"h-12 w-12 rounded-full bg-primary hover:bg-primary-dark transition-all duration-300 shadow-md hover:scale-105",children:e.jsx(T,{className:"h-5 w-5 text-white stroke-[3px]"})})})]})]})},K=({title:t,properties:u,city:o})=>{const{t:m}=X(),i=V(),l=n.useRef(null),[a,c]=n.useState(!1),[d,y]=n.useState(!0),j=()=>{if(l.current){const{scrollLeft:r,scrollWidth:b,clientWidth:f}=l.current;c(r>0),y(r<b-f-10)}},N=r=>{if(l.current){const b=l.current.clientWidth*.8;l.current.scrollBy({left:r==="left"?-b:b,behavior:"smooth"})}},g=r=>(r||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");if(!u||u.length===0)return null;const C=!!o&&g(o)==="other";return e.jsxs("div",{className:"mb-4 group relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o&&!C?m("StaysIn",{city:o}):t}),o&&e.jsxs("button",{className:"text-sm font-semibold hover:underline flex items-center gap-1",onClick:()=>i(`/marketplace?search=${encodeURIComponent(C?"other":o)}`),"aria-label":C?m("otherLocations"):`See all stays in ${o}`,children:[m("seeAll")," ",e.jsx("span",{"aria-hidden":!0,children:"â€º"})]})]}),e.jsxs("div",{className:"relative",children:[a&&e.jsx("button",{onClick:()=>N("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Previous",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"M20 28 8.7 16.7a1 1 0 0 1 0-1.4L20 4"})})}),e.jsx("div",{ref:l,onScroll:j,className:"flex gap-4 md:gap-6 overflow-x-auto pb-3 snap-x snap-mandatory scroll-smooth [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:u.filter(Boolean).map((r,b)=>{var f;return e.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[240px] md:w-[280px]",children:e.jsx(et,{id:r.listing.id,name:r.listing.title,location:r.listing.city,price:r.listing.price_per_night||0,images:((f=r.photos)==null?void 0:f.map(h=>({image_url:h.url})))||[],isGuestFavorite:!1})},r.listing.id)})}),d&&e.jsx("button",{onClick:()=>N("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Next",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"m12 4 11.3 11.3a1 1 0 0 1 0 1.4L12 28"})})})]})]})},zt=()=>{const{t}=X();V();const{user:u,logout:o}=Te(),{data:m,isLoading:i,error:l}=He({queryKey:["products"],queryFn:()=>We({limit:Be.getRecommendedPageSize()+10})}),a=r=>(r||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""),c=n.useMemo(()=>["yaounde","douala","kribi"],[]),d=n.useMemo(()=>({yaounde:{display:"Yaounde",lat:3.848,lon:11.5021,synonyms:["bastos","biyem","nkolbisson","melen","odza","nkolmesseng","nkoabang","ekounou","essos","madagascar"]},douala:{display:"Douala",lat:4.0511,lon:9.7679,synonyms:["akwa","bonapriso","bonanjo","deido","makepe","ndogbong","logbaba","bepanda","bonamoussadi"]},kribi:{display:"Kribi",lat:2.94,lon:9.91,synonyms:["mpalla","londji","ebambe","lolabe"]},buea:{display:"Buea",lat:4.1527,lon:9.241,synonyms:["molyko","muea","mile 17","bongo square","great soppo","small soppo","bokwango"]}}),[]),y=(r,b,f,h)=>{const k=S=>S*Math.PI/180,x=k(f-r),v=k(h-b),w=Math.sin(x/2)**2+Math.cos(k(r))*Math.cos(k(f))*Math.sin(v/2)**2;return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},j=n.useCallback(r=>{if(!(r!=null&&r.listing))return"";const b=[r.listing.city,r.listing.address,r.listing.title].filter(Boolean).join(" "),f=a(b);if(f){for(const h of c)if(f.includes(h)||d[h].synonyms.some(p=>f.includes(p)))return d[h].display;for(const h of Object.keys(d)){if(c.includes(h))continue;if(f.includes(h)||d[h].synonyms.some(p=>f.includes(p)))return d[h].display}}if(r.listing.latitude&&r.listing.longitude){const{latitude:h,longitude:k}=r.listing;let p=null;if(Object.keys(d).forEach(x=>{const v=d[x],w=y(h,k,v.lat,v.lon);(!p||w<p.dist)&&(p={key:x,dist:w})}),p&&p.dist<=80)return d[p.key].display}return""},[c,d]),{grouped:N,other:g,buea:C}=n.useMemo(()=>{var p;const r=new Map,b=[];(m||[]).forEach(x=>{if(!(x!=null&&x.listing))return;let v=(x.listing.city||"").trim();v||(v=j(x));const w=a(v);if(!w){b.push(x);return}const _=r.get(w)||{name:v,items:[]};!_.name&&v&&(_.name=v),_.items.push(x),r.set(w,_)});const f=Array.from(r.values()).sort((x,v)=>{const w=c.indexOf(a(x.name)),_=c.indexOf(a(v.name));return w!==-1&&_!==-1?w-_:w!==-1?-1:_!==-1?1:v.items.length-x.items.length}),h=((p=f.find(x=>a(x.name)==="buea"))==null?void 0:p.items)??[],k=f.filter(x=>!c.includes(a(x.name))&&a(x.name)!=="buea").flatMap(x=>x.items);return{grouped:f,other:[...k,...b],buea:h}},[m,c,j]);return e.jsxs("div",{className:"min-h-screen bg-white pb-20 md:pb-0",children:[e.jsx(Qe,{title:t("Explore"),description:t("dashboard.seo.description")}),e.jsx(Ye,{}),e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6",children:e.jsx(ht,{})})}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 pt-8 pb-2",children:i?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-12 w-12 rounded-full border-4 border-primary/30 border-t-primary animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ze,{className:"h-4 w-4 text-primary/50"})})]}),e.jsx("p",{className:"text-muted-foreground animate-pulse",children:t("Loading best offers...")})]}):l?e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-red-500",children:t("Failed to load properties.")})}):e.jsxs(e.Fragment,{children:[N.filter(r=>c.includes(a(r.name))).sort((r,b)=>c.indexOf(a(r.name))-c.indexOf(a(b.name))).map(r=>e.jsx(K,{title:t("StaysIn",{city:r.name}),properties:r.items,city:r.name},r.name||Math.random())),C.length>0&&e.jsx(K,{title:t("StaysIn",{city:"Buea"}),properties:C,city:"Buea"},"buea-section"),g.length>0&&e.jsx(K,{title:t("otherLocations"),properties:g,city:"other"},"other-locations")]})}),e.jsx(Ze,{}),e.jsx(Je,{})]})};export{zt as default};
