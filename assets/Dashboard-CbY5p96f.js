import{j as e,q as t,r as s,b as a,c as r,s as n,u as o,P as l,e as i,d,g as c,t as m,v as u,w as x,x as h,F as p,D as g,X as f,y as b,M as y,z as v,A as w,W as j,E as N}from"./vendor-ui-DcvuiMJW.js";import{r as k,e as C,R as _}from"./vendor-react-CPc5zwff.js";import{c as M,b as O,a as P,R as S,A,C as E,d as F,B as D,u as R,e as L,g as I,f as z,h as T}from"./index-DwPe7WlF.js";import{u as $,P as q}from"./PropertyCard-DMrfn7-3.js";import{D as B}from"./index.esm-D78Y81EZ.js";import{u as W}from"./useTranslation-BptfK32d.js";import{f as K}from"./fr-qjbnyBeO.js";import{e as U,f as H}from"./vendor-utils-tyqSID0v.js";import{S as G,H as Q}from"./Header-B444uWW8.js";import{F as Y}from"./Footer-DqaNDUWV.js";import{M as J}from"./MobileNav-BeTlynVm.js";import"./vendor-charts-CNjKuHaK.js";import"./useBaseQuery-3Lu_M2RN.js";import"./useWishlist-C3hKKQtd.js";import"./OptimizedImage-DunbvjKP.js";import"./TranslatedText-B-87mhZr.js";import"./propertyTypes--Kllk2h6.js";import"./LanguageSwitcher-kkyV-vkk.js";import"./index-B9HPLTtY.js";function Z({className:a,classNames:r,showOutsideDays:n=!0,...o}){return e.jsx(B,{showOutsideDays:n,className:M("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:M(O({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:M(O({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...t})=>e.jsx(s,{className:"h-4 w-4"}),IconRight:({...s})=>e.jsx(t,{className:"h-4 w-4"})},...o})}Z.displayName="Calendar";var V="Popover",[X]=r(V,[P]),ee=P(),[te,se]=X(V),ae=t=>{const{__scopePopover:s,children:r,open:o,defaultOpen:l,onOpenChange:i,modal:d=!1}=t,c=ee(s),m=k.useRef(null),[u,x]=k.useState(!1),[h,p]=a({prop:o,defaultProp:l??!1,onChange:i,caller:V});return e.jsx(S,{...c,children:e.jsx(te,{scope:s,contentId:n(),triggerRef:m,open:h,onOpenChange:p,onOpenToggle:k.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:u,onCustomAnchorAdd:k.useCallback(()=>x(!0),[]),onCustomAnchorRemove:k.useCallback(()=>x(!1),[]),modal:d,children:r})})};ae.displayName=V;var re="PopoverAnchor";k.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=se(re,a),o=ee(a),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=n;return k.useEffect(()=>(l(),()=>i()),[l,i]),e.jsx(A,{...o,...r,ref:s})}).displayName=re;var ne="PopoverTrigger",oe=k.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=se(ne,a),d=ee(a),c=o(s,n.triggerRef),m=e.jsx(l.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":be(n.open),...r,ref:c,onClick:i(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?m:e.jsx(A,{asChild:!0,...d,children:m})});oe.displayName=ne;var le="PopoverPortal",[ie,de]=X(le,{forceMount:void 0}),ce=t=>{const{__scopePopover:s,forceMount:a,children:r,container:n}=t,o=se(le,s);return e.jsx(ie,{scope:s,forceMount:a,children:e.jsx(d,{present:a||o.open,children:e.jsx(c,{asChild:!0,container:n,children:r})})})};ce.displayName=le;var me="PopoverContent",ue=k.forwardRef((t,s)=>{const a=de(me,t.__scopePopover),{forceMount:r=a.forceMount,...n}=t,o=se(me,t.__scopePopover);return e.jsx(d,{present:r||o.open,children:o.modal?e.jsx(he,{...n,ref:s}):e.jsx(pe,{...n,ref:s})})});ue.displayName=me;var xe=x("PopoverContent.RemoveScroll"),he=k.forwardRef((t,s)=>{const a=se(me,t.__scopePopover),r=k.useRef(null),n=o(s,r),l=k.useRef(!1);return k.useEffect(()=>{const e=r.current;if(e)return m(e)},[]),e.jsx(u,{as:xe,allowPinchZoom:!0,children:e.jsx(ge,{...t,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:i(t.onCloseAutoFocus,e=>{var t;e.preventDefault(),l.current||null==(t=a.triggerRef.current)||t.focus()}),onPointerDownOutside:i(t.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,a=2===t.button||s;l.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:i(t.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),pe=k.forwardRef((t,s)=>{const a=se(me,t.__scopePopover),r=k.useRef(!1),n=k.useRef(!1);return e.jsx(ge,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var s,o;null==(s=t.onCloseAutoFocus)||s.call(t,e),e.defaultPrevented||(r.current||null==(o=a.triggerRef.current)||o.focus(),e.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:e=>{var s,o;null==(s=t.onInteractOutside)||s.call(t,e),e.defaultPrevented||(r.current=!0,"pointerdown"===e.detail.originalEvent.type&&(n.current=!0));const l=e.target;(null==(o=a.triggerRef.current)?void 0:o.contains(l))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&n.current&&e.preventDefault()}})}),ge=k.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:m,...u}=t,x=se(me,a),f=ee(a);return h(),e.jsx(p,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:e.jsx(g,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>x.onOpenChange(!1),children:e.jsx(E,{"data-state":be(x.open),role:"dialog",id:x.contentId,...f,...u,ref:s,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fe="PopoverClose";k.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=se(fe,a);return e.jsx(l.button,{type:"button",...r,ref:s,onClick:i(t.onClick,()=>n.onOpenChange(!1))})}).displayName=fe;function be(e){return e?"open":"closed"}k.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=ee(a);return e.jsx(F,{...n,...r,ref:s})}).displayName="PopoverArrow";var ye=ce,ve=ue;const we=ae,je=oe,Ne=k.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},n)=>e.jsx(ye,{children:e.jsx(ve,{ref:n,align:s,sideOffset:a,className:M("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Ne.displayName=ve.displayName;const ke=["weekend","week","month"],Ce=()=>{const{t:t,i18n:s}=W(),a="fr"===s.language?K:U,r=C(),[n,o]=k.useState(""),[l,i]=k.useState(void 0),[d,c]=k.useState("dates"),[m,u]=k.useState("weekend"),[x,h]=k.useState([]),[p,g]=k.useState({adults:0,children:0,infants:0,pets:0}),[j,N]=k.useState(!1),[_,M]=k.useState(!1),[O,P]=k.useState("destination"),[S,A]=k.useState(!1),[E,F]=k.useState("where"),[R,L]=k.useState(0),[I,z]=k.useState("undefined"!=typeof window&&window.matchMedia("(max-width: 640px)").matches),[T,$]=k.useState("dates");k.useEffect(()=>{if("undefined"==typeof window)return;const e=window.matchMedia("(max-width: 640px)"),t=e=>z(e.matches);try{e.addEventListener("change",t)}catch{e.addListener(t)}return()=>{try{e.removeEventListener("change",t)}catch{e.removeListener(t)}}},[]),k.useEffect(()=>(document.body.style.overflow=S?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[S]);const q=()=>{const e=new URLSearchParams;n.trim()&&e.set("search",n.trim()),"dates"===d&&(null==l?void 0:l.from)?(e.set("checkin",l.from.toISOString()),l.to&&e.set("checkout",l.to.toISOString())):"flexible"===d&&(e.set("flexible_duration",m),x.length>0&&e.set("flexible_months",x.join(",")));const t=p.adults+p.children;t>0&&e.set("guests",t.toString()),A(!1),r(`/marketplace?${e.toString()}`)},B=(e,t)=>{g(s=>{const a="add"===t?s[e]+1:s[e]-1;return{...s,[e]:Math.max(0,a)}})},G=[{name:t("search.suggestions_list.Centre.name"),desc:t("search.suggestions_list.Centre.desc"),icon:"ðŸ“"},{name:t("search.suggestions_list.Littoral.name"),desc:t("search.suggestions_list.Littoral.desc"),icon:"ðŸŒŠ"},{name:t("search.suggestions_list.South.name"),desc:t("search.suggestions_list.South.desc"),icon:"ðŸŒ´"},{name:t("search.suggestions_list.Southwest.name"),desc:t("search.suggestions_list.Southwest.desc"),icon:"ðŸŒ‹"},{name:t("search.suggestions_list.Northwest.name"),desc:t("search.suggestions_list.Northwest.desc"),icon:"â›°ï¸"},{name:t("search.suggestions_list.West.name"),desc:t("search.suggestions_list.West.desc"),icon:"ðŸžï¸"},{name:t("search.suggestions_list.Adamawa.name"),desc:t("search.suggestions_list.Adamawa.desc"),icon:"ðŸ„"},{name:t("search.suggestions_list.North.name"),desc:t("search.suggestions_list.North.desc"),icon:"ðŸŒ¾"},{name:t("search.suggestions_list.Far North.name"),desc:t("search.suggestions_list.Far North.desc"),icon:"ðŸœï¸"},{name:t("search.suggestions_list.East.name"),desc:t("search.suggestions_list.East.desc"),icon:"ðŸŒ³"}];return S&&I?e.jsxs("div",{className:"fixed inset-0 z-[60] bg-gray-100 flex flex-col font-sans",children:[e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between bg-white relative",children:[e.jsx("button",{onClick:()=>A(!1),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",children:e.jsx(f,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-6 text-sm font-medium",children:e.jsx("button",{className:"text-gray-900 border-b-2 border-gray-900 pb-1",children:t("Stays")})}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("where"===E?"ring-2 ring-black bg-white":"bg-white"),children:"where"===E?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:t("where")}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-800"}),e.jsx("input",{type:"text",placeholder:t("search destinations"),value:n,onChange:e=>o(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-100 rounded-xl font-medium text-gray-900 placeholder:text-gray-500 focus:outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"mt-4 max-h-[300px] overflow-y-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wider",children:t("common.suggestions")}),e.jsx("div",{className:"space-y-2",children:G.map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-xl cursor-pointer",onClick:()=>{o(t.name),F("when")},children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.desc})]})]},t.name))})]})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>F("where"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("where")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:n||t("common.anywhere")})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("when"===E?"ring-2 ring-black":""),children:"when"===E?e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 px-2",children:t("common.when")}),e.jsxs("div",{className:"flex justify-center mb-4 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>c("dates"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("dates"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:t("common.dates")}),e.jsx("button",{onClick:()=>c("flexible"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("flexible"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:t("common.flexible")})]}),"dates"===d?e.jsx("div",{className:"flex justify-center",children:e.jsx(Z,{mode:"range",selected:l,onSelect:i,numberOfMonths:1,className:"border-0 bg-transparent p-0 w-full flex justify-center",disabled:{before:new Date((new Date).setHours(0,0,0,0))},locale:a,classNames:{month:"space-y-4 w-full",table:"w-full border-collapse space-y-1",head_row:"flex w-full mt-2 mb-2",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem] flex-1",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 flex-1",day:"h-9 w-9 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100 w-full h-full flex items-center justify-center",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground rounded-full",day_today:"bg-accent text-accent-foreground rounded-full",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"}})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("common.howLong")}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:ke.map(s=>e.jsx("button",{onClick:()=>u(s),className:"px-4 py-2 rounded-full border text-sm font-medium transition-colors "+(m===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:t(`common.flexibleOptions.duration.${s}`)},s))})]})})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>F("when"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("common.when")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:"dates"===d&&(null==l?void 0:l.from)?`${H(l.from,"MMM dd",{locale:a})}${l.to?` - ${H(l.to,"MMM dd",{locale:a})}`:""}`:t("common.addDates")})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("who"===E?"ring-2 ring-black":""),children:"who"===E?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:t("common.who")}),e.jsx("div",{className:"space-y-6",children:[{type:"adults",label:t("common.adults"),sub:t("Age 13+")},{type:"children",label:t("common.children"),sub:t("Ages 2-12")},{type:"infants",label:t("common.infants"),sub:t("Under 2")},{type:"pets",label:t("common.pets"),sub:t("Traveling with a service animal?")}].map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:t.label}),e.jsx("div",{className:"text-sm text-gray-500",children:t.sub})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>B(t.type,"sub"),disabled:0===p[t.type],children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-4 text-center text-gray-900 font-medium",children:p[t.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black grid place-items-center",onClick:()=>B(t.type,"add"),children:e.jsx(v,{className:"h-4 w-4"})})]})]},t.type))})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>F("who"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:t("common.who")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:p.adults+p.children>0?t("common.guest_count",{count:p.adults+p.children}):t("common.addGuests")})]})})]}),e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 pb-6 flex items-center justify-between",children:[e.jsx("button",{className:"text-base font-semibold underline text-gray-900",onClick:()=>{o(""),i(void 0),g({adults:0,children:0,infants:0,pets:0})},children:t("common.clearAll")}),e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-lg flex items-center gap-2 transition-colors",onClick:q,children:[e.jsx(b,{className:"h-5 w-5"}),t("common.search")]})]})]}):e.jsxs("form",{onSubmit:e=>{e.preventDefault(),q()},className:"w-full max-w-4xl mx-auto relative z-40",children:[e.jsx("div",{className:"md:hidden w-full px-4",children:e.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-full shadow-md border border-gray-200 p-3",onClick:()=>A(!0),children:[e.jsx(b,{className:"h-5 w-5 text-gray-900 ml-2"}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t("search.start_research")})}),e.jsx("div",{className:"p-2 bg-white rounded-full border border-gray-200",children:e.jsx("div",{className:"h-4 w-4 border-t-2 border-r-2 border-gray-900 rotate-45 transform translate-y-[1px] translate-x-[-1px]"})})]})}),e.jsxs("div",{className:"hidden md:flex items-center bg-white rounded-full shadow-soft hover:shadow-elevated border border-gray-200 transition-all duration-300 relative",children:[e.jsxs(we,{open:j,onOpenChange:N,children:[e.jsx(je,{asChild:!0,children:e.jsxs("div",{className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 rounded-full transition-colors "+(j?"bg-gray-100 shadow-sm":""),children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("where")}),e.jsx("input",{type:"text",placeholder:t("search destinations"),value:n,onChange:e=>o(e.target.value),className:"w-full bg-transparent border-0 p-0 text-sm text-gray-900 placeholder:text-gray-500 focus:outline-none truncate font-medium"})]})}),e.jsx(Ne,{className:"w-[350px] p-0 rounded-3xl overflow-hidden shadow-xl border-0 mt-4",align:"start",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-4 px-2 uppercase tracking-wider",children:t("common.suggestions")}),e.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:G.map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer transition-colors",onClick:()=>{o(t.name),N(!1),M(!0)},children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.desc})]})]},t.name))})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs(we,{open:_,onOpenChange:M,children:[e.jsx(je,{asChild:!0,children:e.jsxs("div",{className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors "+(_?"bg-gray-100 rounded-full shadow-sm":""),children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("when")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:"dates"===d&&(null==l?void 0:l.from)?e.jsxs(e.Fragment,{children:[H(l.from,"MMM dd",{locale:a}),l.to?` - ${H(l.to,"MMM dd",{locale:a})}`:""]}):"flexible"===d?t("common.flexibleOptions.summary",{duration:t(`common.flexibleOptions.duration.${m}`),months:x.length>0?t("common.flexibleOptions.months",{count:x.length}):t("common.flexibleOptions.anytime")}):e.jsx("span",{className:"text-gray-400 font-normal",children:t("add dates")})})]})}),e.jsx(Ne,{className:"w-[88vw] max-w-[330px] sm:w-[660px] sm:max-w-[660px] p-0 rounded-3xl shadow-xl border-0 mt-4 overflow-hidden",align:"center",children:e.jsxs("div",{className:"p-3 sm:p-6 max-w-[330px] mx-auto sm:max-w-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"text-sm font-semibold text-gray-900",children:t("Stays")})}),e.jsx("button",{type:"button","aria-label":t("common.close"),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",onClick:()=>M(!1),children:e.jsx(f,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium "+("destination"===O?"bg-black text-white":"bg-gray-100 text-gray-700"),onClick:()=>P("destination"),type:"button",children:t("common.destination")}),e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium "+("nearby"===O?"bg-black text-white":"bg-gray-100 text-gray-700"),onClick:()=>P("nearby"),type:"button",children:t("common.nearby")})]}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:t("common.when")}),e.jsxs("div",{className:"flex justify-center mb-6 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>c("dates"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("dates"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:t("common.dates")}),e.jsx("button",{onClick:()=>c("flexible"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("flexible"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:t("common.flexible")})]}),"dates"===T&&"dates"===d&&e.jsx("div",{children:e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 bg-white shadow-lg "+(I?"max-w-[300px] mx-auto":""),children:[e.jsx(Z,{mode:"range",selected:l,onSelect:i,numberOfMonths:I?1:2,className:"border-0 "+(I?"scale-[0.86] origin-top-left transform-gpu":""),disabled:{before:new Date((new Date).setHours(0,0,0,0))},locale:a,formatters:{formatWeekdayName:e=>H(e,"EEEEE",{locale:a}).toUpperCase()},classNames:{caption_label:"text-base font-semibold capitalize",...I?{head_cell:"text-muted-foreground rounded-md w-7 font-normal text-[0.7rem]",day:"h-7 w-7 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100",cell:"h-7 w-7 text-center text-[0.8rem] p-0 relative"}:{}}}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:[0,1,2,3].map(s=>e.jsx("button",{type:"button",onClick:()=>L(s),className:"px-2.5 py-1 rounded-full border text-xs "+(R===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:0===s?t("common.exactDates"):`Â± ${s} jour${s>1?"s":""}`},s))})]})}),"guests"===T&&e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white overflow-hidden shadow-lg max-w-[330px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 cursor-pointer",onClick:()=>$("dates"),children:[e.jsx("span",{className:"text-sm text-gray-700",children:t("common.when").replace("?","")}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:(null==l?void 0:l.from)?`${H(l.from,"d MMM",{locale:a})}${(null==l?void 0:l.to)?` - ${H(l.to,"d MMM",{locale:a})}`:""}`:t("add dates")})]}),e.jsx("h3",{className:"text-lg font-semibold px-5 py-4",children:t("common.who")}),e.jsx("div",{className:"divide-y divide-gray-200",children:[{type:"adults",label:t("common.adults"),sub:t("Age 13+")},{type:"children",label:t("common.children"),sub:t("Ages 2-12")},{type:"infants",label:t("common.infants"),sub:t("Under 2")},{type:"pets",label:t("common.pets"),sub:t("Traveling with a service animal?")}].map(t=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-5",children:[e.jsxs("div",{className:"pr-6",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.label}),e.jsx("div",{className:"text-sm text-gray-500",children:"pets"===t.type?e.jsx("button",{type:"button",className:"underline underline-offset-2 hover:text-gray-700",children:t.sub}):t.sub})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>B(t.type,"sub"),disabled:0===p[t.type],"aria-label":`Decrease ${t.label}`,children:e.jsx(y,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-gray-900 font-medium",children:p[t.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black grid place-items-center",onClick:()=>B(t.type,"add"),"aria-label":`Increase ${t.label}`,children:e.jsx(v,{className:"h-3 w-3"})})]})]},t.type))})]}),"months"===d&&e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"grid grid-cols-6 gap-4 px-2",children:t("common.months",{returnObjects:!0}).map(t=>e.jsxs("div",{onClick:()=>{h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"flex flex-col items-center p-4 border rounded-xl cursor-pointer transition-all "+(x.includes(t)?"border-black bg-gray-50":"border-gray-200 hover:border-black bg-white hover:bg-gray-50"),children:[e.jsx(w,{className:"h-8 w-8 mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx("span",{className:"text-xs text-gray-500",children:"2026"})]},t))})}),"flexible"===d&&e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t("common.howLong")}),e.jsx("div",{className:"flex justify-center gap-3",children:ke.map(s=>e.jsx("button",{onClick:()=>u(s),className:"px-6 py-2 rounded-full border text-sm font-medium transition-colors "+(m===s?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:t(`common.flexibleOptions.duration.${s}`)},s))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>{i(void 0),h([]),u("weekend"),$("dates"),g({adults:0,children:0,infants:0,pets:0})},children:t("common.clearAll")}),"dates"===T?e.jsx(D,{type:"button",onClick:()=>$("guests"),children:t("common.next")}):e.jsx(D,{type:"button",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{M(!1),q()},children:t("common.search")})]})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{$("guests"),M(!0)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),$("guests"),M(!0))},className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors rounded-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:t("who")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:p.adults+p.children>0?t("common.guest_count",{count:p.adults+p.children}):e.jsx("span",{className:"text-gray-400 font-normal",children:t("add guests")})})]}),e.jsx("div",{className:"pr-2",children:e.jsx(D,{type:"submit",size:"icon",className:"h-12 w-12 rounded-full bg-primary hover:bg-primary-dark transition-all duration-300 shadow-md hover:scale-105",children:e.jsx(b,{className:"h-5 w-5 text-white stroke-[3px]"})})})]})]})},_e=()=>e.jsx("div",{className:"block flex-shrink-0 w-full sm:w-[280px]",children:e.jsxs("div",{className:"flex flex-col h-full animate-pulse",children:[e.jsx("div",{className:"relative aspect-[20/19] sm:aspect-square rounded-xl overflow-hidden bg-gray-200 mb-3",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-12 flex-shrink-0"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})]})}),Me=({count:t=4})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-3",children:Array.from({length:t}).map((t,s)=>e.jsx(_e,{},s))})]}),Oe=()=>{const[t,s]=k.useState(navigator.onLine),[a,r]=k.useState(!1),{t:n}=W();return k.useEffect(()=>{const e=()=>{s(!0),r(!0),setTimeout(()=>r(!1),3e3)},t=()=>{s(!1),r(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]),a?e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-green-500 text-white text-center py-2 px-4 z-50 shadow-lg animate-slide-down",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("Back online")})]})}):t?null:e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-white text-center py-2 px-4 z-50 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("You're offline. Showing cached data.")})]})})},Pe=_.memo(({title:t,properties:s,city:a,inferCity:r})=>{const{t:n}=W(),o=C(),l=k.useRef(null),[i,d]=k.useState(!1),[c,m]=k.useState(!0),u=e=>{if(l.current){const t=.8*l.current.clientWidth;l.current.scrollBy({left:"left"===e?-t:t,behavior:"smooth"})}};if(!s||0===s.length)return null;const x=!!a&&"other"===(a||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");return e.jsxs("div",{className:"mb-4 group relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a&&!x?n("StaysIn",{city:a}):t}),a&&e.jsxs("button",{className:"text-sm font-semibold hover:underline flex items-center gap-1",onClick:()=>o(`/marketplace?search=${encodeURIComponent(x?"other":a)}`),"aria-label":x?n("otherLocations"):`See all stays in ${a}`,children:[n("seeAll")," ",e.jsx("span",{"aria-hidden":!0,children:"â€º"})]})]}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("button",{onClick:()=>u("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Previous",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"M20 28 8.7 16.7a1 1 0 0 1 0-1.4L20 4"})})}),e.jsx("div",{ref:l,onScroll:()=>{if(l.current){const{scrollLeft:e,scrollWidth:t,clientWidth:s}=l.current;d(e>0),m(e<t-s-10)}},className:"flex gap-4 md:gap-6 overflow-x-auto pb-3 snap-x snap-mandatory scroll-smooth [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:s.filter(Boolean).map((t,s)=>{var a;const n=r(t);return e.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[240px] md:w-[280px]",children:e.jsx(q,{id:t.listing.id,name:t.listing.title,location:t.listing.city||n||"Unknown",price:t.listing.price_per_night||0,images:(null==(a=t.photos)?void 0:a.map(e=>({image_url:e.url})))||[],isGuestFavorite:!1,priority:s<4,propertyType:t.listing.property_type})},t.listing.id)})}),c&&e.jsx("button",{onClick:()=>u("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Next",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"m12 4 11.3 11.3a1 1 0 0 1 0 1.4L12 28"})})})]})]})}),Se=()=>{var t;const{t:s}=W();C();const{user:a,logout:r}=R(),n=L(),{data:o,isLoading:l,error:i,fetchNextPage:d,hasNextPage:c,isFetchingNextPage:m}=$({queryKey:["products",20],initialPageParam:0,queryFn:({pageParam:e})=>T({limit:20,offset:e||0},"high"),getNextPageParam:(e,t)=>20===e.length&&t.length<5?20*t.length:void 0,staleTime:3e4}),u=k.useMemo(()=>{if(!(null==o?void 0:o.pages))return[];try{return o.pages.flat().filter(Boolean)||[]}catch(e){return[]}},[null==o?void 0:o.pages]);k.useEffect(()=>{if(!c||m)return;return(()=>{const e=setTimeout(()=>{"requestIdleCallback"in window?window.requestIdleCallback(()=>{d()},{timeout:1e4}):d()},5e3);return()=>clearTimeout(e)})()},[c,m,d,null==(t=null==o?void 0:o.pages)?void 0:t.length]),k.useEffect(()=>{const e=setTimeout(()=>{n.prefetchQuery({queryKey:["towns"],queryFn:I,staleTime:36e5}),u.length>0&&u.slice(0,8).forEach((e,t)=>{setTimeout(()=>{n.prefetchQuery({queryKey:["listing",e.listing.id],queryFn:()=>z(e.listing.id,"low"),staleTime:6e4})},1500*t)})},8e3);return()=>clearTimeout(e)},[n,u.length]);const x=e=>(e||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""),h=k.useMemo(()=>["yaounde","douala","kribi"],[]),p=k.useMemo(()=>({yaounde:{display:"Yaounde",lat:3.848,lon:11.5021,synonyms:["bastos","biyem","nkolbisson","melen","odza","nkolmesseng","nkoabang","ekounou","essos","madagascar"]},douala:{display:"Douala",lat:4.0511,lon:9.7679,synonyms:["akwa","bonapriso","bonanjo","deido","makepe","ndogbong","logbaba","bepanda","bonamoussadi"]},kribi:{display:"Kribi",lat:2.94,lon:9.91,synonyms:["mpalla","londji","ebambe","lolabe"]},buea:{display:"Buea",lat:4.1527,lon:9.241,synonyms:["molyko","muea","mile 17","bongo square","great soppo","small soppo","bokwango"]}}),[]),g=k.useCallback(e=>{if(!(null==e?void 0:e.listing))return"";const t=[e.listing.city,e.listing.address,e.listing.title].filter(Boolean).join(" "),s=x(t);if(s){for(const e of h){if(s.includes(e))return p[e].display;if(p[e].synonyms.some(e=>s.includes(e)))return p[e].display}for(const e of Object.keys(p)){if(h.includes(e))continue;if(s.includes(e))return p[e].display;if(p[e].synonyms.some(e=>s.includes(e)))return p[e].display}}if(e.listing.latitude&&e.listing.longitude){const{latitude:t,longitude:s}=e.listing;let a=null;if(Object.keys(p).forEach(e=>{const r=p[e],n=((e,t,s,a)=>{const r=e=>e*Math.PI/180,n=r(s-e),o=r(a-t),l=Math.sin(n/2)**2+Math.cos(r(e))*Math.cos(r(s))*Math.sin(o/2)**2;return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371})(t,s,r.lat,r.lon);(!a||n<a.dist)&&(a={key:e,dist:n})}),a&&a.dist<=80)return p[a.key].display}return""},[h,p]),{grouped:f,other:b,buea:y}=k.useMemo(()=>{var e;const t=new Map,s=[];if(Array.isArray(u)&&u.length>0){u.filter(e=>{var t,s;return null==(s=null==(t=null==e?void 0:e.listing)?void 0:t.city)?void 0:s.toLowerCase().includes("buea")})}(Array.isArray(u)?u:[]).forEach(e=>{if(!(null==e?void 0:e.listing))return;let a=(e.listing.city||"").trim();a||(a=g(e));const r=x(a);if(!r)return void s.push(e);const n=t.get(r)||{name:a,items:[]};!n.name&&a&&(n.name=a),n.items.push(e),t.set(r,n)});const a=Array.from(t.values()).sort((e,t)=>{const s=h.indexOf(x(e.name)),a=h.indexOf(x(t.name));return-1!==s&&-1!==a?s-a:-1!==s?-1:-1!==a?1:t.items.length-e.items.length}),r=Array.isArray(a)?(null==(e=a.find(e=>"buea"===x(e.name)))?void 0:e.items)??[]:[],n=Array.isArray(a)?a.filter(e=>e&&!h.includes(x(e.name))&&"buea"!==x(e.name)).flatMap(e=>(null==e?void 0:e.items)||[]):[];return{grouped:Array.isArray(a)?a:[],other:[...n,...s],buea:r}},[u,h,g]);return e.jsxs("div",{className:"min-h-screen bg-white pb-20 md:pb-0",children:[e.jsx(G,{title:s("Explore"),description:s("dashboard.seo.description")}),e.jsx(Oe,{}),e.jsx(Q,{}),e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6",children:e.jsx(Ce,{})})}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 pt-8 pb-2",children:i?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-red-500",children:s("Failed to load properties.")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s("Check your connection and try again")})]}):e.jsx(e.Fragment,{children:l&&0===u.length?e.jsxs(e.Fragment,{children:[e.jsx(Me,{count:4}),e.jsx(Me,{count:4}),e.jsx(Me,{count:4})]}):e.jsxs(e.Fragment,{children:[f.filter(e=>h.includes(x(e.name))).sort((e,t)=>h.indexOf(x(e.name))-h.indexOf(x(t.name))).map(t=>e.jsx(Pe,{title:s("StaysIn",{city:t.name}),properties:t.items,city:t.name,inferCity:g},t.name||Math.random())),y.length>0&&e.jsx(Pe,{title:s("StaysIn",{city:"Buea"}),properties:y,city:"Buea",inferCity:g},"buea-section"),b.length>0&&e.jsx(Pe,{title:s("otherLocations"),properties:b,city:"other",inferCity:g},"other-locations")]})})}),e.jsx(Y,{}),e.jsx(J,{})]})};export{Se as default};
