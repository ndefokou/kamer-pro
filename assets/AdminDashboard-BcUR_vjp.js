import{a1 as e,b as r,j as t,c as s,s as n,P as o,e as a,d as l,u as i,f as c,h as d,Y as u,L as h,r as f,a0 as m,a7 as p}from"./vendor-ui-DcvuiMJW.js";import{r as x,e as v}from"./vendor-react-CPc5zwff.js";import{u as b}from"./useQuery-LvoaILWK.js";import{c as g,e as w,H as j,I as y,J as N,B as S,D as C,p as T,q as R,r as E,s as _,K as D,n as L}from"./index-Dd0d9_cy.js";import{u as P}from"./useMutation-BnO1s6ox.js";import{c as A,R as z,I}from"./index-B9HPLTtY.js";import{S as H,H as M}from"./Header-C1YZcuTT.js";import{c as k}from"./index-jVOyRz7F.js";import{O as F}from"./OptimizedImage-Dw--M-ma.js";import{f as W}from"./vendor-utils-tyqSID0v.js";import"./useBaseQuery-DtuBwOHy.js";import"./vendor-charts-CNjKuHaK.js";import"./LanguageSwitcher-DhNIQqEN.js";import"./useTranslation-BTMhbqKL.js";var Y="Tabs",[O]=s(Y,[A]),V=A(),[X,U]=O(Y),q=x.forwardRef((s,a)=>{const{__scopeTabs:l,value:i,onValueChange:c,defaultValue:d,orientation:u="horizontal",dir:h,activationMode:f="automatic",...m}=s,p=e(h),[x,v]=r({prop:i,onChange:c,defaultProp:d??"",caller:Y});return t.jsx(X,{scope:l,baseId:n(),value:x,onValueChange:v,orientation:u,dir:p,activationMode:f,children:t.jsx(o.div,{dir:p,"data-orientation":u,...m,ref:a})})});q.displayName=Y;var B="TabsList",K=x.forwardRef((e,r)=>{const{__scopeTabs:s,loop:n=!0,...a}=e,l=U(B,s),i=V(s);return t.jsx(z,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:n,children:t.jsx(o.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:r})})});K.displayName=B;var $="TabsTrigger",Q=x.forwardRef((e,r)=>{const{__scopeTabs:s,value:n,disabled:l=!1,...i}=e,c=U($,s),d=V(s),u=Z(c.baseId,n),h=ee(c.baseId,n),f=n===c.value;return t.jsx(I,{asChild:!0,...d,focusable:!l,active:f,children:t.jsx(o.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...i,ref:r,onMouseDown:a(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:a(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:a(e.onFocus,()=>{const e="manual"!==c.activationMode;f||l||!e||c.onValueChange(n)})})})});Q.displayName=$;var J="TabsContent",G=x.forwardRef((e,r)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...c}=e,d=U(J,s),u=Z(d.baseId,n),h=ee(d.baseId,n),f=n===d.value,m=x.useRef(f);return x.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),t.jsx(l,{present:a||f,children:({present:s})=>t.jsx(o.div,{"data-state":f?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:h,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:m.current?"0s":void 0},children:s&&i})})});function Z(e,r){return`${e}-trigger-${r}`}function ee(e,r){return`${e}-content-${r}`}G.displayName=J;var re=K,te=Q,se=G;const ne=q,oe=x.forwardRef(({className:e,...r},s)=>t.jsx(re,{ref:s,className:g("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));oe.displayName=re.displayName;const ae=x.forwardRef(({className:e,...r},s)=>t.jsx(te,{ref:s,className:g("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...r}));ae.displayName=te.displayName;const le=x.forwardRef(({className:e,...r},s)=>t.jsx(se,{ref:s,className:g("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));le.displayName=se.displayName;const ie=x.forwardRef(({className:e,...r},s)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:s,className:g("w-full caption-bottom text-sm",e),...r})}));ie.displayName="Table";const ce=x.forwardRef(({className:e,...r},s)=>t.jsx("thead",{ref:s,className:g("[&_tr]:border-b",e),...r}));ce.displayName="TableHeader";const de=x.forwardRef(({className:e,...r},s)=>t.jsx("tbody",{ref:s,className:g("[&_tr:last-child]:border-0",e),...r}));de.displayName="TableBody";x.forwardRef(({className:e,...r},s)=>t.jsx("tfoot",{ref:s,className:g("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";const ue=x.forwardRef(({className:e,...r},s)=>t.jsx("tr",{ref:s,className:g("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...r}));ue.displayName="TableRow";const he=x.forwardRef(({className:e,...r},s)=>t.jsx("th",{ref:s,className:g("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));he.displayName="TableHead";const fe=x.forwardRef(({className:e,...r},s)=>t.jsx("td",{ref:s,className:g("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));fe.displayName="TableCell";x.forwardRef(({className:e,...r},s)=>t.jsx("caption",{ref:s,className:g("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption";var me="ScrollArea",[pe]=s(me),[xe,ve]=pe(me),be=x.forwardRef((r,s)=>{const{__scopeScrollArea:n,type:a="hover",dir:l,scrollHideDelay:c=600,...d}=r,[u,h]=x.useState(null),[f,m]=x.useState(null),[p,v]=x.useState(null),[b,g]=x.useState(null),[w,j]=x.useState(null),[y,N]=x.useState(0),[S,C]=x.useState(0),[T,R]=x.useState(!1),[E,_]=x.useState(!1),D=i(s,e=>h(e)),L=e(l);return t.jsx(xe,{scope:n,type:a,dir:L,scrollHideDelay:c,scrollArea:u,viewport:f,onViewportChange:m,content:p,onContentChange:v,scrollbarX:b,onScrollbarXChange:g,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:E,onScrollbarYEnabledChange:_,onCornerWidthChange:N,onCornerHeightChange:C,children:t.jsx(o.div,{dir:L,...d,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":S+"px",...r.style}})})});be.displayName=me;var ge="ScrollAreaViewport",we=x.forwardRef((e,r)=>{const{__scopeScrollArea:s,children:n,nonce:a,...l}=e,c=ve(ge,s),d=x.useRef(null),u=i(r,d,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(o.div,{"data-radix-scroll-area-viewport":"",...l,ref:u,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});we.displayName=ge;var je="ScrollAreaScrollbar",ye=x.forwardRef((e,r)=>{const{forceMount:s,...n}=e,o=ve(je,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=o,i="horizontal"===e.orientation;return x.useEffect(()=>(i?a(!0):l(!0),()=>{i?a(!1):l(!1)}),[i,a,l]),"hover"===o.type?t.jsx(Ne,{...n,ref:r,forceMount:s}):"scroll"===o.type?t.jsx(Se,{...n,ref:r,forceMount:s}):"auto"===o.type?t.jsx(Ce,{...n,ref:r,forceMount:s}):"always"===o.type?t.jsx(Te,{...n,ref:r}):null});ye.displayName=je;var Ne=x.forwardRef((e,r)=>{const{forceMount:s,...n}=e,o=ve(je,e.__scopeScrollArea),[a,i]=x.useState(!1);return x.useEffect(()=>{const e=o.scrollArea;let r=0;if(e){const t=()=>{window.clearTimeout(r),i(!0)},s=()=>{r=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",t),e.addEventListener("pointerleave",s),()=>{window.clearTimeout(r),e.removeEventListener("pointerenter",t),e.removeEventListener("pointerleave",s)}}},[o.scrollArea,o.scrollHideDelay]),t.jsx(l,{present:s||a,children:t.jsx(Ce,{"data-state":a?"visible":"hidden",...n,ref:r})})}),Se=x.forwardRef((e,r)=>{const{forceMount:s,...n}=e,o=ve(je,e.__scopeScrollArea),i="horizontal"===e.orientation,c=Ue(()=>u("SCROLL_END"),100),[d,u]=(h="hidden",f={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},x.useReducer((e,r)=>f[e][r]??e,h));var h,f;return x.useEffect(()=>{if("idle"===d){const e=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[d,o.scrollHideDelay,u]),x.useEffect(()=>{const e=o.viewport,r=i?"scrollLeft":"scrollTop";if(e){let t=e[r];const s=()=>{const s=e[r];t!==s&&(u("SCROLL"),c()),t=s};return e.addEventListener("scroll",s),()=>e.removeEventListener("scroll",s)}},[o.viewport,i,u,c]),t.jsx(l,{present:s||"hidden"!==d,children:t.jsx(Te,{"data-state":"hidden"===d?"hidden":"visible",...n,ref:r,onPointerEnter:a(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:a(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Ce=x.forwardRef((e,r)=>{const s=ve(je,e.__scopeScrollArea),{forceMount:n,...o}=e,[a,i]=x.useState(!1),c="horizontal"===e.orientation,d=Ue(()=>{if(s.viewport){const e=s.viewport.offsetWidth<s.viewport.scrollWidth,r=s.viewport.offsetHeight<s.viewport.scrollHeight;i(c?e:r)}},10);return qe(s.viewport,d),qe(s.content,d),t.jsx(l,{present:n||a,children:t.jsx(Te,{"data-state":a?"visible":"hidden",...o,ref:r})})}),Te=x.forwardRef((e,r)=>{const{orientation:s="vertical",...n}=e,o=ve(je,e.__scopeScrollArea),a=x.useRef(null),l=x.useRef(0),[i,c]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Fe(i.viewport,i.content),u={...n,sizes:i,onSizesChange:c,hasThumb:Boolean(d>0&&d<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:e=>l.current=e};function h(e,r){return function(e,r,t,s="ltr"){const n=We(t),o=n/2,a=r||o,l=n-a,i=t.scrollbar.paddingStart+a,c=t.scrollbar.size-t.scrollbar.paddingEnd-l,d=t.content-t.viewport,u="ltr"===s?[0,d]:[-1*d,0];return Oe([i,c],u)(e)}(e,l.current,i,r)}return"horizontal"===s?t.jsx(Re,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&a.current){const e=Ye(o.viewport.scrollLeft,i,o.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollLeft=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollLeft=h(e,o.dir))}}):"vertical"===s?t.jsx(Ee,{...u,ref:r,onThumbPositionChange:()=>{if(o.viewport&&a.current){const e=Ye(o.viewport.scrollTop,i);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{o.viewport&&(o.viewport.scrollTop=e)},onDragScroll:e=>{o.viewport&&(o.viewport.scrollTop=h(e))}}):null}),Re=x.forwardRef((e,r)=>{const{sizes:s,onSizesChange:n,...o}=e,a=ve(je,e.__scopeScrollArea),[l,c]=x.useState(),d=x.useRef(null),u=i(r,d,a.onScrollbarXChange);return x.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(Le,{"data-orientation":"horizontal",...o,ref:u,sizes:s,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":We(s)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.x),onDragScroll:r=>e.onDragScroll(r.x),onWheelScroll:(r,t)=>{if(a.viewport){const s=a.viewport.scrollLeft+r.deltaX;e.onWheelScroll(s),Ve(s,t)&&r.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:ke(l.paddingLeft),paddingEnd:ke(l.paddingRight)}})}})}),Ee=x.forwardRef((e,r)=>{const{sizes:s,onSizesChange:n,...o}=e,a=ve(je,e.__scopeScrollArea),[l,c]=x.useState(),d=x.useRef(null),u=i(r,d,a.onScrollbarYChange);return x.useEffect(()=>{d.current&&c(getComputedStyle(d.current))},[d]),t.jsx(Le,{"data-orientation":"vertical",...o,ref:u,sizes:s,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":We(s)+"px",...e.style},onThumbPointerDown:r=>e.onThumbPointerDown(r.y),onDragScroll:r=>e.onDragScroll(r.y),onWheelScroll:(r,t)=>{if(a.viewport){const s=a.viewport.scrollTop+r.deltaY;e.onWheelScroll(s),Ve(s,t)&&r.preventDefault()}},onResize:()=>{d.current&&a.viewport&&l&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:ke(l.paddingTop),paddingEnd:ke(l.paddingBottom)}})}})}),[_e,De]=pe(je),Le=x.forwardRef((e,r)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:l,onThumbChange:d,onThumbPointerUp:u,onThumbPointerDown:h,onThumbPositionChange:f,onDragScroll:m,onWheelScroll:p,onResize:v,...b}=e,g=ve(je,s),[w,j]=x.useState(null),y=i(r,e=>j(e)),N=x.useRef(null),S=x.useRef(""),C=g.viewport,T=n.content-n.viewport,R=c(p),E=c(f),_=Ue(v,10);function D(e){if(N.current){const r=e.clientX-N.current.left,t=e.clientY-N.current.top;m({x:r,y:t})}}return x.useEffect(()=>{const e=e=>{const r=e.target;(null==w?void 0:w.contains(r))&&R(e,T)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[C,w,T,R]),x.useEffect(E,[n,E]),qe(w,_),qe(g.content,_),t.jsx(_e,{scope:s,scrollbar:w,hasThumb:l,onThumbChange:c(d),onThumbPointerUp:c(u),onThumbPositionChange:E,onThumbPointerDown:c(h),children:t.jsx(o.div,{...b,ref:y,style:{position:"absolute",...b.style},onPointerDown:a(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),N.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(e)}}),onPointerMove:a(e.onPointerMove,D),onPointerUp:a(e.onPointerUp,e=>{const r=e.target;r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),N.current=null})})})}),Pe="ScrollAreaThumb",Ae=x.forwardRef((e,r)=>{const{forceMount:s,...n}=e,o=De(Pe,e.__scopeScrollArea);return t.jsx(l,{present:s||o.hasThumb,children:t.jsx(ze,{ref:r,...n})})}),ze=x.forwardRef((e,r)=>{const{__scopeScrollArea:s,style:n,...l}=e,c=ve(Pe,s),d=De(Pe,s),{onThumbPositionChange:u}=d,h=i(r,e=>d.onThumbChange(e)),f=x.useRef(void 0),m=Ue(()=>{f.current&&(f.current(),f.current=void 0)},100);return x.useEffect(()=>{const e=c.viewport;if(e){const r=()=>{if(m(),!f.current){const r=Xe(e,u);f.current=r,u()}};return u(),e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[c.viewport,m,u]),t.jsx(o.div,{"data-state":d.hasThumb?"visible":"hidden",...l,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:a(e.onPointerDownCapture,e=>{const r=e.target.getBoundingClientRect(),t=e.clientX-r.left,s=e.clientY-r.top;d.onThumbPointerDown({x:t,y:s})}),onPointerUp:a(e.onPointerUp,d.onThumbPointerUp)})});Ae.displayName=Pe;var Ie="ScrollAreaCorner",He=x.forwardRef((e,r)=>{const s=ve(Ie,e.__scopeScrollArea),n=Boolean(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&n?t.jsx(Me,{...e,ref:r}):null});He.displayName=Ie;var Me=x.forwardRef((e,r)=>{const{__scopeScrollArea:s,...n}=e,a=ve(Ie,s),[l,i]=x.useState(0),[c,d]=x.useState(0),u=Boolean(l&&c);return qe(a.scrollbarX,()=>{var e;const r=(null==(e=a.scrollbarX)?void 0:e.offsetHeight)||0;a.onCornerHeightChange(r),d(r)}),qe(a.scrollbarY,()=>{var e;const r=(null==(e=a.scrollbarY)?void 0:e.offsetWidth)||0;a.onCornerWidthChange(r),i(r)}),u?t.jsx(o.div,{...n,ref:r,style:{width:l,height:c,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function ke(e){return e?parseInt(e,10):0}function Fe(e,r){const t=e/r;return isNaN(t)?0:t}function We(e){const r=Fe(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-t)*r;return Math.max(s,18)}function Ye(e,r,t="ltr"){const s=We(r),n=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,o=r.scrollbar.size-n,a=r.content-r.viewport,l=o-s,i=k(e,"ltr"===t?[0,a]:[-1*a,0]);return Oe([0,a],[0,l])(i)}function Oe(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(e[1]-e[0]);return r[0]+s*(t-e[0])}}function Ve(e,r){return e>0&&e<r}var Xe=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},s=0;return function n(){const o={left:e.scrollLeft,top:e.scrollTop},a=t.left!==o.left,l=t.top!==o.top;(a||l)&&r(),t=o,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function Ue(e,r){const t=c(e),s=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),x.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,r)},[t,r])}function qe(e,r){const t=c(r);d(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,t])}var Be=be,Ke=we,$e=He;const Qe=x.forwardRef(({className:e,children:r,...s},n)=>t.jsxs(Be,{ref:n,className:g("relative overflow-hidden",e),...s,children:[t.jsx(Ke,{className:"h-full w-full rounded-[inherit]",children:r}),t.jsx(Je,{}),t.jsx($e,{})]}));Qe.displayName=Be.displayName;const Je=x.forwardRef(({className:e,orientation:r="vertical",...s},n)=>t.jsx(ye,{ref:n,orientation:r,className:g("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:t.jsx(Ae,{className:"relative flex-1 rounded-full bg-border"})}));Je.displayName=ye.displayName;const Ge=()=>{const e=v(),r=w(),[s,n]=x.useState("hosts"),[o,a]=x.useState(""),[l,i]=x.useState(!1),[c,d]=x.useState(null),[g,D]=x.useState(!1),{data:L,isLoading:A}=b({queryKey:["admin","hosts"],queryFn:j}),{data:z,isLoading:I}=b({queryKey:["admin","reports"],queryFn:y}),k=P({mutationFn:N,onSuccess:()=>{u.success("Host deleted successfully"),r.invalidateQueries({queryKey:["admin","hosts"]})},onError:e=>{u.error("Failed to delete host")}}),F=e=>{confirm("Are you sure you want to delete this host? This action cannot be undone and will delete all their listings and bookings.")&&k.mutate(e)},Y=e=>{e.preventDefault(),"mapiol"===o?i(!0):u.error("Incorrect password")};return l?A||I?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(h,{className:"h-8 w-8 animate-spin"})}):t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(H,{title:"Admin Dashboard"}),t.jsx(M,{}),t.jsxs("div",{className:"container mx-auto py-10 px-4 pt-10 md:pt-20",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"rounded-full shrink-0","aria-label":"Go back",children:t.jsx(f,{className:"h-6 w-6"})}),t.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"})]}),t.jsxs(ne,{value:s,onValueChange:n,children:[t.jsxs(oe,{className:"mb-8",children:[t.jsx(ae,{value:"hosts",children:"Hosts Management"}),t.jsx(ae,{value:"reports",children:"Reports"})]}),t.jsx(le,{value:"hosts",children:t.jsx("div",{className:"bg-white rounded-lg shadow border",children:t.jsxs(ie,{children:[t.jsx(ce,{children:t.jsxs(ue,{children:[t.jsx(he,{children:"ID"}),t.jsx(he,{children:"Username"}),t.jsx(he,{children:"Email"}),t.jsx(he,{children:"Joined"}),t.jsx(he,{children:"Listings"}),t.jsx(he,{children:"Actions"})]})}),t.jsxs(de,{children:[null==L?void 0:L.map(e=>t.jsxs(ue,{children:[t.jsx(fe,{children:e.id}),t.jsx(fe,{className:"font-medium",children:e.username}),t.jsx(fe,{children:e.email}),t.jsx(fe,{children:W(new Date(e.created_at),"MMM d, yyyy")}),t.jsx(fe,{children:e.listing_count}),t.jsx(fe,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",onClick:()=>{d(e.id),D(!0)},children:[t.jsx(m,{className:"h-4 w-4 mr-2"}),"View Listings"]}),t.jsxs(S,{variant:"destructive",size:"sm",onClick:()=>F(e.id),disabled:k.isPending,children:[t.jsx(p,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]},e.id)),0===(null==L?void 0:L.length)&&t.jsx(ue,{children:t.jsx(fe,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No hosts found"})})]})]})})}),t.jsx(le,{value:"reports",children:t.jsx("div",{className:"bg-white rounded-lg shadow border",children:t.jsxs(ie,{children:[t.jsx(ce,{children:t.jsxs(ue,{children:[t.jsx(he,{children:"ID"}),t.jsx(he,{children:"Date"}),t.jsx(he,{children:"Reporter ID"}),t.jsx(he,{children:"Host ID"}),t.jsx(he,{children:"Listing ID"}),t.jsx(he,{children:"Reason"}),t.jsx(he,{children:"Status"}),t.jsx(he,{children:"Actions"})]})}),t.jsxs(de,{children:[null==z?void 0:z.map(e=>t.jsxs(ue,{children:[t.jsx(fe,{children:e.id}),t.jsx(fe,{children:W(new Date(e.created_at),"MMM d, yyyy")}),t.jsx(fe,{children:e.reporter_id}),t.jsx(fe,{children:e.host_id}),t.jsx(fe,{children:e.listing_id||"N/A"}),t.jsx(fe,{className:"max-w-md truncate",title:e.reason,children:e.reason}),t.jsx(fe,{children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("pending"===e.status?"bg-yellow-100 text-yellow-800":"resolved"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})}),t.jsx(fe,{children:t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(S,{variant:"outline",size:"sm",onClick:()=>{d(e.host_id),D(!0)},children:[t.jsx(m,{className:"h-4 w-4 mr-2"}),"View Host"]}),t.jsxs(S,{variant:"destructive",size:"sm",onClick:()=>F(e.host_id),disabled:k.isPending,children:[t.jsx(p,{className:"h-4 w-4 mr-2"}),"Delete Host"]})]})})]},e.id)),0===(null==z?void 0:z.length)&&t.jsx(ue,{children:t.jsx(fe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No reports found"})})]})]})})})]})]}),t.jsx(C,{open:g,onOpenChange:D,children:t.jsxs(T,{className:"max-w-4xl max-h-[80vh]",children:[t.jsxs(R,{children:[t.jsxs(E,{children:["Host Listings (ID: ",c,")"]}),t.jsx(_,{children:"Review all properties listed by this host."})]}),t.jsx(Qe,{className:"h-full max-h-[60vh] mt-4",children:t.jsx(Ze,{hostId:c})})]})})]}):t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:t.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Access"}),t.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),t.jsx("input",{type:"password",value:o,onChange:e=>a(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-black",placeholder:"Enter admin password"})]}),t.jsx(S,{type:"submit",className:"w-full",children:"Access Dashboard"})]})]})})},Ze=({hostId:e})=>{const{data:r,isLoading:s}=b({queryKey:["admin","host-listings",e],queryFn:()=>e?D(e):Promise.resolve([]),enabled:!!e});return s?t.jsx("div",{className:"flex justify-center p-8",children:t.jsx(h,{className:"h-8 w-8 animate-spin"})}):r&&0!==r.length?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(e=>{var r;return t.jsxs("div",{className:"border rounded-lg overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"aspect-video relative",children:[t.jsx(F,{src:L(null==(r=e.photos[0])?void 0:r.url),alt:e.listing.title||"Property",className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:t.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase "+("published"===e.listing.status?"bg-green-500 text-white":"bg-gray-500 text-white"),children:e.listing.status})})]}),t.jsxs("div",{className:"p-4 flex-1",children:[t.jsx("h3",{className:"font-semibold truncate",children:e.listing.title||"Untitled"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.listing.city,", ",e.listing.country]}),t.jsxs("div",{className:"mt-2 text-sm font-medium",children:[e.listing.price_per_night," ",e.listing.currency," / night"]})]})]},e.listing.id)})}):t.jsx("div",{className:"text-center p-8 text-muted-foreground",children:"No listings found for this host."})};export{Ge as default};
