import{O as rs,r as c,j as e,X as q,B as g,$ as Ne,E as K,G as ke,p as fs,J as ys,M as vs,aD as js,ab as j,H as ws,aY as Ns}from"./index-BumHlSai.js";import{O as fe}from"./OptimizedImage-xP7m_j1R.js";import{g as ks,a as Je,D as Fe,S as Xe,A as Ae,b as Cs,H as Ss}from"./HouseRulesSection-CkXw60GU.js";import{S as _s}from"./search-bg3BFgJa.js";import{C as is}from"./check-Cw4ObBPz.js";import{P as ee}from"./plus-zj-BiCMM.js";import{a as As,T as Ds,M as Ze,L as Oe,i as Ms,b as $s}from"./marker-shadow-CxIpLtgo.js";import{u as os}from"./useTranslation-DUME4FCN.js";import{H as Qe}from"./heart-DX2l2ZpK.js";import{S as Te}from"./star-CVLH76DC.js";import{M as _e}from"./minus-BBPBE3n7.js";import{P as Ke}from"./Popup-D1wFBk5c.js";import{C as I}from"./chevron-left-BgQrOA8v.js";import{C as Pe}from"./chevron-right-Cey3u9Ra.js";import{I as Se}from"./input-Ct3vV0ca.js";import{d as es}from"./wind-Crj9PVxn.js";import{M as He}from"./map-pin-8cfpTMs4.js";import{B as Ps}from"./book-open-TNSLc733.js";import{E as ze}from"./eye-DjaNXgzk.js";import{T as ss}from"./trash-2-CcGP-z7s.js";import{G as Fs}from"./grid-3x3-BMs6gCgl.js";import{M as Ts}from"./mail-BqVaG6XR.js";import"./shield-alert-BAzvxJqx.js";import"./zap-Bnsr_mvQ.js";import"./chevron-down-CeatZl6_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=rs("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=rs("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ls=({selectedAmenities:o,onToggle:x,onClose:t})=>{const[l,U]=c.useState(""),[a,f]=c.useState("All"),P=c.useMemo(()=>{let n=ks();if(l){const k=l.toLowerCase();n=n.filter(h=>h.label.toLowerCase().includes(k)||h.description.toLowerCase().includes(k))}else a!=="All"&&(n=n.filter(k=>k.category===a));return n},[l,a]),W=c.useMemo(()=>{const n={};P.forEach(h=>{n[h.category]||(n[h.category]=[]),n[h.category].push(h)});const k=[];return Je.forEach(h=>{n[h]&&k.push({category:h,amenities:n[h]})}),k},[P]);return e.jsxs("div",{className:"fixed inset-0 z-50 flex overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 transition-opacity",onClick:t}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-md bg-white shadow-xl flex flex-col animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:t,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Add amenities"}),e.jsx("div",{className:"w-9"})," "]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 space-y-4",children:[e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar -mx-6 px-6",children:[e.jsx("button",{onClick:()=>f("All"),className:`whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium border transition-colors ${a==="All"?"border-black bg-black text-white":"border-gray-200 hover:border-black bg-white text-gray-700"}`,children:"All"}),Je.map(n=>e.jsx("button",{onClick:()=>f(n),className:`whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium border transition-colors ${a===n?"border-black bg-black text-white":"border-gray-200 hover:border-black bg-white text-gray-700"}`,children:n},n))]}),e.jsxs("div",{className:"relative",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search amenities",value:l,onChange:n=>U(n.target.value),className:"w-full pl-10 pr-4 py-3 bg-gray-100 border-transparent focus:bg-white focus:border-black focus:ring-0 rounded-full transition-all font-medium"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:W.length>0?e.jsx("div",{className:"space-y-8",children:W.map(({category:n,amenities:k})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:n}),e.jsx("div",{className:"space-y-4",children:k.map(h=>{const T=o.includes(h.id),u=h.icon;return e.jsxs("div",{className:"flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-start gap-4 pr-4",children:[e.jsx("div",{className:"mt-1",children:e.jsx(u,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-900",children:h.label}),e.jsx("div",{className:"text-sm text-gray-500",children:h.description})]})]}),e.jsx("button",{onClick:()=>x(h.id),className:`flex-shrink-0 w-8 h-8 rounded-full border flex items-center justify-center transition-all ${T?"bg-black border-black text-white":"border-gray-300 hover:border-black text-gray-600"}`,children:T?e.jsx(is,{className:"h-4 w-4"}):e.jsx(ee,{className:"h-4 w-4"})})]},h.id)})})]},n))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:['No amenities found matching "',l,'"']})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-white",children:e.jsx(g,{onClick:t,className:"w-full bg-black text-white hover:bg-gray-800 py-6 text-lg rounded-xl",children:"Done"})})]})]})},Le=[{id:"not safe children 2 12",label:"Not a good fit for children 2 – 12",description:"This property has features that may not be safe for kids.",category:"considerations"},{id:"not safe infants under 2",label:"Not a good fit for infants under 2",description:"This property has features that may not be safe for babies or toddlers this age.",category:"considerations"},{id:"no pool gate",label:"Pool or hot tub doesn't have a gate or lock",description:"Guests have access to an unsecured swimming pool or hot tub. Check your local laws for specific requirements.",category:"considerations"},{id:"nearby water",label:"Nearby water, like a lake or river",description:"Guests have unrestricted access to a body of water, like an ocean, pond, creek, or wetlands, directly on or next to the property.",category:"considerations"},{id:"climbing structure",label:"Climbing or play structure(s) on the property",description:"Guests will have access to structures like a playset, slide, swings, or climbing ropes.",category:"considerations"},{id:"heights without rails",label:"There are heights without rails or protection",description:"Guests have access to an area higher than 30 inches (76 centimeters), like a balcony, roof, terrace, or cliff, that doesn't have a rail or other protection.",category:"considerations"},{id:"dangerous animals",label:"Potentially dangerous animal(s) on the property",description:"Guests and their pets will be around animals, like a horse, mountain lion, or farm animal, that could cause harm.",category:"considerations"}],ue=[{id:"exteriorsecuritycamera",label:"Exterior security camera present",description:`This property has one or more exterior cameras that record or transmit video, images, or audio. You must disclose them if they're turned off.

Note: Security cameras that monitor indoor spaces or outdoor areas where greater privacy is expected, like a shower, are not allowed.`,category:"devices"},{id:"noisedecibelmonitor",label:"Noise decibel monitor present",description:"This property has one or more devices that can assess sound level but don't record audio.",category:"devices"},{id:"carbonmonoxidealarm",label:"Carbon monoxide alarm",description:"A device that alerts if it detects unsafe levels of carbon monoxide (Check your local laws, which may require a working carbon monoxide detector in your listing)",category:"devices"},{id:"smokealarm",label:"Smoke alarm",description:"A device that alerts when it detects smoke (Check your local laws, which may require a working smoke detector in your listing)",category:"devices"}],Es=Oe.icon({iconUrl:$s,shadowUrl:Ms,iconSize:[25,41],iconAnchor:[12,41]});Oe.Marker.prototype.options.icon=Es;const Is=({listing:o,isOpen:x,onClose:t})=>{const{t:l,i18n:U}=os(),[a,f]=c.useState(0),[P,W]=c.useState(!1),[n,k]=c.useState(null),[h,T]=c.useState(null),[u,w]=c.useState(1),[N,S]=c.useState(0),[G,ie]=c.useState(0),[Y,pe]=c.useState(0),[se,te]=c.useState(!1),[A,de]=c.useState(new Date),[ae,oe]=c.useState(!1),[D,V]=c.useState(0),[he,me]=c.useState(!1),[J,ye]=c.useState(null),le=(i,m,b)=>{const M=[];for(let _=0;_<5;_++){const H=i.charCodeAt(0)+_,L=(H*9301+49297)%233280/233280*.01*2-.01,B=(H*49297+9301)%233280/233280*.01*2-.01;let R="";switch(i){case"restaurants":{const C=["Local Delights","Spicy Corner","Mama\\'s Kitchen","City Grill","Tasty Bites"];R=C[_%C.length];break}case"shopping":{const C=["City Mall","Fashion Hub","Local Market","Souvenir Shop","Boutique"];R=C[_%C.length];break}case"transport":{const C=["Bus Station","Taxi Stand","Train Station","Metro Stop","Airport Shuttle"];R=C[_%C.length];break}case"attractions":{const C=["City Park","Museum","Historic Monument","Art Gallery","Botanical Garden"];R=C[_%C.length];break}case"groceries":{const C=["Supermarket","Fresh Market","Convenience Store","Bakery","Organic Shop"];R=C[_%C.length];break}}M.push({name:R,lat:m+L,lng:b+B})}return M},X=i=>{switch(i){case"restaurants":return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>';case"shopping":return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>';case"transport":return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"/><circle cx="7" cy="18" r="2"/><path d="M9 18h5"/><circle cx="16" cy="18" r="2"/></svg>';case"attractions":return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>';case"groceries":return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>';default:return""}},E=u+N;if(Ne.useEffect(()=>{if(!ae||D===-1)return;const i=m=>{m.key==="ArrowLeft"&&D>0?V(D-1):m.key==="ArrowRight"&&D<o.photos.length-1?V(D+1):m.key==="Escape"&&(oe(!1),V(-1))};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[ae,D,o.photos.length]),!x)return null;let F=Fe;try{F=o.house_rules?JSON.parse(o.house_rules):Fe}catch(i){console.error("Failed to parse house rules:",i)}const y=i=>new Date(i.getFullYear(),i.getMonth()+1,0).getDate(),xe=i=>new Date(i.getFullYear(),i.getMonth(),1).getDay(),Z=(i,m)=>i?i.getDate()===m.getDate()&&i.getMonth()===m.getMonth()&&i.getFullYear()===m.getFullYear():!1,re=i=>!n||!h?!1:i>n&&i<h,ge=i=>{!n||n&&h?(k(i),T(null)):i>n?T(i):(k(i),T(null))},ve=()=>{de(new Date(A.getFullYear(),A.getMonth()+1))},be=()=>{de(new Date(A.getFullYear(),A.getMonth()-1))},je=()=>{const i=y(A),m=xe(A),b=[],M=["Su","Mo","Tu","We","Th","Fr","Sa"];for(let v=0;v<m;v++)b.push(e.jsx("div",{className:"h-12"},`empty-${v}`));for(let v=1;v<=i;v++){const $=new Date(A.getFullYear(),A.getMonth(),v),_=Z(n,$),H=Z(h,$),L=re($),B=$<new Date(new Date().setHours(0,0,0,0));b.push(e.jsx("button",{onClick:()=>!B&&ge($),disabled:B,className:`h-12 flex items-center justify-center rounded-full text-sm font-medium transition-colors
                        ${B?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}
                        ${_||H?"bg-gray-900 text-white":""}
                        ${L?"bg-gray-100":""}
                        ${!B&&!_&&!H&&!L?"text-gray-900":""}
                    `,children:v},v))}return e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:be,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h4",{className:"text-lg font-semibold",children:A.toLocaleDateString(U.language,{month:"long",year:"numeric"})}),e.jsx("button",{onClick:ve,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Pe,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:M.map(v=>e.jsx("div",{className:"h-12 flex items-center justify-center text-xs font-semibold text-gray-600",children:v},v))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:b})]})};return e.jsxs("div",{className:"fixed inset-0 bg-white z-50 overflow-y-auto",children:[e.jsx("header",{className:"sticky top-0 bg-white border-b border-gray-200 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-16 flex items-center justify-between",children:[e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium underline",children:"Share"})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium underline",children:"Save"})]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-2",children:o.title||l("host.preview.untitled","Untitled Listing")}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"h-4 w-4 fill-current"}),e.jsx("span",{className:"font-medium",children:l("host.preview.new","New")})]}),e.jsx("span",{className:"text-gray-600",children:"·"}),e.jsxs("span",{className:"underline font-medium",children:[o.city,", ",o.country]})]}),e.jsx("div",{className:"mb-8 rounded-xl overflow-hidden",children:o.photos.length>0?e.jsxs("div",{className:"relative",children:[o.photos.length===1?e.jsx(fe,{src:K(o.photos[0].url),alt:o.photos[0].caption||o.title,className:"w-full h-[500px] object-cover"}):o.photos.length<=4?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.photos.slice(0,4).map((i,m)=>e.jsx(fe,{src:K(i.url),alt:i.caption||`Photo ${m+1}`,className:`w-full object-cover ${m===0?"col-span-2 h-[400px]":"h-[250px]"}`},i.id))}):e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("div",{className:"col-span-2 row-span-2",children:e.jsx(fe,{src:K(o.photos[0].url),alt:o.photos[0].caption,className:"w-full h-full object-cover"})}),o.photos.slice(1,5).map((i,m)=>e.jsx(fe,{src:K(i.url),alt:i.caption||`Photo ${m+2}`,className:"w-full h-[250px] object-cover"},i.id))]}),o.photos.length>5&&e.jsx("button",{onClick:()=>{oe(!0),V(-1)},className:"absolute bottom-4 right-4 bg-white px-4 py-2 rounded-lg border border-gray-900 font-medium text-sm hover:bg-gray-50 transition-colors",children:l("host.preview.showAllPhotos","Show all photos")})]}):e.jsx("div",{className:"w-full h-[400px] bg-gray-100 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400",children:l("host.preview.noPhotos","No photos available")})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:l("host.preview.hostedBy",{type:o.property_type,name:"Arthur"})}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsxs("span",{children:[o.max_guests," ",l("host.preview.guests","guests")]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:["1 ",l("host.preview.bed","bed")]})]})]}),(()=>{if(!o.description)return null;let i=[],m=o.description;try{if(o.description.trim().startsWith("{")){const b=JSON.parse(o.description);i=[["listingDescription",l("listing.details.about")],["propertyDetails",l("propertyDetails")],["guestAccess",l("guestAccess")],["guestInteraction",l("guestInteraction")],["otherNotes",l("otherNotes")],["otherDetails",l("otherDetails")]].map(([v,$])=>({title:$,text:typeof b[v]=="string"?b[v].trim():""})).filter(v=>v.text),i.length>0&&(m=null)}}catch{m=o.description}return e.jsx("div",{className:"pb-8 border-b border-gray-200",children:i.length>0?e.jsx("div",{className:"space-y-6",children:i.map((b,M)=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:b.title}),e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:b.text})]},M))}):e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:m})})})(),o.amenities&&o.amenities.length>0&&e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:l("host.preview.offers","What this place offers")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(P?o.amenities:o.amenities.slice(0,10)).map(i=>{const m=Ae[i];if(!m)return null;const b=m.icon;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{className:"h-6 w-6 text-gray-700"}),e.jsx("span",{className:"text-gray-900",children:m.label})]},i)}),P&&["wifi","tv","kitchen","washer","parking","air_conditioning","workspace","pool","hottub","gym","bbq","fireplace","smoke_alarm","carbon_monoxide_alarm"].filter(b=>{var M;return!((M=o.amenities)!=null&&M.includes(b))&&Ae[b]}).slice(0,6).map(b=>{const M=Ae[b],v=M.icon;return e.jsxs("div",{className:"flex items-center gap-4 opacity-60",children:[e.jsx(v,{className:"h-6 w-6 text-gray-400"}),e.jsx("span",{className:"text-gray-500 line-through",children:M.label})]},`unavailable-${b}`)})]}),o.amenities.length>10&&e.jsx(g,{variant:"outline",className:"mt-6 rounded-lg border-gray-900 font-semibold",onClick:()=>W(!P),children:P?l("host.preview.showLess","Show less"):l("host.preview.showAllAmenities",{count:o.amenities.length})})]}),e.jsxs("div",{className:"pb-8 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:l("host.preview.selectCheckIn","Select check-in date")}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:l("host.preview.addDates","Add your travel dates for exact pricing")}),je()]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 border border-gray-200 rounded-xl p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:"text-2xl font-semibold",children:ke(o.price_per_night)}),e.jsx("span",{className:"text-gray-600",children:l("host.preview.night","night")})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Te,{className:"h-4 w-4 fill-current"}),e.jsx("span",{className:"font-medium",children:l("host.preview.new","New")})]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-lg mb-4",children:[e.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-300",children:[e.jsxs("button",{onClick:()=>me(!0),className:"p-3 border-r border-gray-300 text-left hover:bg-gray-50",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:l("host.preview.checkIn","Check-in")}),e.jsx("div",{className:"text-sm text-gray-900",children:n?n.toLocaleDateString(U.language,{month:"short",day:"numeric",year:"numeric"}):l("host.preview.addDate","Add date")})]}),e.jsxs("button",{onClick:()=>me(!0),className:"p-3 text-left hover:bg-gray-50",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:l("host.preview.checkout","Checkout")}),e.jsx("div",{className:"text-sm text-gray-900",children:h?h.toLocaleDateString(U.language,{month:"short",day:"numeric",year:"numeric"}):l("host.preview.addDate","Add date")})]})]}),e.jsxs("div",{className:"p-3 relative",children:[e.jsxs("button",{onClick:()=>te(!se),className:"w-full text-left",children:[e.jsx("div",{className:"text-xs font-semibold uppercase mb-1",children:l("host.preview.guestPicker.label","Guests")}),e.jsxs("div",{className:"text-sm text-gray-900",children:[l("host.preview.guestCount",{count:E,defaultValue:`${E} guest${E>1?"s":""}`}),G>0&&`, ${l("host.preview.infantCount",{count:G,defaultValue:`${G} infant${G>1?"s":""}`})}`,Y>0&&`, ${l("host.preview.petCount",{count:Y,defaultValue:`${Y} pet${Y>1?"s":""}`})}`]})]}),se&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-10 w-96",children:[e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:l("host.preview.guestPicker.adults","Adults")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.preview.guestPicker.adultsAge","Age 13+")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>w(Math.max(1,u-1)),disabled:u<=1,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${u<=1?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:u}),e.jsx("button",{onClick:()=>w(Math.min(o.max_guests-N,u+1)),disabled:E>=o.max_guests,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${E>=o.max_guests?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:l("host.preview.guestPicker.children","Children")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.preview.guestPicker.childrenAge","Ages 2–12")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>S(Math.max(0,N-1)),disabled:N<=0,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${N<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:N}),e.jsx("button",{onClick:()=>S(Math.min(o.max_guests-u,N+1)),disabled:E>=o.max_guests,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${E>=o.max_guests?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:l("host.preview.guestPicker.infants","Infants")}),e.jsx("div",{className:"text-sm text-gray-500",children:l("host.preview.guestPicker.infantsAge","Under 2")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>ie(Math.max(0,G-1)),disabled:G<=0,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${G<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:G}),e.jsx("button",{onClick:()=>ie(G+1),className:"w-8 h-8 rounded-full border border-gray-400 text-gray-600 hover:border-black hover:text-black flex items-center justify-center transition-colors",children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:l("host.preview.guestPicker.pets","Pets")}),e.jsx("div",{className:"text-sm text-blue-600 underline cursor-pointer",children:l("host.preview.guestPicker.serviceAnimal","Bringing a service animal?")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>pe(Math.max(0,Y-1)),disabled:Y<=0,className:`w-8 h-8 rounded-full border flex items-center justify-center transition-colors ${Y<=0?"border-gray-200 text-gray-300 cursor-not-allowed":"border-gray-400 text-gray-600 hover:border-black hover:text-black"}`,children:e.jsx(_e,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-medium",children:Y}),e.jsx("button",{onClick:()=>pe(Y+1),className:"w-8 h-8 rounded-full border border-gray-400 text-gray-600 hover:border-black hover:text-black flex items-center justify-center transition-colors",children:e.jsx(ee,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-600",children:l("host.preview.guestPicker.maxGuests",{count:o.max_guests})})}),e.jsx("button",{onClick:()=>te(!1),className:"mt-4 w-full text-right text-sm font-semibold underline hover:text-gray-600",children:l("host.preview.guestPicker.close","Close")})]})]})]}),e.jsx(g,{className:"w-full bg-gradient-to-r from-[#10B981] to-[#059669] hover:from-[#059669] hover:to-[#047857] text-white font-semibold py-3 rounded-lg mb-4",children:l("host.preview.checkAvailability","Check availability")}),e.jsx("p",{className:"text-center text-sm text-gray-500 mb-6",children:l("host.preview.noCharge","You won't be charged yet")}),n&&h&&e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"underline",children:[ke(o.price_per_night)," x ",Math.ceil((h.getTime()-n.getTime())/(1e3*60*60*24))," nights"]}),e.jsx("span",{children:ke(o.price_per_night*Math.ceil((h.getTime()-n.getTime())/(1e3*60*60*24)))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"underline",children:l("host.preview.cleaningFee","Cleaning fee")}),e.jsx("span",{children:"5000 FCFA"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"underline",children:l("host.preview.serviceFee","Service fee")}),e.jsx("span",{children:ke(Math.round(o.price_per_night*Math.ceil((h.getTime()-n.getTime())/(1e3*60*60*24))*.14))})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200 flex justify-between font-semibold",children:[e.jsx("span",{children:l("host.preview.total","Total")}),e.jsx("span",{children:ke(o.price_per_night*Math.ceil((h.getTime()-n.getTime())/(1e3*60*60*24))+5e3+Math.round(o.price_per_night*Math.ceil((h.getTime()-n.getTime())/(1e3*60*60*24))*.14))})]})]})]})})]}),e.jsxs("div",{className:"py-8 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:l("host.preview.location.title","Where you'll be")}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"font-medium text-gray-900 text-lg",children:o.address||`${o.city}, ${o.country}`}),o.latitude&&o.longitude&&e.jsxs("p",{className:"text-gray-500 mt-1",children:[o.latitude,", ",o.longitude]})]}),e.jsxs("div",{className:"h-[400px] rounded-xl overflow-hidden z-0 relative",children:[e.jsxs(As,{center:[o.latitude||4.0511,o.longitude||9.7679],zoom:13,scrollWheelZoom:!1,className:"h-full w-full",children:[e.jsx(Ds,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Ze,{position:[o.latitude||4.0511,o.longitude||9.7679],children:e.jsxs(Ke,{children:[e.jsx("div",{className:"font-semibold",children:o.title}),e.jsx("div",{className:"text-sm text-gray-600",children:l("host.preview.location.exact","Exact location provided after booking")})]})}),J&&e.jsx(e.Fragment,{children:le(J,o.latitude||4.0511,o.longitude||9.7679).map((i,m)=>e.jsx(Ze,{position:[i.lat,i.lng],icon:Oe.divIcon({className:"bg-transparent",html:`<div class="w-8 h-8 bg-white rounded-full shadow-md flex items-center justify-center border border-gray-200 text-gray-700">
                                                        ${X(J)}
                                                       </div>`,iconSize:[32,32],iconAnchor:[16,16]}),children:e.jsxs(Ke,{children:[e.jsx("div",{className:"font-semibold",children:i.name}),e.jsx("div",{className:"text-sm text-gray-600 capitalize",children:J})]})},m))})]}),e.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-2 z-[400] overflow-x-auto max-w-[90%] px-2 no-scrollbar",children:[{id:"restaurants",label:"Restaurants",icon:"Utensils"},{id:"shopping",label:"Shopping",icon:"ShoppingBag"},{id:"transport",label:"Transport Hub",icon:"Bus"},{id:"attractions",label:"Attractions",icon:"Camera"},{id:"groceries",label:"Groceries",icon:"ShoppingCart"}].map(i=>e.jsxs("button",{onClick:()=>ye(J===i.id?null:i.id),className:`flex items-center gap-2 px-4 py-2 rounded-full shadow-lg text-sm font-medium transition-all whitespace-nowrap
                                        ${J===i.id?"bg-gray-900 text-white scale-105":"bg-white text-gray-700 hover:bg-gray-50 hover:scale-105"}`,children:[i.id==="restaurants"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}),e.jsx("path",{d:"M7 2v20"}),e.jsx("path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"})]}),i.id==="shopping"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}),e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),i.id==="transport"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 6v6"}),e.jsx("path",{d:"M15 6v6"}),e.jsx("path",{d:"M2 12h19.6"}),e.jsx("path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3"}),e.jsx("circle",{cx:"7",cy:"18",r:"2"}),e.jsx("path",{d:"M9 18h5"}),e.jsx("circle",{cx:"16",cy:"18",r:"2"})]}),i.id==="attractions"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),e.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),i.id==="groceries"&&e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"8",cy:"21",r:"1"}),e.jsx("circle",{cx:"19",cy:"21",r:"1"}),e.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),l(`host.preview.location.categories.${i.id}`,i.label)]},i.id))})]})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-200",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold mb-6 text-gray-900",children:l("host.preview.thingsToKnow","Things to Know (Important things)")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:l("host.preview.houseRules","House rules")}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("p",{children:["Check-in: ",F.check_in_start," - ",F.check_in_end]}),e.jsxs("p",{children:["Checkout: ",F.checkout_time]}),e.jsxs("p",{children:[o.max_guests," ",l("host.preview.guests","guests")," maximum"]}),e.jsx("p",{children:F.pets_allowed?l("host.preview.petsAllowed","Pets allowed"):l("host.preview.noPets","No pets")}),e.jsx("p",{children:F.events_allowed?l("host.preview.eventsAllowed","Events allowed"):l("host.preview.noParties","No parties or events")}),e.jsx("p",{children:F.smoking_allowed?l("host.preview.smokingAllowed","Smoking, vaping, e-cigarettes allowed"):l("host.preview.noSmoking","No smoking, vaping, e-cigarettes")}),e.jsx("p",{children:F.quiet_hours?l("host.preview.quietHours","Quiet hours enforced"):l("host.preview.noQuietHours","Quiet hours not enforced")}),e.jsx("p",{children:F.commercial_photography_allowed?l("host.preview.photographyAllowed","Commercial photography and filming allowed"):l("host.preview.photographyNotAllowed","No commercial photography or filming")})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Safety & property"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[ue.map(i=>{var b;return((b=o.safety_items)==null?void 0:b.includes(i.id))?e.jsx("p",{children:i.label},i.id):i.id==="carbon_monoxide_alarm"?e.jsx("p",{children:"Carbon monoxide alarm not reported"},i.id):i.id==="smoke_alarm"?e.jsx("p",{children:"Smoke alarm not reported"},i.id):null}),Le.map(i=>{var m;return(m=o.safety_items)!=null&&m.includes(i.id)?e.jsx("p",{children:i.label},i.id):null})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Cancellation policy"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[o.cancellation_policy==="flexible"&&e.jsx("p",{children:"Free cancellation for 48 hours. Full refund 1 day prior to arrival."}),o.cancellation_policy==="moderate"&&e.jsx("p",{children:"Free cancellation for 48 hours. Full refund 5 days prior to arrival."}),o.cancellation_policy==="strict"&&e.jsx("p",{children:"Full refund for 48 hours after booking, if the check-in date is at least 14 days away. 50% refund up to 7 days prior to arrival."}),!o.cancellation_policy&&e.jsx("p",{children:"Add a cancellation policy."}),e.jsx("p",{className:"underline cursor-pointer",children:"Learn more"})]})]})]})]})]}),he&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Select dates"}),e.jsx("p",{className:"text-gray-600",children:"Add your travel dates for exact pricing"})]}),e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase text-gray-700 mb-2",children:"Check-in"}),e.jsx("input",{type:"text",placeholder:"MM/DD/YYYY",value:n?n.toLocaleDateString("en-US"):"",onChange:i=>{const m=new Date(i.target.value);isNaN(m.getTime())||k(m)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold uppercase text-gray-700 mb-2",children:"Checkout"}),e.jsx("input",{type:"text",placeholder:"Add date",value:h?h.toLocaleDateString("en-US"):"",onChange:i=>{const m=new Date(i.target.value);isNaN(m.getTime())||T(m)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black",disabled:!n})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:(()=>{const i=new Date(A),m=y(i),b=xe(i),M=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Su","Mo","Tu","We","Th","Fr","Sa"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:be,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsxs("h3",{className:"text-lg font-semibold",children:[M[i.getMonth()]," ",i.getFullYear()]}),e.jsx("div",{className:"w-9"})," "]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:v.map($=>e.jsx("div",{className:"h-10 flex items-center justify-center text-xs font-semibold text-gray-600",children:$},$))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:b}).map(($,_)=>e.jsx("div",{className:"h-10"},`empty-${_}`)),Array.from({length:m}).map(($,_)=>{const H=_+1,L=new Date(i.getFullYear(),i.getMonth(),H),B=Z(n,L),R=Z(h,L),C=re(L),Q=L<new Date(new Date().setHours(0,0,0,0));return e.jsx("button",{onClick:()=>!Q&&ge(L),disabled:Q,className:`h-10 flex items-center justify-center rounded-full text-sm font-medium transition-colors
                                                                    ${Q?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}
                                                                    ${B||R?"bg-gray-900 text-white":""}
                                                                    ${C?"bg-gray-100":""}
                                                                    ${!Q&&!B&&!R&&!C?"text-gray-900":""}
                                                                `,children:H},H)})]})]})})()}),e.jsx("div",{children:(()=>{const i=new Date(A.getFullYear(),A.getMonth()+1),m=y(i),b=xe(i),M=["January","February","March","April","May","June","July","August","September","October","November","December"],v=["Su","Mo","Tu","We","Th","Fr","Sa"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-9"})," ",e.jsxs("h3",{className:"text-lg font-semibold",children:[M[i.getMonth()]," ",i.getFullYear()]}),e.jsx("button",{onClick:ve,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Pe,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:v.map($=>e.jsx("div",{className:"h-10 flex items-center justify-center text-xs font-semibold text-gray-600",children:$},$))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:b}).map(($,_)=>e.jsx("div",{className:"h-10"},`empty-${_}`)),Array.from({length:m}).map(($,_)=>{const H=_+1,L=new Date(i.getFullYear(),i.getMonth(),H),B=Z(n,L),R=Z(h,L),C=re(L),Q=L<new Date(new Date().setHours(0,0,0,0));return e.jsx("button",{onClick:()=>!Q&&ge(L),disabled:Q,className:`h-10 flex items-center justify-center rounded-full text-sm font-medium transition-colors
                                                                    ${Q?"text-gray-300 cursor-not-allowed line-through":"hover:border hover:border-gray-900"}
                                                                    ${B||R?"bg-gray-900 text-white":""}
                                                                    ${C?"bg-gray-100":""}
                                                                    ${!Q&&!B&&!R&&!C?"text-gray-900":""}
                                                                `,children:H},H)})]})]})})()})]})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>{k(null),T(null)},className:"text-sm font-semibold underline hover:text-gray-600 transition-colors",children:"Clear dates"}),e.jsx("button",{onClick:()=>me(!1),className:"px-6 py-3 bg-gray-900 text-white rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Close"})]})]})}),ae&&o.photos.length>0&&e.jsxs("div",{className:"fixed inset-0 bg-white z-[60] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>oe(!1),className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(q,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Close"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(Xe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Share"})]}),e.jsxs("button",{className:"flex items-center gap-2 hover:bg-gray-100 px-3 py-2 rounded-lg transition-colors",children:[e.jsx(Qe,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Save"})]})]})]}),D===-1?e.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("h2",{className:"text-gray-900 text-2xl font-semibold mb-6",children:["All photos (",o.photos.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:o.photos.map((i,m)=>e.jsx("button",{onClick:()=>V(m),className:"aspect-square rounded-lg overflow-hidden hover:opacity-80 transition-opacity",children:e.jsx("img",{src:K(i.url),alt:i.caption||`Photo ${m+1}`,className:"w-full h-full object-cover"})},i.id))})]})}):e.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[e.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 text-gray-900 font-medium",children:[D+1," / ",o.photos.length]}),D>0&&e.jsx("button",{onClick:()=>V(D-1),className:"absolute left-4 p-3 bg-white rounded-full hover:bg-gray-100 transition-colors z-10",children:e.jsx(I,{className:"h-6 w-6"})}),e.jsx("div",{className:"max-w-6xl max-h-[80vh] flex items-center justify-center",children:e.jsx("img",{src:K(o.photos[D].url),alt:o.photos[D].caption||`Photo ${D+1}`,className:"max-w-full max-h-[80vh] object-contain"})}),D<o.photos.length-1&&e.jsx("button",{onClick:()=>V(D+1),className:"absolute right-4 p-3 bg-white rounded-full hover:bg-gray-100 transition-colors z-10",children:e.jsx(Pe,{className:"h-6 w-6"})}),e.jsx("button",{onClick:()=>V(-1),className:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-white px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Show all photos"})]})]})]})},Gs=({isOpen:o,onClose:x,selectedItems:t,onSave:l,initialSection:U="considerations"})=>{const[a,f]=c.useState(U),[P,W]=c.useState(t);if(!o)return null;const n=w=>{W(N=>N.includes(w)?N.filter(S=>S!==w):[...N,w])},k=()=>{l(P),x()},h=()=>{W(t),x()},T=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:h,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:"Guest safety"}),e.jsx("div",{className:"w-9"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"The safety devices and considerations you share with guests help them make informed decisions when booking your property."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>f("considerations"),className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Safety considerations"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Add details"})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("button",{onClick:()=>f("devices"),className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:"Safety devices"}),e.jsx("div",{className:"text-sm text-gray-500",children:P.filter(w=>ue.some(N=>N.id===w)).length>0?`${P.filter(w=>ue.some(N=>N.id===w)).length} selected`:"Noise decibel monitor present"})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}),u=(w,N)=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:h,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-lg font-semibold",children:N}),e.jsx("div",{className:"w-9"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-6",children:w.map(S=>{const G=P.includes(S.id);return e.jsx("div",{className:"border-b border-gray-100 pb-6 last:border-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:S.label}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:S.description}),S.learnMoreUrl&&e.jsx("button",{className:"text-sm font-medium underline mt-2",children:"Learn more"})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>n(S.id),className:`w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all ${G?"border-gray-300 hover:border-black text-gray-600":"bg-black border-black text-white"}`,children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>n(S.id),className:`w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all ${G?"bg-black border-black text-white":"border-gray-300 hover:border-black text-gray-600"}`,children:e.jsx(is,{className:"h-5 w-5"})})]})]})},S.id)})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:h,className:"text-base font-medium text-gray-900 hover:underline",children:"Cancel"}),e.jsx(g,{onClick:k,className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6",children:"Save"})]})]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[a===null&&T(),a==="considerations"&&u(Le,"Safety considerations"),a==="devices"&&u(ue,"Safety devices")]})})},Hs=["Bay view","Beach view","Canal view","City skyline view","Courtyard view","Desert view","Garden view","Golf course view","Harbor view","Lake view","Marina view","Mountain view","Ocean view","Park view","Pool view","Resort view","River view","Valley view","Vineyard view","Water view"],zs=({showAddressModal:o,onCloseAddressModal:x,address:t,city:l,country:U,onSaveAddress:a,showNeighborhoodModal:f,onCloseNeighborhoodModal:P,neighborhoodDescription:W,onSaveNeighborhood:n,showGettingAroundModal:k,onCloseGettingAroundModal:h,gettingAroundDescription:T,onSaveGettingAround:u,showScenicViewsModal:w,onCloseScenicViewsModal:N,scenicViews:S,onSaveScenicViews:G,showLocationSharingModal:ie,onCloseLocationSharingModal:Y,showGeneralLocation:pe,onSaveLocationSharing:se})=>{const[te,A]=c.useState(t),[de,ae]=c.useState(l),[oe,D]=c.useState(U),[V,he]=c.useState(W),[me,J]=c.useState(T),[ye,le]=c.useState(S),[X,E]=c.useState(pe);Ne.useEffect(()=>{A(t),ae(l),D(U)},[t,l,U]),Ne.useEffect(()=>{he(W)},[W]),Ne.useEffect(()=>{J(T)},[T]),Ne.useEffect(()=>{le(S)},[S]),Ne.useEffect(()=>{E(pe)},[pe]);const F=y=>{le(xe=>xe.includes(y)?xe.filter(Z=>Z!==y):[...xe,y])};return e.jsxs(e.Fragment,{children:[o&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Address"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Street address"}),e.jsx(Se,{value:te,onChange:y=>A(y.target.value),placeholder:"nkolbisson",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Apt, floor, bldg (if applicable)"}),e.jsx(Se,{placeholder:"",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"City / town / village"}),e.jsx(Se,{value:de,onChange:y=>ae(y.target.value),placeholder:"Douala",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Province / state / territory (if applicable)"}),e.jsx(Se,{value:oe,onChange:y=>D(y.target.value),placeholder:"Littoral Region",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Postal code (if applicable)"}),e.jsx(Se,{placeholder:"",className:"w-full"})]})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(g,{variant:"ghost",onClick:x,children:"Cancel"}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{a({address:te,city:de,country:oe}),x()},children:"Save"})]})]}),f&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Neighborhood description"}),e.jsx("button",{onClick:P,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Share some highlights about the neighborhood."}),e.jsx("textarea",{value:V,onChange:y=>he(y.target.value),className:"w-full h-64 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Describe the neighborhood..."})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(g,{variant:"ghost",onClick:P,children:"Cancel"}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{n(V),P()},children:"Save"})]})]}),k&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Getting around"}),e.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Share transportation options and parking details."}),e.jsx("textarea",{value:me,onChange:y=>J(y.target.value),className:"w-full h-64 p-4 border rounded-lg resize-none focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Describe how to get around..."})]}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(g,{variant:"ghost",onClick:h,children:"Cancel"}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{u(me),h()},children:"Save"})]})]}),w&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Scenic views"}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"space-y-2",children:Hs.map(y=>e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("span",{className:"text-gray-900",children:y}),e.jsx("input",{type:"checkbox",checked:ye.includes(y),onChange:()=>F(y),className:"h-5 w-5 rounded border-gray-300 text-black focus:ring-black"})]},y))})}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(g,{variant:"ghost",onClick:N,children:"Cancel"}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{G(ye),N()},children:"Save"})]})]}),ie&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-full md:w-[500px] bg-white shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Location sharing"}),e.jsx("button",{onClick:Y,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"General location"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Guests will see an approximate location on the map before booking. Your exact address is only shared after a reservation is confirmed."})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Show listing's general location"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Display approximate location to guests"})]}),e.jsx("button",{onClick:()=>E(!X),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${X?"bg-black":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${X?"translate-x-6":"translate-x-1"}`})})]}),X&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Note:"})," Guests will see a circle on the map showing the general area where your property is located. The exact address will only be revealed after they complete their booking."]})})]})}),e.jsxs("div",{className:"p-6 border-t flex justify-between",children:[e.jsx(g,{variant:"ghost",onClick:Y,children:"Cancel"}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800",onClick:()=>{se(X),Y()},children:"Save"})]})]}),(o||f||k||w||ie)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>{x(),P(),h(),N(),Y()}})]})},mt=()=>{var We;const o=fs(),{id:x}=ys(),{t}=os(),{toast:l}=vs(),{draft:U}=js(),[a,f]=c.useState(null),[P,W]=c.useState(!0),[n,k]=c.useState("photos"),[h,T]=c.useState("overview"),[u,w]=c.useState(null),[N,S]=c.useState(!1),[G,ie]=c.useState(!1),[Y,pe]=c.useState(!1),[se,te]=c.useState(null),[A,de]=c.useState(""),[ae,oe]=c.useState({});c.useEffect(()=>{a&&oe({title:a.title,description:a.description})},[a]);const D=async s=>{if(a)try{const r={};s==="title"&&(r.title=ae.title),await j.put(`/listings/${x}`,r),f({...a,...r}),l({title:t("common.saved","Saved"),description:t("host.editor.savedSuccessfully","Your changes have been saved.")})}catch(r){console.error(`Failed to update ${s}:`,r),l({title:t("common.error","Error"),description:t("host.editor.saveFailed","Failed to save changes"),variant:"destructive"})}},[V,he]=c.useState(!1),[me,J]=c.useState("considerations"),[ye,le]=c.useState(!1),[X,E]=c.useState(null),[F,y]=c.useState(null),[xe,Z]=c.useState(!1),re=c.useRef(null),ge=c.useRef(null),ve=s=>{if(E(s),a){const r=a.photos.findIndex(d=>d.url===s);y(r>=0?r:0)}},be=c.useCallback(()=>{if(!a||F===null)return;const s=(F-1+a.photos.length)%a.photos.length;y(s),E(a.photos[s].url)},[a,F]),je=c.useCallback(()=>{if(!a||F===null)return;const s=(F+1)%a.photos.length;y(s),E(a.photos[s].url)},[a,F]);c.useEffect(()=>{if(!X)return;const s=r=>{r.key==="ArrowLeft"?be():r.key==="ArrowRight"?je():r.key==="Escape"&&E(null)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[X,F,a,be,je]);const[i,m]=c.useState(!1),[b,M]=c.useState(!1),[v,$]=c.useState(!1),[_,H]=c.useState(!1),[L,B]=c.useState(!1),[R,C]=c.useState(""),[Q,ls]=c.useState(""),[ns,cs]=c.useState([]),[ds,hs]=c.useState(!0),[z,Ye]=c.useState(!1),[Be,Ve]=c.useState(!1),[De,Ce]=c.useState(null),[Ee,Me]=c.useState(""),Re=async s=>{if(!(!a||!x)&&confirm(t("host.editor.confirmDeletePhoto","Are you sure you want to delete this photo?")))try{const r=a.photos.filter(p=>p.id!==s),d=r.map((p,ne)=>({url:p.url,caption:p.caption,room_type:p.room_type||null,is_cover:p.is_cover===1||p.is_cover===!0,display_order:ne}));await j.post(`/listings/${x}/photos`,{photos:d}),f({...a,photos:r}),l({title:t("common.deleted","Deleted"),description:t("host.editor.photoDeleted","Photo has been deleted.")})}catch(r){console.error("Failed to delete photo:",r),l({title:t("common.error","Error"),description:t("host.editor.deletePhotoFailed","Failed to delete photo"),variant:"destructive"})}},Ue=async s=>{if(!(!a||!x))try{const r=a.photos.map(p=>({...p,is_cover:p.id===s?1:0})),d=r.map((p,ne)=>({url:p.url,caption:p.caption,room_type:p.room_type||null,is_cover:p.id===s,display_order:ne}));await j.post(`/listings/${x}/photos`,{photos:d}),f({...a,photos:r}),l({title:t("common.updated","Updated"),description:t("host.editor.coverPhotoUpdated","Cover photo has been updated.")})}catch(r){console.error("Failed to set cover photo:",r),l({title:t("common.error","Error"),description:t("host.editor.setCoverFailed","Failed to update cover photo"),variant:"destructive"})}},$e=async()=>{if(!(!a||!x||!De))try{const s=a.photos.map(d=>d.id===De?{...d,caption:Ee}:d),r=s.map((d,p)=>({url:d.url,caption:d.caption,room_type:d.room_type||null,is_cover:d.is_cover===1||d.is_cover===!0,display_order:p}));await j.post(`/listings/${x}/photos`,{photos:r}),f({...a,photos:s}),Ce(null),l({title:t("common.saved","Saved"),description:t("host.editor.captionSaved","Caption has been saved.")})}catch(s){console.error("Failed to update caption:",s),l({title:t("common.error","Error"),description:t("host.editor.saveCaptionFailed","Failed to save caption"),variant:"destructive"})}};if(c.useEffect(()=>{const s=async()=>{try{const d=await j.get(`/listings/${x}`);f(d.data.listing?{...d.data.listing,amenities:d.data.amenities||[],photos:d.data.photos||[],safety_items:d.data.safety_items||[]}:null)}catch(d){console.error("Failed to fetch listing:",d)}finally{W(!1)}},r=async()=>{try{const d=await j.get(`/calendar/${x}/settings`);w(d.data)}catch(d){console.error("Failed to fetch settings:",d)}};x&&(s(),r())},[x]),P)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t("common.loading","Loading...")});if(!a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t("host.editor.notFound","Listing not found")});const Ie=[{id:"photos",label:t("host.editor.sidebar.photos","Photos"),icon:es,description:t("host.editor.sidebar.addAtLeastNPhotos","Add at least 5 photos")},{id:"title",label:t("host.editor.sidebar.title","Title"),icon:ts,description:(a==null?void 0:a.title)||t("host.editor.sidebar.addTitle","Add a title")},{id:"description",label:t("host.editor.sidebar.description","Description"),icon:null,description:(()=>{try{const s=a!=null&&a.description?JSON.parse(a.description):null;return(s==null?void 0:s.listingDescription)||t("host.editor.sidebar.addDescription","Add a description")}catch{return(a==null?void 0:a.description)||t("host.editor.sidebar.addDescription","Add a description")}})()},{id:"pricing",label:t("host.editor.sidebar.pricing","Pricing"),icon:null,description:`${ke(a.price_per_night)} ${t("host.editor.perNight","per night")}`},{id:"availability",label:t("host.editor.sidebar.availability","Availability"),icon:null,description:u!=null&&u.min_nights?t("host.editor.sidebar.nightStaysRangeWithCount","{{min}} – {{max}} night stays",{min:u.min_nights,max:u.max_nights||365}):t("host.editor.sidebar.addDetails","Add details")},{id:"number_of_guests",label:t("host.editor.sidebar.numberOfGuests","Number of guests"),icon:as,description:`${a.max_guests} ${t("common.guests","guests")}`},{id:"amenities",label:t("host.editor.sidebar.amenities","Amenities"),icon:ee,description:a.amenities&&a.amenities.length>0?a.amenities.slice(0,2).map(s=>{var r;return(r=Ae[s])==null?void 0:r.label}).join(" · ")+(a.amenities.length>2?` +${a.amenities.length-2} ${t("host.editor.more","more")}`:""):t("host.editor.sidebar.addDetails","Add details")},{id:"location",label:t("host.editor.sidebar.location","Location"),icon:He,description:a.address||a.city||t("host.editor.sidebar.addLocation","Add location")},{id:"house_rules",label:t("host.editor.sidebar.houseRules","House rules"),icon:Ps,description:t("host.editor.sidebar.guestsMustAgree","Guests must agree to your rules")},{id:"guest_safety",label:t("host.editor.sidebar.guestSafety","Guest safety"),icon:Cs,description:(()=>{const r=((a==null?void 0:a.safety_items)||[]).filter(d=>ue.some(p=>p.id===d)).length;return r>0?`${r} ${t("host.editor.safetyDevice","safety device")}${r>1?"s":""}`:t("host.editor.sidebar.addSafetyInformation","Add safety information")})()},{id:"cancellation_policy",label:t("host.editor.sidebar.cancellationPolicy","Cancellation policy"),icon:ts,description:a.cancellation_policy||t("host.editor.sidebar.addPolicy","Add policy")}],ms=[{id:"flexible",label:t("host.editor.cancellation.flexible","Flexible"),description:t("host.editor.cancellation.flexibleDesc","Full refund 1 day prior to arrival")},{id:"moderate",label:t("host.editor.cancellation.moderate","Moderate"),description:t("host.editor.cancellation.moderateDesc","Full refund 5 days prior to arrival")},{id:"strict",label:t("host.editor.cancellation.strict","Strict"),description:t("host.editor.cancellation.strictDesc","Full refund for 48 hours after booking, if the check-in date is at least 14 days away. 50% refund up to 7 days prior to arrival.")}],xs=[{id:"additional",label:"Additional photos",image:a.photos.length>0?K(a.photos[0].url):null}],us=((We=Ie.find(s=>s.id===n))==null?void 0:We.label)||t("host.editor.listingEditor","Listing editor"),ps=s=>{switch(s){case 0:return"/host/intro";case 1:return"/host/amenities";case 2:return"/host/location";case 3:return"/host/photos";case 4:return"/host/title";case 5:return"/host/description";case 6:return"/host/booking-settings";case 7:return"/host/pricing";case 8:return"/host/safety";default:return"/host/preview"}},gs=async()=>{var s,r;if(x)try{Ve(!0),await j.post(`/listings/${x}/publish`),l({title:t("host.preview.publishedTitle","Listing published!"),description:t("host.preview.publishedDesc","Your listing is now live on Le Mboko")}),o("/host/dashboard")}catch(d){let p=t("host.preview.publishFailedDesc","Please check all required fields");d instanceof Ns&&((r=(s=d.response)==null?void 0:s.data)!=null&&r.error)?p=d.response.data.error:d instanceof Error&&(p=d.message),l({title:t("host.preview.publishFailedTitle","Failed to publish"),description:p,variant:"destructive"})}finally{Ve(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[e.jsxs("header",{className:"h-16 md:h-20 border-b border-gray-200 flex items-center justify-between px-4 sm:px-6 sticky top-0 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>{if(h!=="overview"){T("overview");return}if(z){Ye(!1);return}o("/host/dashboard")},className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold",children:h!=="overview"?t("host.editor.photoTour","Photo tour"):z?us:t("host.editor.listingEditor","Listing editor")})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsxs("button",{onClick:()=>o("/host/preview"),className:"hidden md:inline-flex items-center gap-2 px-3 py-2 rounded-full hover:bg-gray-100 transition-colors",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:t("host.editor.view","View")})]}),a.status!=="published"&&e.jsx(g,{onClick:gs,disabled:Be,className:"rounded-full",children:Be?t("host.preview.publishing","Publishing..."):t("host.preview.publishListing","Publish listing")})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("aside",{className:"hidden lg:block w-80 border-r border-gray-200 overflow-y-auto h-[calc(100vh-64px)] pb-10",children:e.jsx("div",{className:"p-6",children:h==="overview"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full mb-8 w-fit",children:e.jsx("button",{className:"px-4 py-1.5 bg-white rounded-full text-sm font-semibold shadow-sm",children:t("host.editor.yourSpace","Your space")})}),e.jsxs("button",{onClick:()=>o(ps(U.step||0)),className:"w-full text-left mb-8 border border-gray-200 rounded-xl p-4 flex items-center justify-between cursor-pointer hover:border-gray-300 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"font-semibold text-sm",children:t("host.editor.completeRequiredSteps","Complete required steps")})]}),e.jsx("p",{className:"text-xs text-gray-500",children:t("host.editor.finalTasksToPublish","Finish these final tasks to publish your listing and start getting booked.")})]}),e.jsx(I,{className:"h-4 w-4 rotate-180 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:Ie.map(s=>e.jsxs("button",{onClick:()=>k(s.id),className:`w-full text-left p-4 rounded-xl border transition-all ${n===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]},s.id))}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:()=>ie(!0),className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium",children:[e.jsx(ze,{className:"h-5 w-5"}),t("host.editor.view","View")]})})]}):e.jsx("div",{className:"space-y-6",children:xs.map(s=>e.jsxs("button",{onClick:()=>T("additional"),className:"w-full group flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-24 h-24 rounded-xl overflow-hidden mb-2 border-2 transition-all ${h===s.id?"border-black ring-1 ring-black":"border-transparent group-hover:scale-105"}`,children:s.image?e.jsx(fe,{src:s.image,alt:s.label,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx(es,{className:"h-8 w-8 text-gray-400"})})}),e.jsx("span",{className:`text-xs font-medium ${h===s.id?"text-black":"text-gray-500"}`,children:s.label})]},s.id))})})}),e.jsx("main",{className:"flex-1 overflow-y-auto h-[calc(100vh-64px)] p-4 sm:p-6 md:p-8 lg:p-12 pb-24 md:pb-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[h==="overview"&&!z&&e.jsxs("div",{className:"md:hidden mb-6",children:[e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 p-1 rounded-full mb-4 w-fit",children:e.jsx("button",{className:"px-4 py-1.5 bg-white rounded-full text-sm font-semibold shadow-sm",children:t("host.editor.yourSpace","Your space")})}),e.jsx("div",{className:"space-y-3",children:Ie.map(s=>e.jsxs("button",{onClick:()=>{k(s.id),Ye(!0),T("overview"),typeof window<"u"&&"scrollTo"in window&&window.scrollTo({top:0,behavior:"smooth"})},className:`w-full text-left p-4 rounded-xl border transition-all ${n===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]},s.id))})]}),h==="overview"?n==="photos"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:t("host.editor.photoTour","Photo tour")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>le(!0),children:t("host.editor.allPhotos","All photos")}),e.jsx(g,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>{var s;return(s=re.current)==null?void 0:s.click()},children:e.jsx(ee,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-2xl",children:t("host.editor.photoTourHelp","Manage photos and add details. Guests will only see your tour if every room has a photo.")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.photos.map(s=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"aspect-[4/3] rounded-xl overflow-hidden bg-gray-100 relative group cursor-pointer",onClick:()=>ve(s.url),children:[e.jsx(fe,{src:K(s.url),alt:s.caption,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-3",children:[e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:r=>{r.stopPropagation(),Re(s.id)},className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100 shadow-sm",title:t("common.delete","Delete"),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(g,{variant:"secondary",size:"sm",className:"rounded-full bg-white text-black hover:bg-gray-100",onClick:r=>{r.stopPropagation(),Ue(s.id)},children:[e.jsx(Te,{className:`h-4 w-4 mr-1 ${s.is_cover===1||s.is_cover===!0?"fill-yellow-400 text-yellow-400":""}`}),s.is_cover===1||s.is_cover===!0?t("host.editor.cover","Cover"):t("host.editor.setAsCover","Set as cover")]})})]}),(s.is_cover===1||s.is_cover===!0)&&e.jsx("div",{className:"absolute top-3 left-3 bg-white text-black px-2 py-1 rounded text-xs font-semibold shadow-sm",children:t("host.editor.cover","Cover")})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-1",children:De===s.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:Ee,onChange:r=>Me(r.target.value),className:"flex-1 text-sm border-b border-black focus:outline-none",autoFocus:!0,onKeyDown:r=>{r.key==="Enter"&&$e(),r.key==="Escape"&&Ce(null)}}),e.jsx("button",{onClick:$e,className:"text-xs font-semibold underline",children:t("common.save","Save")})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:s.caption||t("host.editor.addCaption","Add a caption")}),e.jsx("button",{onClick:()=>{Ce(s.id),Me(s.caption||"")},className:"text-xs font-semibold underline shrink-0",children:t("common.edit","Edit")})]})})]},s.id)),a.photos.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx("p",{className:"text-gray-500",children:t("host.editor.noPhotosYet","No photos uploaded yet")}),e.jsxs(g,{variant:"outline",className:"mt-4 rounded-full",onClick:()=>{var s;return(s=re.current)==null?void 0:s.click()},children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),t("host.editor.addPhotos","Add photos")]})]})]})]}):z?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:t("host.editor.additionalPhotos","Additional photos")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>le(!0),children:t("host.editor.managePhotos","Manage photos")}),e.jsx(g,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>{var s;return(s=re.current)==null?void 0:s.click()},children:e.jsx(ee,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-2xl",children:h==="additional"?t("host.editor.additionalPhotosHelp","These photos aren't included in a room or space, but they'll still appear in your listing."):t("host.editor.addRoomPhotosHelp","Add photos to this room to complete your photo tour.")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.photos.map(s=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"aspect-[4/3] rounded-xl overflow-hidden bg-gray-100 relative group cursor-pointer",onClick:()=>ve(s.url),children:[e.jsx(fe,{src:K(s.url),alt:s.caption,className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-between p-3",children:[e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:r=>{r.stopPropagation(),Re(s.id)},className:"p-2 bg-white rounded-full text-red-600 hover:bg-gray-100 shadow-sm",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(g,{variant:"secondary",size:"sm",className:"rounded-full bg-white text-black hover:bg-gray-100",onClick:r=>{r.stopPropagation(),Ue(s.id)},children:[e.jsx(Te,{className:`h-4 w-4 mr-1 ${s.is_cover===1||s.is_cover===!0?"fill-yellow-400 text-yellow-400":""}`}),s.is_cover===1||s.is_cover===!0?t("host.editor.cover","Cover"):t("host.editor.setAsCover","Set as cover")]})})]}),(s.is_cover===1||s.is_cover===!0)&&e.jsx("div",{className:"absolute top-3 left-3 bg-white text-black px-2 py-1 rounded text-xs font-semibold shadow-sm",children:t("host.editor.cover","Cover")})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-1",children:De===s.id?e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("input",{type:"text",value:Ee,onChange:r=>Me(r.target.value),className:"flex-1 text-sm border-b border-black focus:outline-none",autoFocus:!0,onKeyDown:r=>{r.key==="Enter"&&$e(),r.key==="Escape"&&Ce(null)}}),e.jsx("button",{onClick:$e,className:"text-xs font-semibold underline",children:t("common.save","Save")})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 truncate flex-1",children:s.caption||t("host.editor.addCaption","Add a caption")}),e.jsx("button",{onClick:()=>{Ce(s.id),Me(s.caption||"")},className:"text-xs font-semibold underline shrink-0",children:t("common.edit","Edit")})]})})]},s.id)),a.photos.length===0&&e.jsx("div",{className:"col-span-full text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-500",children:t("host.editor.noPhotosYet","No photos uploaded yet")})})]})]}),n==="title"&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:t("host.editor.sidebar.title","Title")}),e.jsx("p",{className:"text-gray-500 text-sm",children:t("host.editor.title.help","Your title should highlight what makes your place special.")})]}),e.jsx("button",{onClick:()=>D("title"),className:"font-medium underline hover:text-gray-800",children:t("host.editor.save","Save")})]}),e.jsx("textarea",{value:ae.title||"",onChange:s=>oe({...ae,title:s.target.value}),className:"w-full p-4 border rounded-xl text-lg min-h-[100px] focus:outline-none focus:ring-2 focus:ring-black",placeholder:t("host.editor.title.placeholder","Add a title"),maxLength:50})]}),n==="pricing"&&u&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t("host.editor.sidebar.pricing","Pricing")}),e.jsx("p",{className:"text-gray-500",children:t("host.editor.pricing.simpleHelp","Set your nightly price")})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:t("host.editor.pricing.nightlyPrice","Nightly price")}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("input",{type:"number",value:u.base_price??a.price_per_night,onChange:s=>w({...u,base_price:Number(s.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-32 focus:outline-none focus:ring-0",min:0}),e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{className:"rounded-lg",onClick:async()=>{try{await j.put(`/calendar/${x}/settings`,{base_price:u.base_price??a.price_per_night}),l({title:t("common.saved","Saved"),description:t("host.editor.pricing.updated","Nightly price updated")})}catch(s){console.error("Failed to update price:",s),l({title:t("common.error","Error"),description:t("host.editor.pricing.updateFailed","Failed to update price"),variant:"destructive"})}},children:t("common.save","Save")})})]}),n==="availability"&&u&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t("host.editor.sidebar.availability","Availability")}),e.jsx("p",{className:"text-gray-500",children:t("host.editor.availability.help","These settings apply to all nights, unless you customize them by date.")})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:t("host.editor.availability.tripLength","Trip length")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:t("host.editor.availability.minNights","Minimum nights")}),e.jsx("input",{type:"number",value:u.min_nights||"",onChange:s=>w({...u,min_nights:s.target.value===""?void 0:Number(s.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",placeholder:"1"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:t("host.editor.availability.maxNights","Maximum nights")}),e.jsx("input",{type:"number",value:u.max_nights||"",onChange:s=>w({...u,max_nights:s.target.value===""?void 0:Number(s.target.value)}),className:"text-3xl font-semibold border-none bg-transparent p-0 w-24 focus:outline-none focus:ring-0",placeholder:"365"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:t("host.editor.availability.advanceNotice","Advance notice")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t("host.editor.availability.advanceNoticeHelp","How much notice do you need between a guest's booking and their arrival?")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:t("host.editor.availability.days","Days")}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u.advance_notice,onChange:s=>w({...u,advance_notice:s.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"same_day",children:t("host.editor.availability.sameDay","Same day")}),e.jsx("option",{value:"1_day",children:t("host.editor.availability.1day","1 day")}),e.jsx("option",{value:"2_days",children:t("host.editor.availability.2days","2 days")}),e.jsx("option",{value:"3_days",children:t("host.editor.availability.3days","3 days")}),e.jsx("option",{value:"7_days",children:t("host.editor.availability.7days","7 days")})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:t("host.editor.availability.sameDayHelp","Guests can book on the same day as check-in until this time.")})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:t("host.editor.availability.time","Time")}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:u.same_day_cutoff_time,onChange:s=>w({...u,same_day_cutoff_time:s.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:Array.from({length:24}).map((s,r)=>{const d=r,p=`${d===0?12:d>12?d-12:d}:00 ${d<12?"AM":"PM"}`;return e.jsx("option",{value:`${d}:00`,children:p},r)})}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:t("host.editor.availability.preparationTime","Preparation time")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t("host.editor.availability.preparationTimeHelp","Block time before and after each reservation to prepare your space.")}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u.preparation_time,onChange:s=>w({...u,preparation_time:s.target.value}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"none",children:t("host.editor.availability.none","None")}),e.jsx("option",{value:"1_night",children:t("host.editor.availability.1night","1 night before and after each reservation")}),e.jsx("option",{value:"2_nights",children:t("host.editor.availability.2nights","2 nights before and after each reservation")})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:t("host.editor.availability.availabilityWindow","Availability window")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t("host.editor.availability.availabilityWindowHelp","How far in advance can guests book?")}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u.availability_window,onChange:s=>w({...u,availability_window:Number(s.target.value)}),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:3,children:t("host.editor.availability.monthsInAdvance",{count:3,defaultValue:"3 months in advance"})}),e.jsx("option",{value:6,children:t("host.editor.availability.monthsInAdvance",{count:6,defaultValue:"6 months in advance"})}),e.jsx("option",{value:9,children:t("host.editor.availability.monthsInAdvance",{count:9,defaultValue:"9 months in advance"})}),e.jsx("option",{value:12,children:t("host.editor.availability.monthsInAdvance",{count:12,defaultValue:"12 months in advance"})}),e.jsx("option",{value:24,children:t("host.editor.availability.monthsInAdvance",{count:24,defaultValue:"24 months in advance"})})]}),e.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx(I,{className:"h-5 w-5 text-gray-400 -rotate-90"})})]})})]}),e.jsx("div",{className:"flex justify-end border-t pt-6",children:e.jsx(g,{onClick:async()=>{try{await j.put(`/calendar/${x}/settings`,{min_nights:u.min_nights,max_nights:u.max_nights,advance_notice:u.advance_notice,same_day_cutoff_time:u.same_day_cutoff_time,preparation_time:u.preparation_time,availability_window:u.availability_window})}catch(s){console.error("Failed to update availability:",s)}},className:"bg-black text-white hover:bg-gray-800 rounded-lg px-6",children:t("common.save","Save")})})]}),n==="number_of_guests"&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl mx-auto text-center pt-12`,children:[e.jsx("div",{className:"mb-8 flex justify-center",children:e.jsx("div",{className:"flex gap-2 items-end",children:e.jsx(as,{className:"h-16 w-16 text-gray-800"})})}),e.jsx("h2",{className:"text-xl text-gray-600 mb-12",children:t("host.editor.guests.howMany","How many guests can fit comfortably in your space?")}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mb-12",children:[e.jsx("button",{onClick:()=>{const s=Math.max(1,a.max_guests-1);f({...a,max_guests:s})},disabled:a.max_guests<=1,className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:border-black disabled:opacity-50 disabled:hover:border-gray-300 transition-colors",children:e.jsx(_e,{className:"h-6 w-6 text-gray-600"})}),e.jsx("span",{className:"text-8xl font-semibold text-gray-900",children:a.max_guests}),e.jsx("button",{onClick:()=>{const s=a.max_guests+1;f({...a,max_guests:s})},className:"w-12 h-12 rounded-full border border-gray-300 flex items-center justify-center hover:border-black transition-colors",children:e.jsx(ee,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(g,{onClick:async()=>{try{await j.put(`/listings/${x}`,{max_guests:a.max_guests})}catch(s){console.error("Failed to update max guests:",s)}},className:"bg-black text-white hover:bg-gray-800 rounded-lg px-8 py-6 text-lg font-semibold",children:t("host.editor.save","Save")})})]}),n==="amenities"&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:t("host.editor.sidebar.amenities","Amenities")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>S(!0),children:t("edit","Edit")}),e.jsx(g,{variant:"outline",size:"icon",className:"rounded-full border-gray-300 w-10 h-10",onClick:()=>S(!0),children:e.jsx(ee,{className:"h-5 w-5"})})]})]}),e.jsx("p",{className:"text-gray-500 mb-8",children:t("host.editor.amenities.help","You've added these to your listing so far.")}),e.jsx("div",{className:"space-y-6",children:a.amenities&&a.amenities.length>0?a.amenities.map(s=>{const r=Ae[s];if(!r)return null;const d=r.icon;return e.jsxs("div",{className:"flex gap-4 pb-6 border-b border-gray-100 last:border-0",children:[e.jsx(d,{className:"h-6 w-6 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.label}),e.jsx("div",{className:"text-sm text-gray-500",children:r.description})]})]},s)}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:t("host.editor.amenities.none","No amenities added yet")}),e.jsx(g,{variant:"outline",className:"rounded-full",onClick:()=>S(!0),children:t("host.editor.amenities.add","Add amenities")})]})})]}),n==="location"&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t("host.editor.sidebar.location","Location")}),e.jsx("p",{className:"text-gray-500",children:t("host.editor.location.help","Your exact address will only be shared with confirmed guests.")})]}),a.latitude&&a.longitude?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-64 bg-gray-100 relative",children:e.jsx("iframe",{width:"100%",height:"100%",frameBorder:"0",style:{border:0},src:`https://www.openstreetmap.org/export/embed.html?bbox=${a.longitude-.01},${a.latitude-.01},${a.longitude+.01},${a.latitude+.01}&layer=mapnik&marker=${a.latitude},${a.longitude}`,allowFullScreen:!0})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(He,{className:"h-5 w-5 text-gray-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:a.address||`${a.city}, ${a.country}`}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.latitude.toFixed(6),", ",a.longitude.toFixed(6)]})]})]}),e.jsx(g,{variant:"outline",className:"w-full rounded-lg border-gray-300",onClick:()=>o(`/host/location?listing=${x}`),children:t("host.editor.location.edit","Edit location")})]})]}),e.jsxs("div",{className:"border rounded-xl divide-y",children:[e.jsxs("button",{onClick:()=>m(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.location.address","Address")}),e.jsx("div",{className:"text-sm text-gray-500",children:a.address||`${a.city}, ${a.country}`})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>B(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.location.sharing","Location sharing")}),e.jsx("div",{className:"text-sm text-gray-500",children:t("host.editor.location.sharingHelp","Show listing's general location")})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>M(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.location.neighborhood","Neighborhood description")}),e.jsx("div",{className:"text-sm text-gray-500",children:t("host.editor.addDetails","Add details")})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>H(!0),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.location.scenicViews","Scenic views")}),e.jsx("div",{className:"text-sm text-gray-500",children:t("host.editor.addDetails","Add details")})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-12 text-center",children:[e.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t("host.editor.location.none","No location set")}),e.jsx("p",{className:"text-gray-500 mb-6",children:t("host.editor.location.noneHelp","Add your property's location to help guests find you.")}),e.jsx(g,{className:"bg-black text-white hover:bg-gray-800 rounded-lg",onClick:()=>o(`/host/location?listing=${x}`),children:t("host.editor.location.add","Add location")})]})]}),n==="house_rules"&&a&&e.jsx("div",{className:`${z?"":"hidden md:block"}`,children:e.jsx(Ss,{rules:(()=>{try{return a.house_rules?JSON.parse(a.house_rules):Fe}catch{return Fe}})(),maxGuests:a.max_guests||1,onRulesChange:async s=>{const r=JSON.stringify(s);f({...a,house_rules:r});try{await j.put(`/listings/${x}`,{house_rules:r})}catch(d){console.error("Failed to update house rules:",d)}},onMaxGuestsChange:async s=>{f({...a,max_guests:s});try{await j.put(`/listings/${x}`,{max_guests:s})}catch(r){console.error("Failed to update max guests:",r)}}})}),n==="description"&&(()=>{var p,ne;const s=(()=>{try{return a.description?JSON.parse(a.description):{listingDescription:"",propertyDetails:"",guestAccess:"",guestInteraction:"",otherDetails:""}}catch{return{listingDescription:a.description||"",propertyDetails:"",guestAccess:"",guestInteraction:"",otherDetails:""}}})(),r=[{id:"listingDescription",title:t("host.editor.description.listingDescription"),subtitle:s.listingDescription||t("host.editor.sidebar.addDescription"),placeholder:t("host.editor.description.placeholderDetailed.listingDescription")},{id:"propertyDetails",title:t("host.editor.description.propertyDetails"),subtitle:s.propertyDetails||t("host.editor.sidebar.addDetails"),placeholder:t("host.editor.description.placeholderDetailed.propertyDetails")},{id:"guestAccess",title:t("host.editor.description.guestAccess"),subtitle:s.guestAccess||t("host.editor.sidebar.addDetails"),placeholder:t("host.editor.description.placeholderDetailed.guestAccess")},{id:"guestInteraction",title:t("host.editor.description.guestInteraction"),subtitle:s.guestInteraction||t("host.editor.sidebar.addDetails"),placeholder:t("host.editor.description.placeholderDetailed.guestInteraction")},{id:"otherDetails",title:t("host.editor.description.otherDetails"),subtitle:s.otherDetails||t("host.editor.sidebar.addDetails"),placeholder:t("host.editor.description.placeholderDetailed.otherDetails")}],d=async()=>{const O={...s,[se]:A},we=JSON.stringify(O);f({...a,description:we});try{await j.put(`/listings/${x}`,{description:we}),te(null)}catch(Ge){console.error("Failed to update description:",Ge)}};return e.jsxs("div",{className:`${z?"":"hidden md:block"}`,children:[e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("div",{className:"mb-8",children:e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t("host.editor.sidebar.description","Description")})}),e.jsx("div",{className:"space-y-0 border border-gray-200 rounded-xl overflow-hidden",children:r.map((O,we)=>e.jsxs("button",{onClick:()=>{te(O.id),de(s[O.id]||"")},className:`w-full text-left p-4 hover:bg-gray-50 transition-colors flex items-center justify-between ${we!==r.length-1?"border-b border-gray-200":""}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:O.title}),e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:O.subtitle})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400 flex-shrink-0 ml-4"})]},O.id))})]}),se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>te(null),className:"p-2 hover:bg-gray-100 rounded-full -ml-2",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-base font-semibold absolute left-1/2 -translate-x-1/2",children:(p=r.find(O=>O.id===se))==null?void 0:p.title}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[se==="propertyDetails"&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Share a general description of your property's rooms and spaces so guests know what to expect."}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:t("host.editor.description.availableCharacters",{count:500-A.length})}),e.jsx("textarea",{value:A,onChange:O=>{O.target.value.length<=500&&de(O.target.value)},className:"w-full min-h-[400px] text-base border-none p-0 resize-none focus:ring-0 focus:outline-none placeholder-gray-400",placeholder:(ne=r.find(O=>O.id===se))==null?void 0:ne.placeholder,autoFocus:!0})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>te(null),className:"text-base font-medium text-gray-900 hover:underline",children:t("common.cancel")}),e.jsx(g,{onClick:d,disabled:A.length===0,className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6 disabled:opacity-50 disabled:cursor-not-allowed",children:t("common.save")})]})]})})]})})(),n==="guest_safety"&&a&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsx("h2",{className:"text-2xl font-semibold",children:t("host.editor.sidebar.guestSafety","Guest safety")})}),e.jsxs("div",{className:"space-y-4 mb-8",children:[(a.safety_items||[]).filter(s=>!ue.some(r=>r.id===s)).length===0&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.safety.coAlarmMissing","Carbon monoxide alarm not reported")})}),!(a.safety_items||[]).some(s=>s==="smoke_alarm")&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.safety.smokeAlarmMissing","Smoke alarm not reported")})}),(a.safety_items||[]).some(s=>s==="noise_decibel_monitor")&&e.jsx("div",{className:"p-4 border border-gray-200 rounded-xl",children:e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.safety.noiseMonitorPresent","Noise decibel monitor present")})})]}),e.jsx("p",{className:"text-gray-500 mb-6",children:t("host.editor.safety.help","The safety devices and considerations you share with guests help them make informed decisions when booking your property.")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>{J("considerations"),he(!0)},className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.safety.considerations","Safety considerations")}),e.jsx("div",{className:"text-sm text-gray-500",children:(a.safety_items||[]).filter(s=>Le.some(r=>r.id===s)).length>0?`${(a.safety_items||[]).filter(s=>Le.some(r=>r.id===s)).length} ${t("common.selected","selected")}`:t("host.editor.addDetails","Add details")})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]}),e.jsxs("button",{onClick:()=>{J("devices"),he(!0)},className:"w-full text-left p-4 border border-gray-200 rounded-xl hover:border-gray-300 transition-colors flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:t("host.editor.safety.devices","Safety devices")}),e.jsx("div",{className:"text-sm text-gray-500",children:(a.safety_items||[]).filter(s=>ue.some(r=>r.id===s)).length>0?`${(a.safety_items||[]).filter(s=>ue.some(r=>r.id===s)).length} ${t("common.selected","selected")}`:t("host.editor.safety.noiseMonitorPresent","Noise decibel monitor present")})]}),e.jsx(I,{className:"h-5 w-5 rotate-180 text-gray-400"})]})]})]}),n==="cancellation_policy"&&a&&e.jsxs("div",{className:`${z?"":"hidden md:block"} max-w-2xl`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:t("host.editor.sidebar.cancellationPolicy","Cancellation policy")}),e.jsx("p",{className:"text-gray-500",children:t("host.editor.cancellation.help","Choose a policy that works for you and your guests.")})]}),e.jsx("div",{className:"space-y-4",children:ms.map(s=>e.jsx("div",{className:`p-4 border rounded-xl cursor-pointer transition-all ${a.cancellation_policy===s.id?"border-black ring-1 ring-black bg-gray-50":"border-gray-200 hover:border-gray-300"}`,onClick:async()=>{f({...a,cancellation_policy:s.id});try{await j.put(`/listings/${x}`,{cancellation_policy:s.id})}catch(r){console.error("Failed to update cancellation policy:",r)}},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 mb-1",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mt-0.5 ${a.cancellation_policy===s.id?"border-black":"border-gray-300"}`,children:a.cancellation_policy===s.id&&e.jsx("div",{className:"w-2.5 h-2.5 bg-black rounded-full"})})]})},s.id))})]}),h==="overview"&&!z&&n!=="photos"&&n!=="title"&&n!=="description"&&n!=="pricing"&&n!=="availability"&&n!=="number_of_guests"&&n!=="amenities"&&n!=="house_rules"&&n!=="guest_safety"&&n!=="cancellation_policy"&&e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:t("host.editor.selectSection")})]})}),h==="overview"&&!z&&e.jsx("div",{className:"md:hidden fixed bottom-24 left-1/2 -translate-x-1/2 z-[60]",children:e.jsxs("button",{onClick:()=>ie(!0),className:"inline-flex items-center gap-2 px-6 py-3 rounded-full bg-gray-900 text-white shadow-lg",children:[e.jsx(ze,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:t("host.editor.view")})]})})]}),a&&e.jsx(Is,{listing:a,isOpen:G,onClose:()=>ie(!1)}),N&&a&&e.jsx(Ls,{selectedAmenities:a.amenities||[],onToggle:async s=>{const r=a.amenities||[],d=r.includes(s)?r.filter(p=>p!==s):[...r,s];f({...a,amenities:d});try{await j.post(`/listings/${x}/amenities`,{amenities:d})}catch(p){console.error("Failed to update amenities:",p),f({...a,amenities:r})}},onClose:()=>S(!1)}),V&&a&&e.jsx(Gs,{isOpen:V,onClose:()=>he(!1),selectedItems:a.safety_items||[],initialSection:me,onSave:async s=>{f({...a,safety_items:s});try{await j.put(`/listings/${x}`,{safety_items:s})}catch(r){console.error("Failed to update safety items:",r),f({...a,safety_items:a.safety_items||[]})}}}),e.jsx(zs,{showAddressModal:i,onCloseAddressModal:()=>m(!1),address:(a==null?void 0:a.address)||"",city:(a==null?void 0:a.city)||"",country:(a==null?void 0:a.country)||"",onSaveAddress:async s=>{if(a){f({...a,...s});try{await j.put(`/listings/${x}`,s)}catch(r){console.error("Failed to update address:",r)}}},showNeighborhoodModal:b,onCloseNeighborhoodModal:()=>M(!1),neighborhoodDescription:R,onSaveNeighborhood:async s=>{C(s);try{await j.put(`/listings/${x}`,{neighborhood_description:s})}catch(r){console.error("Failed to update neighborhood description:",r)}},showGettingAroundModal:v,onCloseGettingAroundModal:()=>$(!1),gettingAroundDescription:Q,onSaveGettingAround:async s=>{ls(s);try{await j.put(`/listings/${x}`,{getting_around:s})}catch(r){console.error("Failed to update getting around:",r)}},showScenicViewsModal:_,onCloseScenicViewsModal:()=>H(!1),scenicViews:ns,onSaveScenicViews:async s=>{cs(s);try{await j.put(`/listings/${x}`,{scenic_views:s})}catch(r){console.error("Failed to update scenic views:",r)}},showLocationSharingModal:L,onCloseLocationSharingModal:()=>B(!1),showGeneralLocation:ds,onSaveLocationSharing:async s=>{hs(s);try{await j.put(`/listings/${x}`,{show_general_location:s})}catch(r){console.error("Failed to update location sharing:",r)}}}),e.jsx("input",{ref:re,type:"file",multiple:!0,accept:"image/*",onChange:async s=>{const r=s.target.files;if(!(!r||r.length===0)){Z(!0);try{const p=(await j.get(`/listings/${x}`)).data.photos||[],ne=[];for(const ce of Array.from(r)){const qe=new FormData;qe.append("file",ce);const bs=await j.post("/upload/images",qe,{headers:{"Content-Type":"multipart/form-data"}});ne.push(bs.data.urls[0])}const O=p.map(ce=>({url:ce.url,caption:ce.caption,room_type:ce.room_type,is_cover:ce.is_cover===1,display_order:ce.display_order})),we=ne.map(ce=>({url:ce,caption:"Additional photo",room_type:null,is_cover:!1,display_order:0}));await j.post(`/listings/${x}/photos`,{photos:[...O,...we]});const Ge=await j.get(`/listings/${x}`);f(Ge.data)}catch(d){console.error("Upload failed:",d)}finally{Z(!1),re.current&&(re.current.value="")}}},className:"hidden"}),ye&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-semibold",children:["All photos (",a.photos.length,")"]}),e.jsx("button",{onClick:()=>le(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(q,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.photos.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.photos.map(s=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>ve(s.url),children:e.jsx("img",{src:K(s.url),alt:s.caption||"Listing photo",className:"w-full h-full object-cover"})},s.id))}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No photos uploaded yet"})}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx(g,{onClick:()=>le(!1),className:"bg-gray-900 text-white hover:bg-gray-800 rounded-lg px-6",children:"Close"})})]})}),X&&e.jsxs("div",{className:"fixed inset-0 bg-black z-[60] flex items-center justify-center p-4 md:p-8",onClick:()=>E(null),onTouchStart:s=>{ge.current=s.touches[0].clientX},onTouchEnd:s=>{const r=ge.current,d=s.changedTouches[0].clientX;if(r!==null){const p=d-r;Math.abs(p)>40&&(p>0?be():je())}ge.current=null},children:[e.jsx("button",{onClick:()=>E(null),className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(q,{className:"h-6 w-6"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),be()},className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(I,{className:"h-6 w-6"})}),e.jsx("button",{onClick:s=>{s.stopPropagation(),je()},className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:e.jsx(Pe,{className:"h-6 w-6"})}),e.jsx("img",{src:K(X),alt:"Full size view",className:"w-full h-full object-contain",onClick:s=>s.stopPropagation()})]})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 border-t bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 pb-safe",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:e.jsxs("ul",{className:"grid grid-cols-4 h-16 text-xs",children:[e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/reservations",className:"flex flex-col items-center gap-1 text-gray-600",children:[e.jsx(ws,{className:"h-5 w-5"}),e.jsx("span",{children:t("nav.reservations","Reservations")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/dashboard",className:"flex flex-col items-center gap-1 text-gray-900 font-medium",children:[e.jsx(Fs,{className:"h-5 w-5"}),e.jsx("span",{children:t("nav.listings","Listings")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"#",className:"flex flex-col items-center gap-1 text-gray-600",children:[e.jsx(Ts,{className:"h-5 w-5"}),e.jsx("span",{children:t("nav.messages","Messages")})]})})]})})})]})};export{mt as default};
