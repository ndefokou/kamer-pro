import{j as e,a3 as s,L as t}from"./vendor-ui-CAOOb9ur.js";import{f as i,r as a}from"./vendor-react-C_40T_Qy.js";import{a6 as r,n as l,o,p as n,B as d}from"./index-CHW3rl59.js";import{O as c}from"./OptimizedImage-ChM7nsgN.js";import{u as h}from"./useTranslation-DgYtz7Wb.js";import"./vendor-charts-knjLkUkQ.js";import"./vendor-utils-tyqSID0v.js";const m=()=>{const m=i(),{t:p}=h(),{draft:x,publishListing:u,saveDraft:v,previousStep:g}=r(),{toast:f}=l(),[b,j]=a.useState(!1),[N,w]=a.useState(!1),y=x.photos[x.coverPhotoIndex]||x.photos[0];return e.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:p("host.preview.title","Preview your listing")}),e.jsx("p",{className:"text-muted-foreground text-lg",children:p("host.preview.subtitle","Here's how your listing will appear to guests")})]}),e.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden mb-8",children:[y&&e.jsx("div",{className:"aspect-video w-full overflow-hidden",children:e.jsx(c,{src:o(y),alt:x.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:x.title}),e.jsxs("p",{className:"text-muted-foreground",children:[x.propertyType," • ",x.maxGuests," guests • ",x.bedrooms," bedrooms • ",x.beds," beds • ",x.bathrooms," baths"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:n(x.pricePerNight||0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:p("host.common.perNight","per night")})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:p("host.preview.about","About this place")}),e.jsx("p",{className:"text-muted-foreground",children:x.description})]}),x.amenities.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:p("host.preview.offers","What this place offers")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[x.amenities.slice(0,6).map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm",children:t.replace(/_/g," ")})]},t)),x.amenities.length>6&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["+",x.amenities.length-6," ",p("host.editor.more","more")]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:p("host.preview.bookingDetails","Booking details")}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["• ",x.instantBook?p("host.preview.instantAvailable","Instant booking available"):p("host.preview.hostApproval","Host approval required")]}),e.jsxs("p",{children:["• ",p("host.preview.minimumStay","Minimum stay"),": ",x.minNights," ",1!==x.minNights?p("common.nights","nights"):p("host.preview.night","night")]}),x.maxNights&&e.jsxs("p",{children:["• ",p("host.preview.maximumStay","Maximum stay"),": ",x.maxNights," ",p("common.nights","nights")]}),x.cleaningFee&&e.jsxs("p",{children:["• ",p("host.pricing.cleaningFeeShort","Cleaning fee"),": ",n(x.cleaningFee)]})]})]}),x.houseRules&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:p("host.safety.houseRulesTitle","House rules")}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:x.houseRules})]}),x.safetyDevices.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:p("host.preview.safetyFeatures","Safety features")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.safetyDevices.map(s=>e.jsx("span",{className:"px-3 py-1 bg-muted rounded-full text-sm",children:s.replace(/_/g," ")},s))})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(d,{variant:"outline",onClick:()=>{g(),m("/host/safety")},disabled:b||N,children:p("common.back","Back")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d,{variant:"outline",onClick:async()=>{w(!0);const e=await v();e.success?(f({title:p("host.preview.draftSavedTitle","Draft saved"),description:p("host.preview.draftSavedDesc","You can continue editing later")}),m("/host/dashboard")):f({title:p("host.preview.draftSaveFailedTitle","Failed to save draft"),description:e.error||p("host.preview.draftSaveFailedDesc","Please try again"),variant:"destructive"}),w(!1)},disabled:b||N,children:N?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"mr-2 h-4 w-4 animate-spin"}),p("host.preview.saving","Saving...")]}):p("host.preview.saveDraft","Save as draft")}),e.jsx(d,{onClick:async()=>{j(!0);const e=await u();e.success?(f({title:p("host.preview.publishedTitle","Listing published!"),description:p("host.preview.publishedDesc","Your listing is now live on Le Mboko")}),m("/host/dashboard")):f({title:p("host.preview.publishFailedTitle","Failed to publish"),description:e.error||p("host.preview.publishFailedDesc","Please check all required fields"),variant:"destructive"}),j(!1)},disabled:b||N,size:"lg",children:b?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"mr-2 h-4 w-4 animate-spin"}),p("host.preview.publishing","Publishing...")]}):p("host.preview.publishListing","Publish listing")})]})]}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:p("common.stepOf","Step {{current}} of {{total}}",{current:9,total:9})})]})})};export{m as default};
