import{j as s,L as e}from"./vendor-ui-CAOOb9ur.js";import{r as a,f as t}from"./vendor-react-C_40T_Qy.js";import{n as i,D as n,r,s as o,t as l,af as d,B as c,ag as m}from"./index-CHW3rl59.js";import{T as h}from"./textarea-DUrprI0I.js";import"./vendor-charts-knjLkUkQ.js";import"./vendor-utils-tyqSID0v.js";const p=({isOpen:p,onClose:j,listingId:x,hostId:g,hostName:u})=>{const[v,f]=a.useState(""),[y,C]=a.useState(!1),N=t(),{toast:I}=i();return s.jsx(n,{open:p,onOpenChange:j,children:s.jsxs(r,{className:"sm:max-w-[425px]",children:[s.jsx(o,{children:s.jsxs(l,{children:["Message ",u]})}),s.jsx("div",{className:"grid gap-4 py-4",children:s.jsx(h,{placeholder:`Hi ${u}, I'm interested in your place...`,value:v,onChange:s=>f(s.target.value),className:"min-h-[100px]"})}),s.jsxs(d,{children:[s.jsx(c,{variant:"outline",onClick:j,disabled:y,children:"Cancel"}),s.jsx(c,{onClick:async()=>{if(v.trim()){C(!0);try{const s=await m(x,g,v);I({title:"Message sent",description:"Your message has been sent to the host."}),j(),N(`/messages?conversationId=${s.conversation_id}`)}catch(s){I({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}finally{C(!1)}}},disabled:!v.trim()||y,children:y?s.jsx(e,{className:"h-4 w-4 animate-spin"}):"Send Message"})]})]})})};export{p as default};
