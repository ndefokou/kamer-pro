import{au as e,j as s,o as t,l as a,u as r,av as l,c as i,C as n,e as o,k as d,T as c,n as m,m as x,O as h,aw as g,ax as u,ay as p,z as f,H as j,az as y,aA as N,A as b}from"./vendor-ui-DcvuiMJW.js";import{r as v,e as w,L as D}from"./vendor-react-CPc5zwff.js";import{c as A,b as k,u as _,a5 as L,B as C,n as R,G as S,a7 as H}from"./index-DwPe7WlF.js";import{O as $}from"./OptimizedImage-DunbvjKP.js";import{H as z}from"./HostHeader-D1oiQyeE.js";import{u as O}from"./useTranslation-BptfK32d.js";import"./vendor-charts-CNjKuHaK.js";import"./vendor-utils-tyqSID0v.js";import"./avatar-B5sUQZ8R.js";import"./sheet-Cjy6RLcH.js";import"./LanguageSwitcher-kkyV-vkk.js";import"./index-B9HPLTtY.js";var T="AlertDialog",[P]=i(T,[e]),U=e(),q=e=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(t,{...l,...r,modal:!0})};q.displayName=T;v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(g,{...l,...r,ref:t})}).displayName="AlertDialogTrigger";var B=e=>{const{__scopeAlertDialog:t,...r}=e,l=U(t);return s.jsx(a,{...l,...r})};B.displayName="AlertDialogPortal";var F=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(h,{...l,...r,ref:t})});F.displayName="AlertDialogOverlay";var I="AlertDialogContent",[M,E]=P(I),W=d("AlertDialogContent"),Y=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:i,...d}=e,c=U(a),m=v.useRef(null),x=r(t,m),h=v.useRef(null);return s.jsx(l,{contentName:I,titleName:G,docsSlug:"alert-dialog",children:s.jsx(M,{scope:a,cancelRef:h,children:s.jsxs(n,{role:"alertdialog",...c,...d,ref:x,onOpenAutoFocus:o(d.onOpenAutoFocus,e=>{var s;e.preventDefault(),null==(s=h.current)||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[s.jsx(W,{children:i}),s.jsx(ee,{contentRef:m})]})})})});Y.displayName=I;var G="AlertDialogTitle",K=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(c,{...l,...r,ref:t})});K.displayName=G;var V="AlertDialogDescription",X=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(m,{...l,...r,ref:t})});X.displayName=V;var J=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...r}=e,l=U(a);return s.jsx(x,{...l,...r,ref:t})});J.displayName="AlertDialogAction";var Q="AlertDialogCancel",Z=v.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...l}=e,{cancelRef:i}=E(Q,a),n=U(a),o=r(t,i);return s.jsx(x,{...n,...l,ref:o})});Z.displayName=Q;var ee=({contentRef:e})=>{const s=`\`${I}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${I}\` by passing a \`${V}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${I}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return v.useEffect(()=>{var s;document.getElementById(null==(s=e.current)?void 0:s.getAttribute("aria-describedby"))},[s,e]),null},se=F,te=Y,ae=J,re=Z,le=K,ie=X;const ne=q,oe=B,de=v.forwardRef(({className:e,...t},a)=>s.jsx(se,{className:A("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:a}));de.displayName=se.displayName;const ce=v.forwardRef(({className:e,...t},a)=>s.jsxs(oe,{children:[s.jsx(de,{}),s.jsx(te,{ref:a,className:A("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));ce.displayName=te.displayName;const me=({className:e,...t})=>s.jsx("div",{className:A("flex flex-col space-y-2 text-center sm:text-left",e),...t});me.displayName="AlertDialogHeader";const xe=({className:e,...t})=>s.jsx("div",{className:A("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});xe.displayName="AlertDialogFooter";const he=v.forwardRef(({className:e,...t},a)=>s.jsx(le,{ref:a,className:A("text-lg font-semibold",e),...t}));he.displayName=le.displayName;const ge=v.forwardRef(({className:e,...t},a)=>s.jsx(ie,{ref:a,className:A("text-sm text-muted-foreground",e),...t}));ge.displayName=ie.displayName;const ue=v.forwardRef(({className:e,...t},a)=>s.jsx(ae,{ref:a,className:A(k(),e),...t}));ue.displayName=ae.displayName;const pe=v.forwardRef(({className:e,...t},a)=>s.jsx(re,{ref:a,className:A(k({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));pe.displayName=re.displayName;const fe=()=>{const e=w(),{t:t}=O(),{user:a,logout:r}=_(),{resetDraft:l}=L(),[i,n]=v.useState([]),[o,d]=v.useState(!0),[c,m]=v.useState(""),[x,h]=v.useState(!1),[g,A]=v.useState(!1),[k,T]=v.useState(null),[P,U]=v.useState(!1);(e=>{const s=null==e?void 0:e.trim();if(!s)return"AD";const t=s.split(/\s+/);1===t.length?s.slice(0,2).toUpperCase():(t[0][0]+t[1][0]).toUpperCase()})((null==a?void 0:a.username)||""||"User"),v.useEffect(()=>{let e=!0;return a?((async()=>{try{d(!0);const s=await S.get("/listings/my-listings",{params:{limit:20}});if(!e)return;n(s.data),s.data.length>0&&m(s.data[0].listing.id)}catch(s){if(!e)return}finally{e&&d(!1)}})(),()=>{e=!1}):(n([]),void d(!1))},[a]);const q=()=>{a?(l(),e("/host/intro")):e("/login?redirect=/host/intro")},B=e=>{T(e),A(!0)},F=i.some(e=>"draft"===e.listing.status||"pending"===e.listing.status);return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(z,{}),s.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8 pb-24 md:pb-12",children:[F&&s.jsx("div",{className:"mb-8 bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(u,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:t("host.dashboard.confirmDetailsTitle","Confirm a few key details")}),s.jsx("p",{className:"text-sm text-gray-600",children:t("host.dashboard.confirmDetailsDesc","Required to publish.")})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:t("host.dashboard.yourListing","Your listing")}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(p,{className:"h-5 w-5 text-gray-700"})}),s.jsx("button",{onClick:q,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(f,{className:"h-5 w-5 text-gray-700"})})]})]}),o?s.jsx("div",{className:"text-center py-16 text-gray-500",children:t("host.dashboard.loading","Loading listings...")}):0===i.length?s.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-200",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4 mx-auto",children:s.jsx(j,{className:"h-8 w-8 text-gray-400"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900",children:t("host.dashboard.noListings","No listings yet")}),s.jsx("p",{className:"text-gray-500 mb-8 max-w-sm mx-auto",children:t("host.dashboard.noListingsHelp","Create your first listing to start hosting and earning income.")}),s.jsx(C,{onClick:q,className:"bg-green-600 hover:bg-green-700 text-white rounded-full px-8 py-6 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:t("host.dashboard.createListing","Create Listing")})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"md:hidden grid grid-cols-1 gap-4",children:i.map(a=>{var r,l;return s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all cursor-pointer active:scale-[0.99] relative",onClick:()=>{m(a.listing.id),e(`/host/editor/${a.listing.id}`)},children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),B(a.listing.id)},className:"absolute top-3 right-3 p-2 rounded-full hover:bg-red-50 text-red-600","aria-label":t("host.dashboard.delete","Delete"),children:s.jsx(y,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-24 w-24 rounded-xl overflow-hidden flex-shrink-0 bg-gray-100 shadow-inner",children:(null==(l=null==(r=a.photos)?void 0:r[0])?void 0:l.url)?s.jsx($,{src:R(a.photos[0].url),alt:a.listing.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:s.jsx(j,{className:"h-8 w-8"})})}),s.jsx("div",{className:"flex-1 min-w-0 py-1",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("div",{className:"font-semibold text-gray-900 truncate text-lg",children:a.listing.title||t("host.dashboard.untitled","Untitled Listing")}),s.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[a.listing.property_type||t("home","Home"),a.listing.city?` Â· ${a.listing.city}`:""]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"h-2 w-2 rounded-full "+("published"===a.listing.status?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]":"draft"===a.listing.status?"bg-gray-300":"bg-yellow-500")}),s.jsx("span",{className:"text-xs font-medium text-gray-600",children:"draft"===a.listing.status?t("host.dashboard.status.draft","Draft"):"published"===a.listing.status?t("host.dashboard.status.published","Published"):t("host.dashboard.status.pending","Pending")})]})]})}),s.jsx("div",{className:"text-gray-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]},a.listing.id)})}),s.jsx("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[700px]",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("host.dashboard.table.listing","Listing")}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("host.dashboard.table.type","Type")}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("host.dashboard.table.location","Location")}),s.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("host.dashboard.table.status","Status")}),s.jsx("th",{className:"text-right py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:t("host.dashboard.table.actions","Actions")})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(a=>{var r,l;return s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{m(a.listing.id),e(`/host/editor/${a.listing.id}`)},children:[s.jsx("td",{className:"py-5 px-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-16 w-20 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100",children:(null==(l=null==(r=a.photos)?void 0:r[0])?void 0:l.url)?s.jsx($,{src:R(a.photos[0].url),alt:a.listing.title,className:"h-full w-full object-cover"}):s.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:s.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsx("div",{className:"flex flex-col min-w-0",children:s.jsx("span",{className:"font-medium text-gray-900 truncate",children:a.listing.title||t("host.dashboard.untitled","Untitled Listing")})})]})}),s.jsx("td",{className:"py-5 px-6 text-sm text-gray-700",children:a.listing.property_type||t("home","Home")}),s.jsx("td",{className:"py-5 px-6 text-sm text-gray-700",children:a.listing.city&&a.listing.country?`${a.listing.city}, ${a.listing.country}`:s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx("td",{className:"py-5 px-6",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"h-2 w-2 rounded-full "+("published"===a.listing.status?"bg-green-500":"draft"===a.listing.status?"bg-red-500":"bg-yellow-500")}),s.jsx("span",{className:"text-sm text-gray-700",children:"draft"===a.listing.status?t("host.dashboard.status.actionRequired","Action required"):"published"===a.listing.status?t("host.dashboard.status.published","Published"):t("host.dashboard.status.pending","Pending")})]})}),s.jsx("td",{className:"py-5 px-6 text-right",children:s.jsxs("button",{onClick:e=>{e.stopPropagation(),B(a.listing.id)},className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700",children:[s.jsx(y,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:t("common.delete","Delete")})]})})]},a.listing.id)})})]})})})]})]}),s.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 bg-white/90 backdrop-blur-lg border-t border-gray-200 pb-safe transition-all duration-300",children:s.jsx("div",{className:"max-w-md mx-auto px-6",children:s.jsxs("ul",{className:"grid grid-cols-4 h-16",children:[s.jsx("li",{className:"flex items-center justify-center",children:s.jsxs(D,{to:"/host/reservations",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[s.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:s.jsx(N,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),s.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.reservations","reservations")})]})}),s.jsx("li",{className:"flex items-center justify-center",children:s.jsxs(D,{to:"/host/calendar",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[s.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:s.jsx(b,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),s.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.calendar","Calendar")})]})}),s.jsx("li",{className:"flex items-center justify-center",children:s.jsxs(D,{to:"/host/dashboard",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[s.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform",children:s.jsx(p,{className:"h-6 w-6 text-primary fill-current"})}),s.jsx("span",{className:"text-[10px] font-medium text-primary",children:t("nav.listings","Listings")})]})}),s.jsx("li",{className:"flex items-center justify-center",children:s.jsxs(D,{to:"/messages?view=host",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[s.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:s.jsx(u,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),s.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.messages","Messages")})]})})]})})}),s.jsx(ne,{open:g,onOpenChange:e=>{e||(A(!1),T(null))},children:s.jsxs(ce,{children:[s.jsxs(me,{children:[s.jsx(he,{children:t("host.dashboard.deleteListingTitle","Delete listing?")}),s.jsx(ge,{children:t("host.dashboard.deleteListingDesc","This action cannot be undone. This will permanently delete your listing and remove related data.")})]}),s.jsxs(xe,{children:[s.jsx(pe,{disabled:P,children:t("common.cancel","Cancel")}),s.jsx(ue,{onClick:async()=>{if(k)try{U(!0),await H(k),n(e=>{var s;const t=e.filter(e=>e.listing.id!==k);return c===k&&m((null==(s=t[0])?void 0:s.listing.id)||""),t})}catch(e){}finally{U(!1),A(!1),T(null)}},disabled:P,className:"bg-red-600 hover:bg-red-700",children:P?t("common.deleting","Deleting..."):t("common.delete","Delete")})]})]})})]})};export{fe as default};
