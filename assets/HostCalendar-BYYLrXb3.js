import{j as e,r as n,X as T,B as H,p as ge,z as pe,ab as C,E as be,H as Q}from"./index-BumHlSai.js";import{A as Z,a as ee,b as se}from"./avatar-BcTl2A0a.js";import{S as fe,a as ye,b as ve,c as je,d as Ne,f as we,e as Se,L as ke}from"./sheet-CXl9c71X.js";import{O as Ce}from"./OptimizedImage-xP7m_j1R.js";import{L as te}from"./Loading-wlpE3RCN.js";import{S as _e}from"./switch-BdtagMFD.js";import{I as ae}from"./input-Ct3vV0ca.js";import{C as A}from"./chevron-down-CeatZl6_.js";import{u as De}from"./useTranslation-DUME4FCN.js";import{M as Me}from"./menu-CwDdBYwq.js";import{P as Ae}from"./plus-zj-BiCMM.js";import{C as Pe}from"./calendar-B4NFKoEL.js";import{G as $e}from"./grid-3x3-BMs6gCgl.js";import{M as Le}from"./mail-BqVaG6XR.js";import"./index-Bnp7XLmy.js";const Fe=({month:d,pricingData:t,selectedDates:P,onDateSelect:o,basePrice:c})=>{const j=()=>{const l=d.getFullYear(),x=d.getMonth(),h=new Date(l,x,1),m=new Date(l,x+1,0).getDate(),g=h.getDay(),f=[];for(let S=0;S<g;S++)f.push(null);for(let S=1;S<=m;S++)f.push(new Date(l,x,S));return f},p=l=>l.toISOString().split("T")[0],y=l=>{const x=p(l),h=t.get(x);return(h==null?void 0:h.price)||c},a=l=>{const x=p(l),h=t.get(x);return(h==null?void 0:h.is_available)!==!1},w=l=>{const x=p(l);return P.includes(x)},_=l=>{const x=new Date;return x.setHours(0,0,0,0),l<x},b=j(),L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900",children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:L.map(l=>e.jsx("div",{className:"text-center text-[10px] uppercase font-semibold text-gray-400 py-2",children:l},l))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:b.map((l,x)=>{if(!l)return e.jsx("div",{className:"aspect-square"},`empty-${x}`);const h=p(l),v=y(l),m=a(l),g=w(l),f=_(l);return e.jsxs("button",{onClick:()=>!f&&o(h),disabled:f,className:`
                                aspect-square p-1 sm:p-2 text-left transition-all relative rounded-xl border flex flex-col justify-between overflow-hidden
                                ${!f&&"hover:border-black hover:shadow-sm cursor-pointer"}
                                ${f?"opacity-40 cursor-not-allowed border-gray-100 bg-gray-50":""}
                                ${g?"border-2 border-black bg-gray-900 text-white z-10":"border-gray-200 bg-white"}
                                ${!m&&!f&&!g?"bg-gray-50 border-gray-200":""}
                            `,children:[e.jsx("span",{className:`text-xs font-medium ${g?"text-white":f?"text-gray-400":"text-gray-900"}`,children:l.getDate()}),!f&&e.jsx("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:e.jsxs("span",{className:`text-[10px] sm:text-xs font-medium truncate w-full text-center ${g?"text-white":m?"text-gray-700":"text-gray-400 line-through"}`,children:["$",v]})})]},h)})})]})},Ie=({settings:d,onClose:t,onSave:P})=>{const[o,c]=n.useState(d.base_price||0),[j,p]=n.useState(d.weekend_price||0),[y,a]=n.useState(!!d.weekend_price),[w,_]=n.useState(d.smart_pricing_enabled===1),[b,L]=n.useState(d.weekly_discount||0),[l,x]=n.useState(d.monthly_discount||0),h=()=>{P({base_price:o,weekend_price:y?j:void 0,smart_pricing_enabled:w?1:0,weekly_discount:b,monthly_discount:l})},v=Math.round(o*(1-b/100)),m=Math.round(o*(1-l/100));return e.jsxs("div",{className:"bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Price settings"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-6",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"These apply to all nights, unless you customize them by date."}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Base price"}),e.jsx("span",{className:"text-sm text-gray-600",children:"FCFA"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Per night"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"}),e.jsx("input",{type:"number",value:o===0?"":o,onChange:g=>c(Number(g.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-28 focus:outline-none focus:ring-0"})]})]})]}),y?e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"Custom weekend price"}),e.jsx("button",{onClick:()=>a(!1),className:"text-sm font-semibold underline hover:text-gray-600",children:"Remove"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-3xl font-semibold",children:"FCFA"}),e.jsx("input",{type:"number",value:j===0?"":j,onChange:g=>p(Number(g.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-28 focus:outline-none focus:ring-0"})]})]}):e.jsx("button",{onClick:()=>{a(!0),p(o)},className:"w-full border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors text-left",children:e.jsx("span",{className:"text-sm font-semibold",children:"Add custom weekend price"})}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 flex items-center justify-between hover:border-gray-900 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Smart Pricing"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Automatically adjust prices"})]}),e.jsx(_e,{checked:w,onCheckedChange:_})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Discounts"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Adjust your pricing to attract more guests."}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 mb-3 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:"Weekly"}),e.jsx("p",{className:"text-xs text-gray-600",children:"For 7 nights or more"})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("input",{type:"number",value:b===0?"":b,onChange:g=>L(Number(g.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",min:"0",max:"100"}),e.jsx("span",{className:"text-3xl font-semibold",children:"%"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Weekly average is ",v," FCFA"]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"font-semibold text-sm mb-1",children:"Monthly"}),e.jsx("p",{className:"text-xs text-gray-600",children:"For 28 nights or more"})]}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("input",{type:"number",value:l===0?"":l,onChange:g=>x(Number(g.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 w-20 focus:outline-none focus:ring-0",min:"0",max:"100"}),e.jsx("span",{className:"text-3xl font-semibold",children:"%"})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:["Monthly average is ",m," FCFA"]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-white",children:e.jsx(H,{onClick:h,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-lg font-semibold",children:"Save"})})]})},Te=({settings:d,onClose:t,onSave:P})=>{const[o,c]=n.useState(d.min_nights),[j,p]=n.useState(d.max_nights),[y,a]=n.useState(d.advance_notice==="same_day"?0:parseInt(d.advance_notice.split("_")[0])||1),[w,_]=n.useState(d.same_day_cutoff_time||"12:00"),[b,L]=n.useState(d.preparation_time),[l,x]=n.useState(d.availability_window),h=()=>{const m=y===0?"same_day":`${y}_day${y>1?"s":""}`;P({min_nights:o,max_nights:j,advance_notice:m,same_day_cutoff_time:w,preparation_time:b,availability_window:l})},v=Array.from({length:24},(m,g)=>`${g.toString().padStart(2,"0")}:00`);return e.jsxs("div",{className:"bg-white h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 py-6 flex items-center justify-between border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Availability"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 pb-6 space-y-8 pt-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Trip length"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Minimum nights"}),e.jsx(ae,{type:"number",value:o,onChange:m=>c(Number(m.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 h-auto w-20 focus-visible:ring-0",min:1})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-2",children:"Maximum nights"}),e.jsx(ae,{type:"number",value:j,onChange:m=>p(Number(m.target.value)),className:"text-3xl font-semibold border-none bg-transparent p-0 h-auto w-24 focus-visible:ring-0",min:1})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Advance notice"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How much notice do you need between a guest's booking and their arrival?"}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:"Days"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:y,onChange:m=>a(Number(m.target.value)),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:0,children:"Same day"}),e.jsx("option",{value:1,children:"1 day"}),e.jsx("option",{value:2,children:"2 days"}),e.jsx("option",{value:3,children:"3 days"}),e.jsx("option",{value:4,children:"4 days"}),e.jsx("option",{value:5,children:"5 days"}),e.jsx("option",{value:6,children:"6 days"}),e.jsx("option",{value:7,children:"7 days"})]}),e.jsx(A,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})]}),e.jsxs("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-3",children:"Time"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:w,onChange:m=>_(m.target.value),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:v.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsx(A,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Guests can book on the same day as check-in until this time."})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Preparation time"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Block time before and after each reservation to prepare your space."}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:b,onChange:m=>L(m.target.value),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"1_night",children:"1 night before and after each reservation"}),e.jsx("option",{value:"2_nights",children:"2 nights before and after each reservation"})]}),e.jsx(A,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Availability window"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How far in advance can guests book?"}),e.jsx("div",{className:"border border-gray-300 rounded-xl p-4 hover:border-gray-900 transition-colors",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:m=>x(Number(m.target.value)),className:"w-full text-base font-medium bg-transparent border-none focus:outline-none focus:ring-0 appearance-none pr-8 cursor-pointer",children:[e.jsx("option",{value:3,children:"3 months in advance"}),e.jsx("option",{value:6,children:"6 months in advance"}),e.jsx("option",{value:9,children:"9 months in advance"}),e.jsx("option",{value:12,children:"12 months in advance"}),e.jsx("option",{value:24,children:"24 months in advance"})]}),e.jsx(A,{className:"h-5 w-5 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4 bg-white",children:e.jsx(H,{onClick:h,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-lg font-semibold",children:"Save"})})]})},Ze=()=>{var K;const d=ge(),{t}=De(),[P]=pe(),o=P.get("listing")||"",[c,j]=n.useState([]),[p,y]=n.useState(new Map),[a,w]=n.useState(null),[_,b]=n.useState("default"),[L,l]=n.useState(!1),[x,h]=n.useState(new Date),[v,m]=n.useState(new Date().getFullYear()),[g,f]=n.useState(!0),[S,z]=n.useState(!1),[F,re]=n.useState(0),[Y,U]=n.useState(0),[ne,E]=n.useState(!1),[le,O]=n.useState(!1),[W,ie]=n.useState([]),[oe,G]=n.useState(!1),R=localStorage.getItem("username")||"",V=(s=>{const r=s==null?void 0:s.trim();if(!r)return"AD";const i=r.split(/\s+/);return i.length===1?r.slice(0,2).toUpperCase():(i[0][0]+i[1][0]).toUpperCase()})(R||"User"),[I,q]=n.useState(1),X=n.useCallback(async()=>{var s;try{const i=((s=(await C.get(`/listings/${o}`)).data.listing)==null?void 0:s.price_per_night)||0;re(i)}catch(r){console.error("Failed to fetch listing price:",r)}},[o]),$=n.useCallback(async()=>{const s=new Date(v,0,1),r=new Date(v+1,11,31);try{const i=await C.get(`/calendar/${o}`,{params:{start_date:s.toISOString().split("T")[0],end_date:r.toISOString().split("T")[0]}}),u=new Map;i.data.forEach(M=>{u.set(M.date,M)}),y(u)}catch(i){console.error("Failed to fetch calendar data:",i)}finally{f(!1)}},[o,v]),B=n.useCallback(async()=>{try{const s=await C.get(`/calendar/${o}/settings`);w(s.data)}catch(s){console.error("Failed to fetch settings:",s)}},[o]);n.useEffect(()=>{(async()=>{G(!0);try{const r=await C.get("/listings/my-listings"),i=Array.isArray(r.data)?r.data:[];if(ie(i),!o){i.length===0&&d("/host/dashboard");return}if(!i.some(M=>{var N;return((N=M.listing)==null?void 0:N.id)===o})){console.warn("Selected listing does not belong to current user. Redirecting to picker."),d("/host/calendar");return}await Promise.all([X(),$(),B()])}catch(r){console.error("Failed to initialize calendar:",r),d("/host/dashboard")}finally{G(!1)}})()},[o,d,X,$,B]),n.useEffect(()=>{o&&(f(!0),$())},[v,o,$]),n.useEffect(()=>{j([]),y(new Map),w(null),U(0)},[o]);const ce=s=>{var i;j(u=>u.includes(s)?u.filter(M=>M!==s):[...u,s]);const r=((i=p.get(s))==null?void 0:i.price)||(a==null?void 0:a.base_price)||F;U(r),E(!1)},J=async()=>{if(c.length===0||S)return;if(W.length>0&&!W.some(N=>{var k;return((k=N.listing)==null?void 0:k.id)===o})){console.warn("Refusing to update availability for a listing not owned by current user");return}const r=!c.every(N=>{const k=p.get(N);return(k==null?void 0:k.is_available)??!0}),i=new Map(p),u=new Map(p),M=(a==null?void 0:a.base_price)||F||0;c.forEach(N=>{const k=u.get(N);k?u.set(N,{...k,is_available:r}):u.set(N,{id:-1,listing_id:o,date:N,price:M,is_available:r})}),y(u),z(!0);try{await C.put(`/calendar/${o}/dates`,{dates:c,is_available:r}),await $()}catch(N){console.error("Failed to update availability:",N),y(i)}finally{z(!1)}},de=async s=>{if(c.length!==0)try{await C.put(`/calendar/${o}/dates`,{dates:c,price:s}),await $(),U(s)}catch(r){console.error("Failed to update price:",r)}},me=async()=>{if(c.length!==0)try{await C.put(`/calendar/${o}/dates`,{dates:c,price:Y}),await $(),E(!1)}catch(s){console.error("Failed to save custom settings:",s)}},xe=()=>{const s=[],r=v;for(let i=r;i<r+2;i++)for(let u=0;u<12;u++)s.push(new Date(i,u,1));return s},he=s=>{const r=new Date(v,s,1);h(r);const i=`month-${v}-${s}`,u=document.getElementById(i);u&&u.scrollIntoView({behavior:"smooth",block:"start"})},ue=s=>{m(s);const r=new Date(s,0,1);h(r),setTimeout(()=>{const i=document.getElementById(`month-${s}-0`);i&&i.scrollIntoView({behavior:"smooth",block:"start"})},100)};c.length>0&&c.length===1?(K=p.get(c[0]))!=null&&K.price||a!=null&&a.base_price:a!=null&&a.base_price;const D=c.length>0?c.every(s=>{var r;return((r=p.get(s))==null?void 0:r.is_available)??!0}):!0;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0 z-50 pt-safe",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 md:h-20 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("div",{className:"text-green-600 font-bold text-xl cursor-pointer",onClick:()=>d("/"),children:"Le Mboko"}),e.jsxs("nav",{className:"hidden md:flex gap-8 text-sm font-medium",children:[e.jsx("a",{href:"/host/reservations",className:"text-gray-600 hover:text-gray-900 transition-colors",children:t("nav.reservations","reservations")}),e.jsxs("a",{href:"/host/calendar",className:"text-gray-900 font-semibold relative pb-6",children:[t("nav.calendar","Calendar"),e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gray-900"})]}),e.jsx("a",{href:"/host/dashboard",className:"text-gray-600 hover:text-gray-900 transition-colors",children:t("nav.listings","Listings")}),e.jsx("a",{href:"#",className:"text-gray-600 hover:text-gray-900 transition-colors",children:t("nav.messages","Messages")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{variant:"ghost",className:"text-sm font-medium hover:bg-gray-100 rounded-full px-4",onClick:()=>d("/"),children:t("host.header.switchToTraveling","Switch to traveling")}),e.jsxs(fe,{open:le,onOpenChange:O,children:[e.jsx(ye,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3 border border-gray-300 rounded-full py-1.5 px-3 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(Me,{className:"h-4 w-4 text-gray-700"}),e.jsxs(Z,{className:"h-8 w-8",children:[e.jsx(ee,{src:"/placeholder-user.jpg"}),e.jsx(se,{className:"bg-gray-700 text-white text-xs",children:V})]})]})}),e.jsxs(ve,{side:"right",className:"w-[360px] sm:w-[420px]",children:[e.jsxs(je,{children:[e.jsx(Ne,{children:t("common.menu","Menu")}),e.jsx(we,{})]}),e.jsxs("div",{className:"mt-6 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b",children:[e.jsxs(Z,{className:"h-10 w-10",children:[e.jsx(ee,{src:"/placeholder-user.jpg"}),e.jsx(se,{className:"bg-gray-700 text-white text-sm",children:V})]}),e.jsx("div",{className:"font-semibold text-gray-900",children:R||"User"})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100",onClick:()=>{O(!1),d("/account")},children:[e.jsx(Se,{className:"h-5 w-5"}),e.jsx("span",{children:t("account.settings","Account settings")})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100",onClick:()=>{O(!1),d("/host/intro")},children:[e.jsx(Ae,{className:"h-5 w-5"}),e.jsx("span",{children:t("host.header.createListing","Create a new listing")})]}),e.jsx("div",{className:"pt-3 mt-2 border-t",children:e.jsxs("button",{className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 text-red-600",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userId"),localStorage.removeItem("email"),O(!1),d("/")},children:[e.jsx(ke,{className:"h-5 w-5"}),e.jsx("span",{children:t("auth.logout","Log out")})]})})]})]})]})]})]})}),e.jsx("main",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 pb-24 md:pb-12",children:o?e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("select",{value:x.getFullYear(),onChange:s=>ue(Number(s.target.value)),className:"text-3xl font-bold bg-transparent border-none cursor-pointer pr-8 focus:outline-none appearance-none hover:text-gray-600 transition-colors",children:Array.from({length:5},(s,r)=>new Date().getFullYear()+r).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(A,{className:"h-6 w-6 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("select",{value:x.getMonth(),onChange:s=>he(Number(s.target.value)),className:"text-3xl font-bold bg-transparent border-none cursor-pointer pr-8 focus:outline-none appearance-none hover:text-gray-600 transition-colors",children:Array.from({length:12},(s,r)=>r).map(s=>e.jsx("option",{value:s,children:new Date(0,s).toLocaleString("default",{month:"long"})},s))}),e.jsx(A,{className:"h-6 w-6 text-gray-400 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none group-hover:text-gray-600 transition-colors"})]})]}),e.jsx("div",{children:e.jsx(H,{variant:"outline",className:"rounded-full border-gray-300",onClick:()=>d("/host/calendar"),children:t("host.calendar.changeListing","Change listing")})})]}),g?e.jsx(te,{message:t("host.calendar.loading","Loading calendar...")}):e.jsx("div",{className:"space-y-12",children:xe().map((s,r)=>{const i=`month-${s.getFullYear()}-${s.getMonth()}`;return e.jsx("div",{id:i,children:e.jsx(Fe,{month:s,pricingData:p,selectedDates:c,onDateSelect:ce,basePrice:(a==null?void 0:a.base_price)||F})},i)})})]}),e.jsx("div",{className:"lg:w-80 w-full",children:e.jsx("div",{className:"lg:sticky lg:top-24 space-y-4 lg:h-[calc(100vh-8rem)] lg:overflow-y-auto no-scrollbar",children:c.length>0?e.jsx(e.Fragment,{children:ne?e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:c.length===1?new Date(c[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${c.length} dates`}),e.jsx("button",{onClick:()=>E(!1),className:"p-1 hover:bg-gray-800 rounded-full",children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"text-sm font-medium mb-4",children:t("host.calendar.customSettings","Custom settings")}),e.jsx("div",{className:"bg-gray-800 rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t("host.calendar.minNights","Minimum nights")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:s=>{s.stopPropagation(),q(I>1?I-1:1)},className:"w-8 h-8 rounded-full border border-gray-600 hover:border-white transition-colors flex items-center justify-center",disabled:I<=1,children:e.jsx("span",{className:"text-lg",children:"âˆ’"})}),e.jsx("span",{className:"text-base font-medium w-8 text-center",children:I}),e.jsx("button",{onClick:s=>{s.stopPropagation(),q(I+1)},className:"w-8 h-8 rounded-full border border-gray-600 hover:border-white transition-colors flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"+"})})]})]})}),e.jsx("button",{onClick:me,className:"w-full bg-white text-gray-900 hover:bg-gray-100 rounded-lg px-4 py-3 transition-colors font-medium",children:t("common.done","Done")})]}):e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:c.length===1?new Date(c[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${c.length} dates`})}),e.jsx("button",{onClick:()=>j([]),className:"p-1 hover:bg-gray-800 rounded-full",children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm font-medium",children:t("host.calendar.available","Available")}),e.jsx("button",{onClick:J,disabled:S,className:`w-12 h-6 rounded-full transition-colors ${D?"bg-green-500":"bg-red-500"}`,"aria-pressed":D,"aria-label":D?t("host.calendar.available","Available"):t("host.calendar.unavailable","Unavailable"),children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transition-transform ${D?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:t("host.calendar.price","Price")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold",children:"$"}),e.jsx("input",{type:"number",value:Y,onChange:s=>U(Number(s.target.value)),onBlur:()=>de(Y),className:"text-2xl font-semibold bg-transparent border-none text-white w-24 focus:outline-none focus:ring-0"})]})]}),e.jsx("button",{onClick:()=>E(!0),className:"w-full bg-gray-800 hover:bg-gray-700 rounded-lg px-4 py-3 transition-colors text-left",children:e.jsx("span",{className:"text-sm font-medium",children:t("host.calendar.customSettings","Custom settings")})})]})}):e.jsx(e.Fragment,{children:_==="price"&&a?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 h-full overflow-hidden",children:e.jsx(Ie,{settings:a,onClose:()=>b("default"),onSave:async s=>{await C.put(`/calendar/${o}/settings`,s),await B(),b("default")}})}):_==="availability"&&a?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 h-full overflow-hidden",children:e.jsx(Te,{settings:a,onClose:()=>b("default"),onSave:async s=>{await C.put(`/calendar/${o}/settings`,s),await B(),b("default")}})}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 space-y-3",children:[e.jsxs("button",{onClick:()=>b("price"),className:"w-full flex items-center justify-between hover:bg-gray-50 rounded-lg p-3 transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t("host.calendar.priceSettings","Price settings")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["$",(a==null?void 0:a.base_price)||F," ",t("host.editor.perNight","per night")]}),(a==null?void 0:a.weekend_price)&&e.jsxs("p",{className:"text-sm text-gray-600",children:["$",a.weekend_price," ",t("host.calendar.weekendPrice","weekend price")]}),(a==null?void 0:a.weekly_discount)&&a.weekly_discount>0&&e.jsxs("p",{className:"text-sm text-gray-600",children:[a.weekly_discount,"% ",t("host.calendar.weeklyDiscount","weekly discount")]})]}),e.jsx(A,{className:"h-5 w-5 text-gray-400 -rotate-90"})]}),e.jsxs("button",{onClick:()=>b("availability"),className:"w-full flex items-center justify-between hover:bg-gray-50 rounded-lg p-3 transition-colors",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t("host.calendar.availabilitySettings","Availability settings")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(a==null?void 0:a.min_nights)||1," - ",(a==null?void 0:a.max_nights)||365," ",t("host.calendar.nightStays","night stays")]}),e.jsx("p",{className:"text-sm text-gray-600",children:t("host.calendar.sameDayNotice","Same-day advance notice")})]}),e.jsx(A,{className:"h-5 w-5 text-gray-400 -rotate-90"})]})]})})})})]}):e.jsxs("div",{className:"py-10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:t("host.calendar.pickListing","Choose a listing")}),e.jsx("p",{className:"text-gray-600",children:t("host.calendar.pickListingHelp","Select a listing to manage its availability")})]}),oe?e.jsx(te,{message:t("common.loading","Loading...")}):W.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(s=>{var r,i;return e.jsxs("button",{onClick:()=>d(`/host/calendar?listing=${s.listing.id}`),className:"text-left bg-white rounded-xl border border-gray-200 hover:shadow-md transition overflow-hidden",children:[e.jsx("div",{className:"h-40 bg-gray-100",children:(i=(r=s.photos)==null?void 0:r[0])!=null&&i.url?e.jsx(Ce,{src:be(s.photos[0].url),alt:s.listing.title||"Listing",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(Q,{className:"h-8 w-8"})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.listing.title||t("host.dashboard.untitled","Untitled Listing")}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:[s.listing.city,s.listing.country].filter(Boolean).join(", ")})]})]},s.listing.id)})}):e.jsx("div",{className:"text-gray-500",children:t("host.calendar.noListings","No listings yet")})]})}),c.length>0&&e.jsx("div",{className:"md:hidden fixed bottom-20 inset-x-0 z-40 px-4",children:e.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm font-medium",children:c.length===1?new Date(c[0]).toLocaleDateString("en-US",{month:"short",day:"numeric"}):`${c.length} dates`})}),e.jsx("button",{onClick:()=>j([]),className:"p-1 hover:bg-gray-800 rounded-full","aria-label":t("common.clear","Clear selection"),children:e.jsx(T,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 mt-1",children:[e.jsx("span",{className:"text-sm font-medium",children:t("host.calendar.available","Available")}),e.jsx("button",{onClick:J,className:`w-12 h-6 rounded-full transition-colors ${D?"bg-green-500":"bg-red-500"}`,"aria-pressed":D,"aria-label":D?t("host.calendar.available","Available"):t("host.calendar.unavailable","Unavailable"),children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transition-transform ${D?"translate-x-6":"translate-x-0.5"}`})})]})]})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 bg-white/90 backdrop-blur-lg border-t border-gray-200 pb-safe transition-all duration-300",children:e.jsx("div",{className:"max-w-md mx-auto px-6",children:e.jsxs("ul",{className:"grid grid-cols-4 h-16",children:[e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/reservations",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(Q,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.reservations","reservations")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/calendar",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform",children:e.jsx(Pe,{className:"h-6 w-6 text-primary fill-current"})}),e.jsx("span",{className:"text-[10px] font-medium text-primary",children:t("nav.calendar","Calendar")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/dashboard",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx($e,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.listings","Listings")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"#",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(Le,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:t("nav.messages","Messages")})]})})]})})})]})};export{Ze as default};
