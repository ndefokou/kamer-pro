import{O as he,aG as O,j as e,aH as pe,r as l,aI as me,f as T,aJ as ue,d as fe,aK as ye,g as je,aL as Ne,aM as be,aN as ve,aO as E,aP as we,aQ as De,c as h,b as M,p as Ae,q as Ce,aD as ke,H as k,B as Le,E as L,ab as Re,aR as _e}from"./index-BumHlSai.js";import{O as R}from"./OptimizedImage-xP7m_j1R.js";import{H as Pe}from"./HostHeader-B1_FfEH8.js";import{u as Se}from"./useTranslation-DUME4FCN.js";import{M as _}from"./mail-BqVaG6XR.js";import{G as P}from"./grid-3x3-BMs6gCgl.js";import{P as Oe}from"./plus-zj-BiCMM.js";import{B as Te}from"./book-open-TNSLc733.js";import{C as Ee}from"./calendar-B4NFKoEL.js";import"./avatar-BcTl2A0a.js";import"./sheet-CXl9c71X.js";import"./LanguageSwitcher-B49yhAFl.js";import"./index-BcTPR2G6.js";import"./chevron-right-Cey3u9Ra.js";import"./check-Cw4ObBPz.js";import"./chevron-left-BgQrOA8v.js";import"./menu-CwDdBYwq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=he("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);var $="AlertDialog",[Me]=fe($,[O]),c=O(),H=a=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(pe,{...i,...r,modal:!0})};H.displayName=$;var $e="AlertDialogTrigger",He=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,o=c(r);return e.jsx(De,{...o,...i,ref:s})});He.displayName=$e;var Ie="AlertDialogPortal",I=a=>{const{__scopeAlertDialog:s,...r}=a,i=c(s);return e.jsx(me,{...i,...r})};I.displayName=Ie;var Ue="AlertDialogOverlay",U=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,o=c(r);return e.jsx(we,{...o,...i,ref:s})});U.displayName=Ue;var f="AlertDialogContent",[ze,Be]=Me(f),Fe=Ne("AlertDialogContent"),z=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,children:i,...o}=a,g=c(r),x=l.useRef(null),N=T(s,x),u=l.useRef(null);return e.jsx(ue,{contentName:f,titleName:B,docsSlug:"alert-dialog",children:e.jsx(ze,{scope:r,cancelRef:u,children:e.jsxs(ye,{role:"alertdialog",...g,...o,ref:N,onOpenAutoFocus:je(o.onOpenAutoFocus,p=>{var m;p.preventDefault(),(m=u.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Fe,{children:i}),e.jsx(Ge,{contentRef:x})]})})})});z.displayName=f;var B="AlertDialogTitle",F=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,o=c(r);return e.jsx(be,{...o,...i,ref:s})});F.displayName=B;var q="AlertDialogDescription",G=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,o=c(r);return e.jsx(ve,{...o,...i,ref:s})});G.displayName=q;var qe="AlertDialogAction",V=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,o=c(r);return e.jsx(E,{...o,...i,ref:s})});V.displayName=qe;var W="AlertDialogCancel",Y=l.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...i}=a,{cancelRef:o}=Be(W,r),g=c(r),x=T(s,o);return e.jsx(E,{...g,...i,ref:x})});Y.displayName=W;var Ge=({contentRef:a})=>{const s=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${q}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var i;document.getElementById((i=a.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},Ve=H,We=I,J=U,K=z,Q=V,X=Y,Z=F,ee=G;const Ye=Ve,Je=We,se=l.forwardRef(({className:a,...s},r)=>e.jsx(J,{className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:r}));se.displayName=J.displayName;const te=l.forwardRef(({className:a,...s},r)=>e.jsxs(Je,{children:[e.jsx(se,{}),e.jsx(K,{ref:r,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));te.displayName=K.displayName;const ae=({className:a,...s})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",a),...s});ae.displayName="AlertDialogHeader";const re=({className:a,...s})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});re.displayName="AlertDialogFooter";const le=l.forwardRef(({className:a,...s},r)=>e.jsx(Z,{ref:r,className:h("text-lg font-semibold",a),...s}));le.displayName=Z.displayName;const ie=l.forwardRef(({className:a,...s},r)=>e.jsx(ee,{ref:r,className:h("text-sm text-muted-foreground",a),...s}));ie.displayName=ee.displayName;const oe=l.forwardRef(({className:a,...s},r)=>e.jsx(Q,{ref:r,className:h(M(),a),...s}));oe.displayName=Q.displayName;const ne=l.forwardRef(({className:a,...s},r)=>e.jsx(X,{ref:r,className:h(M({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));ne.displayName=X.displayName;const Ke=a=>{const s=a==null?void 0:a.trim();if(!s)return"AD";const r=s.split(/\s+/);return r.length===1?s.slice(0,2).toUpperCase():(r[0][0]+r[1][0]).toUpperCase()},us=()=>{const a=Ae(),{t:s}=Se(),{user:r,logout:i}=Ce(),{resetDraft:o}=ke(),[g,x]=l.useState([]),[N,u]=l.useState(!0),[p,m]=l.useState(""),[Qe,Xe]=l.useState(!1),[de,b]=l.useState(!1),[j,v]=l.useState(null),[w,D]=l.useState(!1),ce=(r==null?void 0:r.username)||"";Ke(ce||"User"),l.useEffect(()=>{let t=!0;const d=async()=>{try{u(!0);const n=await Re.get("/listings/my-listings",{params:{limit:20}});if(!t)return;x(n.data),n.data.length>0&&m(n.data[0].listing.id)}catch(n){if(!t)return;console.error("Failed to fetch listings:",n)}finally{t&&u(!1)}};if(!r){x([]),u(!1);return}return d(),()=>{t=!1}},[r]);const A=()=>{r?(o(),a("/host/intro")):a("/login?redirect=/host/intro")},C=t=>{v(t),b(!0)},ge=async()=>{if(j)try{D(!0),await _e(j),x(t=>{var n;const d=t.filter(y=>y.listing.id!==j);return p===j&&m(((n=d[0])==null?void 0:n.listing.id)||""),d})}catch(t){console.error("Failed to delete listing:",t)}finally{D(!1),b(!1),v(null)}},xe=g.some(t=>t.listing.status==="draft"||t.listing.status==="pending");return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Pe,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8 pb-24 md:pb-12",children:[xe&&e.jsx("div",{className:"mb-8 bg-white border border-gray-200 rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s("host.dashboard.confirmDetailsTitle","Confirm a few key details")}),e.jsx("p",{className:"text-sm text-gray-600",children:s("host.dashboard.confirmDetailsDesc","Required to publish.")})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-semibold text-gray-900",children:s("host.dashboard.yourListing","Your listing")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(P,{className:"h-5 w-5 text-gray-700"})}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Oe,{className:"h-5 w-5 text-gray-700"})})]})]}),N?e.jsx("div",{className:"text-center py-16 text-gray-500",children:s("host.dashboard.loading","Loading listings...")}):g.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-gray-200",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4 mx-auto",children:e.jsx(k,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900",children:s("host.dashboard.noListings","No listings yet")}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-sm mx-auto",children:s("host.dashboard.noListingsHelp","Create your first listing to start hosting and earning income.")}),e.jsx(Le,{onClick:A,className:"bg-green-600 hover:bg-green-700 text-white rounded-full px-8 py-6 text-lg font-semibold shadow-lg hover:shadow-xl transition-all",children:s("host.dashboard.createListing","Create Listing")})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"md:hidden grid grid-cols-1 gap-4",children:g.map(t=>{var d,n;return e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-4 shadow-sm hover:shadow-md transition-all cursor-pointer active:scale-[0.99] relative",onClick:()=>{m(t.listing.id),a(`/host/editor/${t.listing.id}`)},children:[e.jsx("button",{onClick:y=>{y.stopPropagation(),C(t.listing.id)},className:"absolute top-3 right-3 p-2 rounded-full hover:bg-red-50 text-red-600","aria-label":s("host.dashboard.delete","Delete"),children:e.jsx(S,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-24 w-24 rounded-xl overflow-hidden flex-shrink-0 bg-gray-100 shadow-inner",children:(n=(d=t.photos)==null?void 0:d[0])!=null&&n.url?e.jsx(R,{src:L(t.photos[0].url),alt:t.listing.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx(k,{className:"h-8 w-8"})})}),e.jsx("div",{className:"flex-1 min-w-0 py-1",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate text-lg",children:t.listing.title||s("host.dashboard.untitled","Untitled Listing")}),e.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[t.listing.property_type||s("home","Home"),t.listing.city?` Â· ${t.listing.city}`:""]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${t.listing.status==="published"?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]":t.listing.status==="draft"?"bg-gray-300":"bg-yellow-500"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:t.listing.status==="draft"?s("host.dashboard.status.draft","Draft"):t.listing.status==="published"?s("host.dashboard.status.published","Published"):s("host.dashboard.status.pending","Pending")})]})]})}),e.jsx("div",{className:"text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]},t.listing.id)})}),e.jsx("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-[700px]",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:s("host.dashboard.table.listing","Listing")}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:s("host.dashboard.table.type","Type")}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:s("host.dashboard.table.location","Location")}),e.jsx("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:s("host.dashboard.table.status","Status")}),e.jsx("th",{className:"text-right py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:s("host.dashboard.table.actions","Actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(t=>{var d,n;return e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{m(t.listing.id),a(`/host/editor/${t.listing.id}`)},children:[e.jsx("td",{className:"py-5 px-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-20 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100",children:(n=(d=t.photos)==null?void 0:d[0])!=null&&n.url?e.jsx(R,{src:L(t.photos[0].url),alt:t.listing.title,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-300",children:e.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsx("div",{className:"flex flex-col min-w-0",children:e.jsx("span",{className:"font-medium text-gray-900 truncate",children:t.listing.title||s("host.dashboard.untitled","Untitled Listing")})})]})}),e.jsx("td",{className:"py-5 px-6 text-sm text-gray-700",children:t.listing.property_type||s("home","Home")}),e.jsx("td",{className:"py-5 px-6 text-sm text-gray-700",children:t.listing.city&&t.listing.country?`${t.listing.city}, ${t.listing.country}`:e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"py-5 px-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`h-2 w-2 rounded-full ${t.listing.status==="published"?"bg-green-500":t.listing.status==="draft"?"bg-red-500":"bg-yellow-500"}`}),e.jsx("span",{className:"text-sm text-gray-700",children:t.listing.status==="draft"?s("host.dashboard.status.actionRequired","Action required"):t.listing.status==="published"?s("host.dashboard.status.published","Published"):s("host.dashboard.status.pending","Pending")})]})}),e.jsx("td",{className:"py-5 px-6 text-right",children:e.jsxs("button",{onClick:y=>{y.stopPropagation(),C(t.listing.id)},className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:s("common.delete","Delete")})]})})]},t.listing.id)})})]})})})]})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 inset-x-0 z-50 bg-white/90 backdrop-blur-lg border-t border-gray-200 pb-safe transition-all duration-300",children:e.jsx("div",{className:"max-w-md mx-auto px-6",children:e.jsxs("ul",{className:"grid grid-cols-4 h-16",children:[e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/reservations",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(Te,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:s("nav.reservations","reservations")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/calendar",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(Ee,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:s("nav.calendar","Calendar")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/host/dashboard",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform",children:e.jsx(P,{className:"h-6 w-6 text-primary fill-current"})}),e.jsx("span",{className:"text-[10px] font-medium text-primary",children:s("nav.listings","Listings")})]})}),e.jsx("li",{className:"flex items-center justify-center",children:e.jsxs("a",{href:"/messages?view=host",className:"flex flex-col items-center gap-1 group w-full h-full justify-center",children:[e.jsx("div",{className:"p-1.5 rounded-full group-active:scale-95 transition-transform group-hover:bg-gray-100",children:e.jsx(_,{className:"h-6 w-6 text-gray-500 group-hover:text-gray-900 transition-colors"})}),e.jsx("span",{className:"text-[10px] font-medium text-gray-500 group-hover:text-gray-900 transition-colors",children:s("nav.messages","Messages")})]})})]})})}),e.jsx(Ye,{open:de,onOpenChange:t=>{t||(b(!1),v(null))},children:e.jsxs(te,{children:[e.jsxs(ae,{children:[e.jsx(le,{children:s("host.dashboard.deleteListingTitle","Delete listing?")}),e.jsx(ie,{children:s("host.dashboard.deleteListingDesc","This action cannot be undone. This will permanently delete your listing and remove related data.")})]}),e.jsxs(re,{children:[e.jsx(ne,{disabled:w,children:s("common.cancel","Cancel")}),e.jsx(oe,{onClick:ge,disabled:w,className:"bg-red-600 hover:bg-red-700",children:w?s("common.deleting","Deleting..."):s("common.delete","Delete")})]})]})})]})};export{us as default};
