import{j as t}from"./vendor-ui-CAOOb9ur.js";import{R as e}from"./vendor-react-C_40T_Qy.js";import{u as n}from"./useTranslation-DgYtz7Wb.js";const o=({text:o,as:a="span",className:r,langOverride:s})=>{const{i18n:c}=n(),i=(s||c.language||"en").split("-")[0],[l,u]=e.useState(o||void 0);e.useMemo(()=>`${i}::${o||""}`,[i,o]),e.useEffect(()=>{let t=!1;return(async()=>{const e=o||"";if(!e)return void u("");const n=i;try{const o=await async function(t,e,n={}){var o,a,r,s;try{const i=n.source??"auto",l=n.endpoint??(null==(a=null==(o=import.meta)?void 0:o.env)?void 0:a.VITE_TRANSLATE_ENDPOINT)??"/api/translate",u=n.apiKey??(null==(s=null==(r=import.meta)?void 0:r.env)?void 0:s.VITE_TRANSLATE_API_KEY)??void 0,d=n.ttlMs??2592e6;if(!t||!e)return t;const p=function(t,e,n){const o=`${n||"auto"}::${e}::${t}`;let a=0;for(let r=0;r<o.length;r++)a=(a<<5)-a+o.charCodeAt(r),a|=0;return`lt_cache_${a}`}(t,e,i),f=Date.now();try{const t=localStorage.getItem(p);if(t){const{v:e,exp:n}=JSON.parse(t);if(!n||n>f)return e}}catch(c){}const m=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({q:t,source:i,target:e,format:"text",api_key:u})});if(!m.ok)return t;const v=await m.json(),y=(null==v?void 0:v.translatedText)??t;try{localStorage.setItem(p,JSON.stringify({v:y,exp:f+d}))}catch(c){}return y}catch(c){return t}}(e,n);t||u(o||e)}catch{t||u(e)}})(),()=>{t=!0}},[i,o]);const d=a;return t.jsx(d,{className:r,children:l})};export{o as T};
