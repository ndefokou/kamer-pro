import{p as g,aD as f,M as b,r as j,j as e,E as N,G as d,B as r,Y as w}from"./index-BumHlSai.js";import{O as y}from"./OptimizedImage-xP7m_j1R.js";import{u as k}from"./useTranslation-DUME4FCN.js";import{C as P}from"./check-Cw4ObBPz.js";const C=()=>{const l=g(),{t:s}=k(),{draft:t,publishListing:h,saveDraft:m,previousStep:p}=f(),{toast:a}=b(),[o,n]=j.useState(!1),x=async()=>{n(!0);const i=await h();i.success?(a({title:s("host.preview.publishedTitle","Listing published!"),description:s("host.preview.publishedDesc","Your listing is now live on Le Mboko")}),l("/host/dashboard")):a({title:s("host.preview.publishFailedTitle","Failed to publish"),description:i.error||s("host.preview.publishFailedDesc","Please check all required fields"),variant:"destructive"}),n(!1)},u=async()=>{const i=await m();i.success?(a({title:s("host.preview.draftSavedTitle","Draft saved"),description:s("host.preview.draftSavedDesc","You can continue editing later")}),l("/host/dashboard")):a({title:s("host.preview.draftSaveFailedTitle","Failed to save draft"),description:i.error||s("host.preview.draftSaveFailedDesc","Please try again"),variant:"destructive"})},v=()=>{p(),l("/host/safety")},c=t.photos[t.coverPhotoIndex]||t.photos[0];return e.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:s("host.preview.title","Preview your listing")}),e.jsx("p",{className:"text-muted-foreground text-lg",children:s("host.preview.subtitle","Here's how your listing will appear to guests")})]}),e.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden mb-8",children:[c&&e.jsx("div",{className:"aspect-video w-full overflow-hidden",children:e.jsx(y,{src:N(c),alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:t.title}),e.jsxs("p",{className:"text-muted-foreground",children:[t.propertyType," • ",t.maxGuests," guests • ",t.bedrooms," bedrooms • ",t.beds," beds • ",t.bathrooms," baths"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:d(t.pricePerNight||0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s("host.common.perNight","per night")})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s("host.preview.about","About this place")}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),t.amenities.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s("host.preview.offers","What this place offers")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.amenities.slice(0,6).map(i=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm",children:i.replace(/_/g," ")})]},i)),t.amenities.length>6&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["+",t.amenities.length-6," ",s("host.editor.more","more")]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s("host.preview.bookingDetails","Booking details")}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["• ",t.instantBook?s("host.preview.instantAvailable","Instant booking available"):s("host.preview.hostApproval","Host approval required")]}),e.jsxs("p",{children:["• ",s("host.preview.minimumStay","Minimum stay"),": ",t.minNights," ",t.minNights!==1?s("common.nights","nights"):s("host.preview.night","night")]}),t.maxNights&&e.jsxs("p",{children:["• ",s("host.preview.maximumStay","Maximum stay"),": ",t.maxNights," ",s("common.nights","nights")]}),t.cleaningFee&&e.jsxs("p",{children:["• ",s("host.pricing.cleaningFeeShort","Cleaning fee"),": ",d(t.cleaningFee)]})]})]}),t.houseRules&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:s("host.safety.houseRulesTitle","House rules")}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:t.houseRules})]}),t.safetyDevices.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:s("host.preview.safetyFeatures","Safety features")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.safetyDevices.map(i=>e.jsx("span",{className:"px-3 py-1 bg-muted rounded-full text-sm",children:i.replace(/_/g," ")},i))})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(r,{variant:"outline",onClick:v,children:s("common.back","Back")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(r,{variant:"outline",onClick:u,children:s("host.preview.saveDraft","Save as draft")}),e.jsx(r,{onClick:x,disabled:o,size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 animate-spin"}),s("host.preview.publishing","Publishing...")]}):s("host.preview.publishListing","Publish listing")})]})]}),e.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:s("common.stepOf","Step {{current}} of {{total}}",{current:9,total:9})})]})})};export{C as default};
