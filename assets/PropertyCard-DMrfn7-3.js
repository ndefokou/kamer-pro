const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ListingDetails-BZfbRo3b.js","assets/index-DwPe7WlF.js","assets/vendor-ui-DcvuiMJW.js","assets/vendor-react-CPc5zwff.js","assets/vendor-charts-CNjKuHaK.js","assets/vendor-utils-tyqSID0v.js","assets/index-lw8G4jxF.css","assets/useQuery-BWx6GIbP.js","assets/useBaseQuery-3Lu_M2RN.js","assets/Loading-CC70LVJ3.js","assets/OptimizedImage-DunbvjKP.js","assets/whatsapp-B6PH0vCN.js","assets/HouseRulesSection-zgccbfet.js","assets/useTranslation-BptfK32d.js","assets/Footer-DqaNDUWV.js","assets/Header-B444uWW8.js","assets/LanguageSwitcher-kkyV-vkk.js","assets/index-B9HPLTtY.js","assets/index.esm-D78Y81EZ.js","assets/avatar-B5sUQZ8R.js","assets/useWishlist-C3hKKQtd.js","assets/TranslatedText-B-87mhZr.js","assets/fr-qjbnyBeO.js","assets/ListingDetails-ComhdInD.css"])))=>i.map(i=>d[i]);
import{Q as e,u as t}from"./useBaseQuery-3Lu_M2RN.js";import{j as s,k as r,l as a,e as i,m as o,n as l,B as n,o as c,_ as u,f as h}from"./index-DwPe7WlF.js";import{j as d,I as m,J as p}from"./vendor-ui-DcvuiMJW.js";import{r as f,R as x,L as g}from"./vendor-react-CPc5zwff.js";import{u as v}from"./useWishlist-C3hKKQtd.js";import{O as j}from"./OptimizedImage-DunbvjKP.js";import{T as b}from"./TranslatedText-B-87mhZr.js";import{p as N}from"./propertyTypes--Kllk2h6.js";import{u as w}from"./useTranslation-BptfK32d.js";var P=class extends e{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:s()})}getOptimisticResult(e){return e.behavior=s(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var s,i;const{state:o}=e,l=super.createResult(e,t),{isFetching:n,isRefetching:c,isError:u,isRefetchError:h}=l,d=null==(i=null==(s=o.fetchMeta)?void 0:s.fetchMore)?void 0:i.direction,m=u&&"forward"===d,p=n&&"forward"===d,f=u&&"backward"===d,x=n&&"backward"===d;return{...l,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:a(t,o.data),hasPreviousPage:r(t,o.data),isFetchNextPageError:m,isFetchingNextPage:p,isFetchPreviousPageError:f,isFetchingPreviousPage:x,isRefetchError:h&&!m&&!f,isRefetching:c&&!p&&!x}}};function y(e,s){return t(e,P)}const F=f.memo(({id:e,name:t,location:s,price:r,images:a,rating:P,isGuestFavorite:y=!1,priority:F=!1,propertyType:k})=>{var T,R;const E=i(),[M,O]=f.useState(0),{isInWishlist:_,addToWishlist:z,removeFromWishlistByProduct:$}=v(),{toast:D}=o(),{t:I}=w(),L=_(e),[B,W]=x.useState(null),q=()=>{B&&clearTimeout(B);u(()=>import("./ListingDetails-BZfbRo3b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).catch(()=>{});const t=setTimeout(()=>{E.prefetchQuery({queryKey:["listing",e],queryFn:()=>h(e),staleTime:6e4}),W(null)},200);W(t)},C=()=>{B&&(clearTimeout(B),W(null))},G=a&&a.length>1;return d.jsx(g,{to:`/product/${e}`,className:"block flex-shrink-0 w-full sm:w-[280px] group cursor-pointer",onMouseEnter:q,onMouseLeave:C,onFocus:q,onBlur:C,onTouchStart:q,children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsxs("div",{className:"relative aspect-[20/19] sm:aspect-square rounded-xl overflow-hidden bg-muted mb-3",children:[a&&a.length>0?d.jsx(j,{src:l(null==(T=a[M])?void 0:T.image_url),alt:t,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-out",priority:F}):d.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted text-muted-foreground",children:d.jsx("span",{className:"text-sm",children:I("host.editor.noPhotosYet")})}),y&&d.jsx("div",{className:"absolute top-3 left-3 z-10",children:d.jsxs("span",{className:"px-3 py-1 text-xs font-bold bg-white/90 backdrop-blur-sm text-foreground rounded-full shadow-sm flex items-center gap-1",children:[d.jsx(m,{className:"h-3 w-3 fill-current"}),I("Guest favorite")]})}),d.jsx(n,{variant:"ghost",size:"icon",className:"absolute top-3 right-3 z-10 h-8 w-8 rounded-full hover:bg-white/90 hover:scale-110 transition-all p-0 focus:ring-0",onClick:async t=>{t.preventDefault(),t.stopPropagation();try{const t=e;L?await $(t):await z(t)}catch(s){D({title:"Error",description:"Failed to update wishlist",variant:"destructive"})}},children:d.jsx(p,{className:"h-6 w-6 transition-colors "+(L?"fill-green-600 text-green-600":"fill-black/50 text-white stroke-[2px]")})}),G&&d.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:a.slice(0,5).map((e,t)=>d.jsx("button",{className:"h-1.5 rounded-full transition-all shadow-sm "+(t===M?"w-1.5 bg-white scale-125":"w-1.5 bg-white/60 hover:bg-white/80"),onClick:e=>{e.preventDefault(),e.stopPropagation(),O(t)},"aria-label":`View image ${t+1}`},t))}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-8 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),d.jsxs("div",{className:"flex flex-col gap-1",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsx("h3",{className:"font-semibold text-[15px] text-foreground line-clamp-1 group-hover:text-primary transition-colors",children:(()=>{if(!s)return t;const e=k||"",r=["room","apartment","studio","villa","house"].find(t=>t===e)||e||"home",a=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"");return`${I(`categories.${r}`,r)} • ${I(`locations.${a}`,s)}`})()}),P&&d.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[d.jsx(m,{className:"h-3 w-3 fill-current text-foreground"}),d.jsx("span",{className:"text-sm text-foreground",children:P.toFixed(2)})]})]}),d.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:[t,k&&d.jsxs(d.Fragment,{children:[" • ",d.jsx(b,{as:"span",text:(null==(R=N.find(e=>e.id===k))?void 0:R.label)||k})]})]}),d.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[d.jsx("span",{className:"font-semibold text-[15px] text-foreground",children:c(r)}),d.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",I("per night")]})]})]})]})})});export{F as P,y as u};
