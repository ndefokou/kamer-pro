import{r as e}from"./vendor-react-C_40T_Qy.js";import{c as o,a as r,s as t,j as n,P as a,e as s,u,a1 as c,b as i,f as l}from"./vendor-ui-CAOOb9ur.js";var f="rovingFocusGroup.onEntryFocus",d={bubbles:!1,cancelable:!0},p="RovingFocusGroup",[v,b,m]=r(p),[w,g]=o(p,[m]),[F,I]=w(p),h=e.forwardRef((e,o)=>n.jsx(v.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(v.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(R,{...e,ref:o})})}));h.displayName=p;var R=e.forwardRef((o,r)=>{const{__scopeRovingFocusGroup:t,orientation:v,loop:m=!1,dir:w,currentTabStopId:g,defaultCurrentTabStopId:I,onCurrentTabStopIdChange:h,onEntryFocus:R,preventScrollOnEntryFocus:y=!1,...S}=o,T=e.useRef(null),A=u(r,T),E=c(w),[D,j]=i({prop:g,defaultProp:I??null,onChange:h,caller:p}),[C,_]=e.useState(!1),G=l(R),K=b(t),k=e.useRef(!1),[L,P]=e.useState(0);return e.useEffect(()=>{const e=T.current;if(e)return e.addEventListener(f,G),()=>e.removeEventListener(f,G)},[G]),n.jsx(F,{scope:t,orientation:v,dir:E,loop:m,currentTabStopId:D,onItemFocus:e.useCallback(e=>j(e),[j]),onItemShiftTab:e.useCallback(()=>_(!0),[]),onFocusableItemAdd:e.useCallback(()=>P(e=>e+1),[]),onFocusableItemRemove:e.useCallback(()=>P(e=>e-1),[]),children:n.jsx(a.div,{tabIndex:C||0===L?-1:0,"data-orientation":v,...S,ref:A,style:{outline:"none",...o.style},onMouseDown:s(o.onMouseDown,()=>{k.current=!0}),onFocus:s(o.onFocus,e=>{const o=!k.current;if(e.target===e.currentTarget&&o&&!C){const o=new CustomEvent(f,d);if(e.currentTarget.dispatchEvent(o),!o.defaultPrevented){const e=K().filter(e=>e.focusable);x([e.find(e=>e.active),e.find(e=>e.id===D),...e].filter(Boolean).map(e=>e.ref.current),y)}}k.current=!1}),onBlur:s(o.onBlur,()=>_(!1))})})}),y="RovingFocusGroupItem",S=e.forwardRef((o,r)=>{const{__scopeRovingFocusGroup:u,focusable:c=!0,active:i=!1,tabStopId:l,children:f,...d}=o,p=t(),m=l||p,w=I(y,u),g=w.currentTabStopId===m,F=b(u),{onFocusableItemAdd:h,onFocusableItemRemove:R,currentTabStopId:S}=w;return e.useEffect(()=>{if(c)return h(),()=>R()},[c,h,R]),n.jsx(v.ItemSlot,{scope:u,id:m,focusable:c,active:i,children:n.jsx(a.span,{tabIndex:g?0:-1,"data-orientation":w.orientation,...d,ref:r,onMouseDown:s(o.onMouseDown,e=>{c?w.onItemFocus(m):e.preventDefault()}),onFocus:s(o.onFocus,()=>w.onItemFocus(m)),onKeyDown:s(o.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void w.onItemShiftTab();if(e.target!==e.currentTarget)return;const o=function(e,o,r){const t=function(e,o){return"rtl"!==o?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,r);return"vertical"===o&&["ArrowLeft","ArrowRight"].includes(t)||"horizontal"===o&&["ArrowUp","ArrowDown"].includes(t)?void 0:T[t]}(e,w.orientation,w.dir);if(void 0!==o){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=F().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===o)n.reverse();else if("prev"===o||"next"===o){"prev"===o&&n.reverse();const a=n.indexOf(e.currentTarget);n=w.loop?(t=a+1,(r=n).map((e,o)=>r[(t+o)%r.length])):n.slice(a+1)}setTimeout(()=>x(n))}var r,t}),children:"function"==typeof f?f({isCurrentTabStop:g,hasTabStop:null!=S}):f})})});S.displayName=y;var T={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function x(e,o=!1){const r=document.activeElement;for(const t of e){if(t===r)return;if(t.focus({preventScroll:o}),document.activeElement!==r)return}}var A=h,E=S;export{E as I,A as R,g as c};
