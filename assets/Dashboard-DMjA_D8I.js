import{j as e,q as s,r as t,b as a,c as r,s as n,u as o,P as l,e as i,d,g as c,t as m,v as u,w as x,x as h,F as p,D as g,X as f,y as b,M as y,z as v,A as j,W as w,E as N}from"./vendor-ui-CAOOb9ur.js";import{r as k,f as C}from"./vendor-react-C_40T_Qy.js";import{u as _}from"./useQuery-DUJaOdb7.js";import{c as M,b as O,a as S,R as P,A as E,C as D,d as A,B as F,u as R,g as L}from"./index-CHW3rl59.js";import{D as I}from"./index.esm-CUuDCt5y.js";import{u as z}from"./useTranslation-DgYtz7Wb.js";import{f as $}from"./fr-qjbnyBeO.js";import{e as T,f as B}from"./vendor-utils-tyqSID0v.js";import{S as W,H as q}from"./Header--VKnAQ8w.js";import{F as K}from"./Footer-D45jx7FM.js";import{M as U}from"./MobileNav-BjWHwsxL.js";import{P as H}from"./PropertyCard-CIiEF1Xy.js";import"./vendor-charts-knjLkUkQ.js";import"./LanguageSwitcher-CRTEz5Uf.js";import"./index-BzbEf57Q.js";import"./useWishlist-XpO0FfUG.js";import"./OptimizedImage-ChM7nsgN.js";import"./TranslatedText-BL0fQdvT.js";import"./propertyTypes-lVvLaZHM.js";function G({className:a,classNames:r,showOutsideDays:n=!0,...o}){return e.jsx(I,{showOutsideDays:n,className:M("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:M(O({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:M(O({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...s})=>e.jsx(t,{className:"h-4 w-4"}),IconRight:({...t})=>e.jsx(s,{className:"h-4 w-4"})},...o})}G.displayName="Calendar";var Y="Popover",[J]=r(Y,[S]),Q=S(),[Z,V]=J(Y),X=s=>{const{__scopePopover:t,children:r,open:o,defaultOpen:l,onOpenChange:i,modal:d=!1}=s,c=Q(t),m=k.useRef(null),[u,x]=k.useState(!1),[h,p]=a({prop:o,defaultProp:l??!1,onChange:i,caller:Y});return e.jsx(P,{...c,children:e.jsx(Z,{scope:t,contentId:n(),triggerRef:m,open:h,onOpenChange:p,onOpenToggle:k.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:u,onCustomAnchorAdd:k.useCallback(()=>x(!0),[]),onCustomAnchorRemove:k.useCallback(()=>x(!1),[]),modal:d,children:r})})};X.displayName=Y;var ee="PopoverAnchor";k.forwardRef((s,t)=>{const{__scopePopover:a,...r}=s,n=V(ee,a),o=Q(a),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=n;return k.useEffect(()=>(l(),()=>i()),[l,i]),e.jsx(E,{...o,...r,ref:t})}).displayName=ee;var se="PopoverTrigger",te=k.forwardRef((s,t)=>{const{__scopePopover:a,...r}=s,n=V(se,a),d=Q(a),c=o(t,n.triggerRef),m=e.jsx(l.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":he(n.open),...r,ref:c,onClick:i(s.onClick,n.onOpenToggle)});return n.hasCustomAnchor?m:e.jsx(E,{asChild:!0,...d,children:m})});te.displayName=se;var ae="PopoverPortal",[re,ne]=J(ae,{forceMount:void 0}),oe=s=>{const{__scopePopover:t,forceMount:a,children:r,container:n}=s,o=V(ae,t);return e.jsx(re,{scope:t,forceMount:a,children:e.jsx(d,{present:a||o.open,children:e.jsx(c,{asChild:!0,container:n,children:r})})})};oe.displayName=ae;var le="PopoverContent",ie=k.forwardRef((s,t)=>{const a=ne(le,s.__scopePopover),{forceMount:r=a.forceMount,...n}=s,o=V(le,s.__scopePopover);return e.jsx(d,{present:r||o.open,children:o.modal?e.jsx(ce,{...n,ref:t}):e.jsx(me,{...n,ref:t})})});ie.displayName=le;var de=x("PopoverContent.RemoveScroll"),ce=k.forwardRef((s,t)=>{const a=V(le,s.__scopePopover),r=k.useRef(null),n=o(t,r),l=k.useRef(!1);return k.useEffect(()=>{const e=r.current;if(e)return m(e)},[]),e.jsx(u,{as:de,allowPinchZoom:!0,children:e.jsx(ue,{...s,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:i(s.onCloseAutoFocus,e=>{var s;e.preventDefault(),l.current||null==(s=a.triggerRef.current)||s.focus()}),onPointerDownOutside:i(s.onPointerDownOutside,e=>{const s=e.detail.originalEvent,t=0===s.button&&!0===s.ctrlKey,a=2===s.button||t;l.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:i(s.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),me=k.forwardRef((s,t)=>{const a=V(le,s.__scopePopover),r=k.useRef(!1),n=k.useRef(!1);return e.jsx(ue,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var t,o;null==(t=s.onCloseAutoFocus)||t.call(s,e),e.defaultPrevented||(r.current||null==(o=a.triggerRef.current)||o.focus(),e.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:e=>{var t,o;null==(t=s.onInteractOutside)||t.call(s,e),e.defaultPrevented||(r.current=!0,"pointerdown"===e.detail.originalEvent.type&&(n.current=!0));const l=e.target;(null==(o=a.triggerRef.current)?void 0:o.contains(l))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&n.current&&e.preventDefault()}})}),ue=k.forwardRef((s,t)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:m,...u}=s,x=V(le,a),f=Q(a);return h(),e.jsx(p,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:e.jsx(g,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:m,onEscapeKeyDown:i,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>x.onOpenChange(!1),children:e.jsx(D,{"data-state":he(x.open),role:"dialog",id:x.contentId,...f,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xe="PopoverClose";k.forwardRef((s,t)=>{const{__scopePopover:a,...r}=s,n=V(xe,a);return e.jsx(l.button,{type:"button",...r,ref:t,onClick:i(s.onClick,()=>n.onOpenChange(!1))})}).displayName=xe;function he(e){return e?"open":"closed"}k.forwardRef((s,t)=>{const{__scopePopover:a,...r}=s,n=Q(a);return e.jsx(A,{...n,...r,ref:t})}).displayName="PopoverArrow";var pe=oe,ge=ie;const fe=X,be=te,ye=k.forwardRef(({className:s,align:t="center",sideOffset:a=4,...r},n)=>e.jsx(pe,{children:e.jsx(ge,{ref:n,align:t,sideOffset:a,className:M("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));ye.displayName=ge.displayName;const ve=["weekend","week","month"],je=()=>{const{t:s,i18n:t}=z(),a="fr"===t.language?$:T,r=C(),[n,o]=k.useState(""),[l,i]=k.useState(void 0),[d,c]=k.useState("dates"),[m,u]=k.useState("weekend"),[x,h]=k.useState([]),[p,g]=k.useState({adults:0,children:0,infants:0,pets:0}),[w,N]=k.useState(!1),[_,M]=k.useState(!1),[O,S]=k.useState("destination"),[P,E]=k.useState(!1),[D,A]=k.useState("where"),[R,L]=k.useState(0),[I,W]=k.useState("undefined"!=typeof window&&window.matchMedia("(max-width: 640px)").matches),[q,K]=k.useState("dates");k.useEffect(()=>{if("undefined"==typeof window)return;const e=window.matchMedia("(max-width: 640px)"),s=e=>W(e.matches);try{e.addEventListener("change",s)}catch{e.addListener(s)}return()=>{try{e.removeEventListener("change",s)}catch{e.removeListener(s)}}},[]),k.useEffect(()=>(document.body.style.overflow=P?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[P]);const U=()=>{const e=new URLSearchParams;n.trim()&&e.set("search",n.trim()),"dates"===d&&(null==l?void 0:l.from)?(e.set("checkin",l.from.toISOString()),l.to&&e.set("checkout",l.to.toISOString())):"flexible"===d&&(e.set("flexible_duration",m),x.length>0&&e.set("flexible_months",x.join(",")));const s=p.adults+p.children;s>0&&e.set("guests",s.toString()),E(!1),r(`/marketplace?${e.toString()}`)},H=(e,s)=>{g(t=>{const a="add"===s?t[e]+1:t[e]-1;return{...t,[e]:Math.max(0,a)}})},Y=[{name:s("search.suggestions_list.Centre.name"),desc:s("search.suggestions_list.Centre.desc"),icon:"ðŸ“"},{name:s("search.suggestions_list.Littoral.name"),desc:s("search.suggestions_list.Littoral.desc"),icon:"ðŸŒŠ"},{name:s("search.suggestions_list.South.name"),desc:s("search.suggestions_list.South.desc"),icon:"ðŸŒ´"},{name:s("search.suggestions_list.Southwest.name"),desc:s("search.suggestions_list.Southwest.desc"),icon:"ðŸŒ‹"},{name:s("search.suggestions_list.Northwest.name"),desc:s("search.suggestions_list.Northwest.desc"),icon:"â›°ï¸"},{name:s("search.suggestions_list.West.name"),desc:s("search.suggestions_list.West.desc"),icon:"ðŸžï¸"},{name:s("search.suggestions_list.Adamawa.name"),desc:s("search.suggestions_list.Adamawa.desc"),icon:"ðŸ„"},{name:s("search.suggestions_list.North.name"),desc:s("search.suggestions_list.North.desc"),icon:"ðŸŒ¾"},{name:s("search.suggestions_list.Far North.name"),desc:s("search.suggestions_list.Far North.desc"),icon:"ðŸœï¸"},{name:s("search.suggestions_list.East.name"),desc:s("search.suggestions_list.East.desc"),icon:"ðŸŒ³"}];return P&&I?e.jsxs("div",{className:"fixed inset-0 z-[60] bg-gray-100 flex flex-col font-sans",children:[e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between bg-white relative",children:[e.jsx("button",{onClick:()=>E(!1),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",children:e.jsx(f,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-6 text-sm font-medium",children:e.jsx("button",{className:"text-gray-900 border-b-2 border-gray-900 pb-1",children:s("Stays")})}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("where"===D?"ring-2 ring-black bg-white":"bg-white"),children:"where"===D?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:s("where")}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-800"}),e.jsx("input",{type:"text",placeholder:s("search destinations"),value:n,onChange:e=>o(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-100 rounded-xl font-medium text-gray-900 placeholder:text-gray-500 focus:outline-none",autoFocus:!0})]}),e.jsxs("div",{className:"mt-4 max-h-[300px] overflow-y-auto",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-2 uppercase tracking-wider",children:s("common.suggestions")}),e.jsx("div",{className:"space-y-2",children:Y.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-xl cursor-pointer",onClick:()=>{o(s.name),A("when")},children:[e.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center text-xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.desc})]})]},s.name))})]})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>A("where"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:s("where")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:n||s("common.anywhere")})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("when"===D?"ring-2 ring-black":""),children:"when"===D?e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 px-2",children:s("common.when")}),e.jsxs("div",{className:"flex justify-center mb-4 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>c("dates"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("dates"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:s("common.dates")}),e.jsx("button",{onClick:()=>c("flexible"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("flexible"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:s("common.flexible")})]}),"dates"===d?e.jsx("div",{className:"flex justify-center",children:e.jsx(G,{mode:"range",selected:l,onSelect:i,numberOfMonths:1,className:"border-0 bg-transparent p-0 w-full flex justify-center",disabled:{before:new Date((new Date).setHours(0,0,0,0))},locale:a,classNames:{month:"space-y-4 w-full",table:"w-full border-collapse space-y-1",head_row:"flex w-full mt-2 mb-2",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem] flex-1",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 flex-1",day:"h-9 w-9 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100 w-full h-full flex items-center justify-center",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground rounded-full",day_today:"bg-accent text-accent-foreground rounded-full",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"}})}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("common.howLong")}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:ve.map(t=>e.jsx("button",{onClick:()=>u(t),className:"px-4 py-2 rounded-full border text-sm font-medium transition-colors "+(m===t?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:s(`common.flexibleOptions.duration.${t}`)},t))})]})})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>A("when"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:s("common.when")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:"dates"===d&&(null==l?void 0:l.from)?`${B(l.from,"MMM dd",{locale:a})}${l.to?` - ${B(l.to,"MMM dd",{locale:a})}`:""}`:s("common.addDates")})]})}),e.jsx("div",{className:"bg-white rounded-3xl shadow-sm overflow-hidden transition-all duration-300 "+("who"===D?"ring-2 ring-black":""),children:"who"===D?e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:s("common.who")}),e.jsx("div",{className:"space-y-6",children:[{type:"adults",label:s("common.adults"),sub:s("Age 13+")},{type:"children",label:s("common.children"),sub:s("Ages 2-12")},{type:"infants",label:s("common.infants"),sub:s("Under 2")},{type:"pets",label:s("common.pets"),sub:s("Traveling with a service animal?")}].map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.sub})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>H(s.type,"sub"),disabled:0===p[s.type],children:e.jsx(y,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-4 text-center text-gray-900 font-medium",children:p[s.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-500 hover:border-black grid place-items-center",onClick:()=>H(s.type,"add"),children:e.jsx(v,{className:"h-4 w-4"})})]})]},s.type))})]}):e.jsxs("div",{className:"px-6 py-4 flex justify-between items-center cursor-pointer",onClick:()=>A("who"),children:[e.jsx("span",{className:"text-gray-500 font-medium text-sm",children:s("common.who")}),e.jsx("span",{className:"font-bold text-sm text-gray-900",children:p.adults+p.children>0?s("common.guest_count",{count:p.adults+p.children}):s("common.addGuests")})]})})]}),e.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 pb-6 flex items-center justify-between",children:[e.jsx("button",{className:"text-base font-semibold underline text-gray-900",onClick:()=>{o(""),i(void 0),g({adults:0,children:0,infants:0,pets:0})},children:s("common.clearAll")}),e.jsxs("button",{className:"bg-[#E91E63] text-white px-8 py-3 rounded-lg font-bold text-lg flex items-center gap-2",onClick:U,children:[e.jsx(b,{className:"h-5 w-5"}),s("common.search")]})]})]}):e.jsxs("form",{onSubmit:e=>{e.preventDefault(),U()},className:"w-full max-w-4xl mx-auto relative z-40",children:[e.jsx("div",{className:"md:hidden w-full px-4",children:e.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-full shadow-md border border-gray-200 p-3",onClick:()=>E(!0),children:[e.jsx(b,{className:"h-5 w-5 text-gray-900 ml-2"}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:s("search.start_research")})}),e.jsx("div",{className:"p-2 bg-white rounded-full border border-gray-200",children:e.jsx("div",{className:"h-4 w-4 border-t-2 border-r-2 border-gray-900 rotate-45 transform translate-y-[1px] translate-x-[-1px]"})})]})}),e.jsxs("div",{className:"hidden md:flex items-center bg-white rounded-full shadow-soft hover:shadow-elevated border border-gray-200 transition-all duration-300 relative",children:[e.jsxs(fe,{open:w,onOpenChange:N,children:[e.jsx(be,{asChild:!0,children:e.jsxs("div",{className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 rounded-full transition-colors "+(w?"bg-gray-100 shadow-sm":""),children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:s("where")}),e.jsx("input",{type:"text",placeholder:s("search destinations"),value:n,onChange:e=>o(e.target.value),className:"w-full bg-transparent border-0 p-0 text-sm text-gray-900 placeholder:text-gray-500 focus:outline-none truncate font-medium"})]})}),e.jsx(ye,{className:"w-[350px] p-0 rounded-3xl overflow-hidden shadow-xl border-0 mt-4",align:"start",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 mb-4 px-2 uppercase tracking-wider",children:s("common.suggestions")}),e.jsx("div",{className:"space-y-1 max-h-[300px] overflow-y-auto custom-scrollbar",children:Y.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-gray-50 rounded-xl cursor-pointer transition-colors",onClick:()=>{o(s.name),N(!1),M(!0)},children:[e.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.desc})]})]},s.name))})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs(fe,{open:_,onOpenChange:M,children:[e.jsx(be,{asChild:!0,children:e.jsxs("div",{className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors "+(_?"bg-gray-100 rounded-full shadow-sm":""),children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:s("when")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:"dates"===d&&(null==l?void 0:l.from)?e.jsxs(e.Fragment,{children:[B(l.from,"MMM dd",{locale:a}),l.to?` - ${B(l.to,"MMM dd",{locale:a})}`:""]}):"flexible"===d?s("common.flexibleOptions.summary",{duration:s(`common.flexibleOptions.duration.${m}`),months:x.length>0?s("common.flexibleOptions.months",{count:x.length}):s("common.flexibleOptions.anytime")}):e.jsx("span",{className:"text-gray-400 font-normal",children:s("add dates")})})]})}),e.jsx(ye,{className:"w-[88vw] max-w-[330px] sm:w-[660px] sm:max-w-[660px] p-0 rounded-3xl shadow-xl border-0 mt-4 overflow-hidden",align:"center",children:e.jsxs("div",{className:"p-3 sm:p-6 max-w-[330px] mx-auto sm:max-w-none",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{className:"text-sm font-semibold text-gray-900",children:s("Stays")})}),e.jsx("button",{type:"button","aria-label":s("common.close"),className:"h-8 w-8 rounded-full border border-gray-200 grid place-items-center hover:bg-gray-50",onClick:()=>M(!1),children:e.jsx(f,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium "+("destination"===O?"bg-black text-white":"bg-gray-100 text-gray-700"),onClick:()=>S("destination"),type:"button",children:s("common.destination")}),e.jsx("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium "+("nearby"===O?"bg-black text-white":"bg-gray-100 text-gray-700"),onClick:()=>S("nearby"),type:"button",children:s("common.nearby")})]}),e.jsx("h3",{className:"text-lg font-semibold mb-3",children:s("common.when")}),e.jsxs("div",{className:"flex justify-center mb-6 bg-gray-100 p-1 rounded-full w-fit mx-auto",children:[e.jsx("button",{onClick:()=>c("dates"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("dates"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:s("common.dates")}),e.jsx("button",{onClick:()=>c("flexible"),className:"px-4 py-1.5 text-sm font-semibold rounded-full transition-all "+("flexible"===d?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:bg-gray-200"),children:s("common.flexible")})]}),"dates"===q&&"dates"===d&&e.jsx("div",{children:e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-4 bg-white shadow-lg "+(I?"max-w-[300px] mx-auto":""),children:[e.jsx(G,{mode:"range",selected:l,onSelect:i,numberOfMonths:I?1:2,className:"border-0 "+(I?"scale-[0.86] origin-top-left transform-gpu":""),disabled:{before:new Date((new Date).setHours(0,0,0,0))},locale:a,formatters:{formatWeekdayName:e=>B(e,"EEEEE",{locale:a}).toUpperCase()},classNames:{caption_label:"text-base font-semibold capitalize",...I?{head_cell:"text-muted-foreground rounded-md w-7 font-normal text-[0.7rem]",day:"h-7 w-7 p-0 font-normal aria-selected:opacity-100 rounded-full hover:bg-gray-100",cell:"h-7 w-7 text-center text-[0.8rem] p-0 relative"}:{}}}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:[0,1,2,3].map(t=>e.jsx("button",{type:"button",onClick:()=>L(t),className:"px-2.5 py-1 rounded-full border text-xs "+(R===t?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:0===t?s("common.exactDates"):`Â± ${t} jour${t>1?"s":""}`},t))})]})}),"guests"===q&&e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white overflow-hidden shadow-lg max-w-[330px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-gray-200 cursor-pointer",onClick:()=>K("dates"),children:[e.jsx("span",{className:"text-sm text-gray-700",children:s("common.when").replace("?","")}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:(null==l?void 0:l.from)?`${B(l.from,"d MMM",{locale:a})}${(null==l?void 0:l.to)?` - ${B(l.to,"d MMM",{locale:a})}`:""}`:s("add dates")})]}),e.jsx("h3",{className:"text-lg font-semibold px-5 py-4",children:s("common.who")}),e.jsx("div",{className:"divide-y divide-gray-200",children:[{type:"adults",label:s("common.adults"),sub:s("Age 13+")},{type:"children",label:s("common.children"),sub:s("Ages 2-12")},{type:"infants",label:s("common.infants"),sub:s("Under 2")},{type:"pets",label:s("common.pets"),sub:s("Traveling with a service animal?")}].map(s=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-5",children:[e.jsxs("div",{className:"pr-6",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:"pets"===s.type?e.jsx("button",{type:"button",className:"underline underline-offset-2 hover:text-gray-700",children:s.sub}):s.sub})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black disabled:opacity-20 grid place-items-center",onClick:()=>H(s.type,"sub"),disabled:0===p[s.type],"aria-label":`Decrease ${s.label}`,children:e.jsx(y,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-gray-900 font-medium",children:p[s.type]}),e.jsx("button",{type:"button",className:"h-8 w-8 rounded-full border border-gray-300 text-gray-700 hover:border-black grid place-items-center",onClick:()=>H(s.type,"add"),"aria-label":`Increase ${s.label}`,children:e.jsx(v,{className:"h-3 w-3"})})]})]},s.type))})]}),"months"===d&&e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"grid grid-cols-6 gap-4 px-2",children:s("common.months",{returnObjects:!0}).map(s=>e.jsxs("div",{onClick:()=>{h(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},className:"flex flex-col items-center p-4 border rounded-xl cursor-pointer transition-all "+(x.includes(s)?"border-black bg-gray-50":"border-gray-200 hover:border-black bg-white hover:bg-gray-50"),children:[e.jsx(j,{className:"h-8 w-8 mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsx("span",{className:"text-xs text-gray-500",children:"2026"})]},s))})}),"flexible"===d&&e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("common.howLong")}),e.jsx("div",{className:"flex justify-center gap-3",children:ve.map(t=>e.jsx("button",{onClick:()=>u(t),className:"px-6 py-2 rounded-full border text-sm font-medium transition-colors "+(m===t?"border-black bg-gray-50":"border-gray-300 hover:border-black"),children:s(`common.flexibleOptions.duration.${t}`)},t))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{type:"button",className:"text-sm underline",onClick:()=>{i(void 0),h([]),u("weekend"),K("dates"),g({adults:0,children:0,infants:0,pets:0})},children:s("common.clearAll")}),"dates"===q?e.jsx(F,{type:"button",onClick:()=>K("guests"),children:s("common.next")}):e.jsx(F,{type:"button",className:"bg-green-600 hover:bg-green-700 text-white",onClick:()=>{M(!1),U()},children:s("common.search")})]})]})})]}),e.jsx("div",{className:"h-8 w-px bg-gray-200"}),e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{K("guests"),M(!0)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),K("guests"),M(!0))},className:"flex-1 px-8 py-3.5 cursor-pointer hover:bg-gray-100 transition-colors rounded-full",children:[e.jsx("label",{className:"block text-xs font-bold text-gray-900 mb-0.5 uppercase tracking-wider",children:s("who")}),e.jsx("div",{className:"text-sm text-gray-900 font-medium truncate",children:p.adults+p.children>0?s("common.guest_count",{count:p.adults+p.children}):e.jsx("span",{className:"text-gray-400 font-normal",children:s("add guests")})})]}),e.jsx("div",{className:"pr-2",children:e.jsx(F,{type:"submit",size:"icon",className:"h-12 w-12 rounded-full bg-primary hover:bg-primary-dark transition-all duration-300 shadow-md hover:scale-105",children:e.jsx(b,{className:"h-5 w-5 text-white stroke-[3px]"})})})]})]})},we=()=>e.jsx("div",{className:"block flex-shrink-0 w-full sm:w-[280px]",children:e.jsxs("div",{className:"flex flex-col h-full animate-pulse",children:[e.jsx("div",{className:"relative aspect-[20/19] sm:aspect-square rounded-xl overflow-hidden bg-gray-200 mb-3",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-12 flex-shrink-0"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]})]})}),Ne=({count:s=4})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"flex gap-4 md:gap-6 overflow-x-auto pb-3",children:Array.from({length:s}).map((s,t)=>e.jsx(we,{},t))})]}),ke=()=>{const[s,t]=k.useState(navigator.onLine),[a,r]=k.useState(!1),{t:n}=z();return k.useEffect(()=>{const e=()=>{t(!0),r(!0),setTimeout(()=>r(!1),3e3)},s=()=>{t(!1),r(!1)};return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),a?e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-green-500 text-white text-center py-2 px-4 z-50 shadow-lg animate-slide-down",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("Back online")})]})}):s?null:e.jsx("div",{className:"fixed top-0 left-0 right-0 bg-yellow-500 text-white text-center py-2 px-4 z-50 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:n("You're offline. Showing cached data.")})]})})},Ce=({title:s,properties:t,city:a,inferCity:r})=>{const{t:n}=z(),o=C(),l=k.useRef(null),[i,d]=k.useState(!1),[c,m]=k.useState(!0),u=e=>{if(l.current){const s=.8*l.current.clientWidth;l.current.scrollBy({left:"left"===e?-s:s,behavior:"smooth"})}};if(!t||0===t.length)return null;const x=!!a&&"other"===(a||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"");return e.jsxs("div",{className:"mb-4 group relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a&&!x?n("StaysIn",{city:a}):s}),a&&e.jsxs("button",{className:"text-sm font-semibold hover:underline flex items-center gap-1",onClick:()=>o(`/marketplace?search=${encodeURIComponent(x?"other":a)}`),"aria-label":x?n("otherLocations"):`See all stays in ${a}`,children:[n("seeAll")," ",e.jsx("span",{"aria-hidden":!0,children:"â€º"})]})]}),e.jsxs("div",{className:"relative",children:[i&&e.jsx("button",{onClick:()=>u("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Previous",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"M20 28 8.7 16.7a1 1 0 0 1 0-1.4L20 4"})})}),e.jsx("div",{ref:l,onScroll:()=>{if(l.current){const{scrollLeft:e,scrollWidth:s,clientWidth:t}=l.current;d(e>0),m(e<s-t-10)}},className:"flex gap-4 md:gap-6 overflow-x-auto pb-3 snap-x snap-mandatory scroll-smooth [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none']",children:t.filter(Boolean).map((s,t)=>{var a;const n=r(s);return e.jsx("div",{className:"flex-shrink-0 w-[180px] sm:w-[240px] md:w-[280px]",children:e.jsx(H,{id:s.listing.id,name:s.listing.title,location:s.listing.city||n||"Unknown",price:s.listing.price_per_night||0,images:(null==(a=s.photos)?void 0:a.map(e=>({image_url:e.url})))||[],isGuestFavorite:!1,priority:t<4,propertyType:s.listing.property_type})},s.listing.id)})}),c&&e.jsx("button",{onClick:()=>u("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 w-8 h-8 bg-white rounded-full shadow-md border border-gray-200 flex items-center justify-center hover:scale-105 transition-transform","aria-label":"Next",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32","aria-hidden":"true",role:"presentation",focusable:"false",style:{display:"block",fill:"none",height:"12px",width:"12px",stroke:"currentcolor",strokeWidth:5.33333,overflow:"visible"},children:e.jsx("path",{fill:"none",d:"m12 4 11.3 11.3a1 1 0 0 1 0 1.4L12 28"})})})]})]})},_e=()=>{const{t:s}=z();C();const{user:t,logout:a}=R(),{data:r,isLoading:n,error:o}=_({queryKey:["products",100],queryFn:()=>L({limit:100}),staleTime:3e4}),l=e=>(e||"").trim().toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""),i=k.useMemo(()=>["yaounde","douala","kribi"],[]),d=k.useMemo(()=>({yaounde:{display:"Yaounde",lat:3.848,lon:11.5021,synonyms:["bastos","biyem","nkolbisson","melen","odza","nkolmesseng","nkoabang","ekounou","essos","madagascar"]},douala:{display:"Douala",lat:4.0511,lon:9.7679,synonyms:["akwa","bonapriso","bonanjo","deido","makepe","ndogbong","logbaba","bepanda","bonamoussadi"]},kribi:{display:"Kribi",lat:2.94,lon:9.91,synonyms:["mpalla","londji","ebambe","lolabe"]},buea:{display:"Buea",lat:4.1527,lon:9.241,synonyms:["molyko","muea","mile 17","bongo square","great soppo","small soppo","bokwango"]}}),[]),c=k.useCallback(e=>{if(!(null==e?void 0:e.listing))return"";const s=[e.listing.city,e.listing.address,e.listing.title].filter(Boolean).join(" "),t=l(s);if(t){for(const e of i){if(t.includes(e))return d[e].display;if(d[e].synonyms.some(e=>t.includes(e)))return d[e].display}for(const e of Object.keys(d)){if(i.includes(e))continue;if(t.includes(e))return d[e].display;if(d[e].synonyms.some(e=>t.includes(e)))return d[e].display}}if(e.listing.latitude&&e.listing.longitude){const{latitude:s,longitude:t}=e.listing;let a=null;if(Object.keys(d).forEach(e=>{const r=d[e],n=((e,s,t,a)=>{const r=e=>e*Math.PI/180,n=r(t-e),o=r(a-s),l=Math.sin(n/2)**2+Math.cos(r(e))*Math.cos(r(t))*Math.sin(o/2)**2;return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371})(s,t,r.lat,r.lon);(!a||n<a.dist)&&(a={key:e,dist:n})}),a&&a.dist<=80)return d[a.key].display}return""},[i,d]),{grouped:m,other:u,buea:x}=k.useMemo(()=>{var e;const s=new Map,t=[];if(r){r.filter(e=>{var s;return null==(s=e.listing.city)?void 0:s.toLowerCase().includes("buea")})}(r||[]).forEach(e=>{if(!(null==e?void 0:e.listing))return;let a=(e.listing.city||"").trim();a||(a=c(e));const r=l(a);if(!r)return void t.push(e);const n=s.get(r)||{name:a,items:[]};!n.name&&a&&(n.name=a),n.items.push(e),s.set(r,n)});const a=Array.from(s.values()).sort((e,s)=>{const t=i.indexOf(l(e.name)),a=i.indexOf(l(s.name));return-1!==t&&-1!==a?t-a:-1!==t?-1:-1!==a?1:s.items.length-e.items.length}),n=(null==(e=a.find(e=>"buea"===l(e.name)))?void 0:e.items)??[],o=a.filter(e=>!i.includes(l(e.name))&&"buea"!==l(e.name)).flatMap(e=>e.items);return{grouped:a,other:[...o,...t],buea:n}},[r,i,c]);return e.jsxs("div",{className:"min-h-screen bg-white pb-20 md:pb-0",children:[e.jsx(W,{title:s("Explore"),description:s("dashboard.seo.description")}),e.jsx(ke,{}),e.jsx(q,{}),e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6",children:e.jsx(je,{})})}),e.jsx("main",{className:"container mx-auto px-4 sm:px-6 pt-8 pb-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{count:4}),e.jsx(Ne,{count:4}),e.jsx(Ne,{count:4})]}):o?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-red-500",children:s("Failed to load properties.")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s("Check your connection and try again")})]}):e.jsxs(e.Fragment,{children:[m.filter(e=>i.includes(l(e.name))).sort((e,s)=>i.indexOf(l(e.name))-i.indexOf(l(s.name))).map(t=>e.jsx(Ce,{title:s("StaysIn",{city:t.name}),properties:t.items,city:t.name,inferCity:c},t.name||Math.random())),x.length>0&&e.jsx(Ce,{title:s("StaysIn",{city:"Buea"}),properties:x,city:"Buea",inferCity:c},"buea-section"),u.length>0&&e.jsx(Ce,{title:s("otherLocations"),properties:u,city:"other",inferCity:c},"other-locations")]})}),e.jsx(K,{}),e.jsx(U,{})]})};export{_e as default};
