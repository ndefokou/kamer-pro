import{j as t,ap as e,I as o,X as s}from"./vendor-ui-CAOOb9ur.js";import{f as a,r}from"./vendor-react-C_40T_Qy.js";import{a6 as l,n as i,B as n,o as c,I as d}from"./index-CHW3rl59.js";import{O as p}from"./OptimizedImage-ChM7nsgN.js";import{u as h}from"./useTranslation-DgYtz7Wb.js";import"./vendor-charts-knjLkUkQ.js";import"./vendor-utils-tyqSID0v.js";const m=()=>{const m=a(),{t:u}=h(),{draft:x,updateDraft:g,nextStep:f,previousStep:j}=l(),{toast:v}=i(),[b,y]=r.useState(x.photos||[]),[N,k]=r.useState(x.coverPhotoIndex||0),[C,w]=r.useState(!1),[S,P]=r.useState(null);r.useEffect(()=>{new Set(b);b.length},[b]);return t.jsx("div",{className:"min-h-screen bg-background p-4 py-8",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold mb-2",children:u("host.photos.title","Add photos of your place")}),t.jsx("p",{className:"text-muted-foreground",children:u("host.photos.subtitle","You'll need at least 3 photos to get started. You can add more or make changes later.")})]}),t.jsx("div",{className:"mb-8",children:t.jsxs("label",{htmlFor:"photo-upload",className:"block border-2 border-dashed border-border rounded-lg p-12 text-center cursor-pointer hover:border-primary transition-colors",children:[t.jsx(e,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:u("host.photos.dropTitle","Drag your photos here")}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:u("host.photos.dropHelp","Choose at least 3 photos")}),t.jsx(n,{type:"button",variant:"outline",disabled:C,children:C?u("host.photos.uploading","Uploading..."):u("host.photos.uploadFromDevice","Upload from your device")}),t.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:async t=>{const e=t.target.files;if(!e||0===e.length)return;if(C)return;w(!0);const o=new FormData;Array.from(e).forEach(t=>{o.append("images",t)});try{const s=(await d.post("/upload/images",o,{headers:{"Content-Type":"multipart/form-data"}})).data;y(t=>[...t,...s.urls]),v({title:u("host.photos.uploadSuccessTitle","Photos uploaded"),description:u("host.photos.uploadSuccessDesc","{{count}} photo(s) uploaded successfully",{count:e.length})}),t.target.value=""}catch(s){v({title:u("host.photos.uploadFailedTitle","Upload failed"),description:u("host.photos.uploadFailedDesc","Failed to upload photos. Please try again."),variant:"destructive"}),t.target.value=""}finally{w(!1)}},className:"hidden",disabled:C})]})}),b.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[b.length," ",1!==b.length?u("host.photos.photosPlural","photos"):u("host.photos.photoSingular","photo")]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:b.map((e,a)=>t.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden group cursor-pointer "+(a===N?"ring-4 ring-primary":""),onClick:()=>P(e),children:[t.jsx(p,{src:c(e),alt:`Photo ${a+1}`,className:"w-full h-full object-cover"}),t.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[t.jsxs(n,{size:"sm",variant:"secondary",onClick:t=>{t.stopPropagation(),(t=>{k(t)})(a)},children:[t.jsx(o,{className:"h-4 w-4 mr-1"}),a===N?u("host.photos.cover","Cover"):u("host.photos.setAsCover","Set as cover")]}),t.jsx(n,{size:"sm",variant:"destructive",onClick:t=>{t.stopPropagation(),(t=>{const e=b.filter((e,o)=>o!==t);y(e),N===t?k(0):N>t&&k(N-1)})(a)},children:t.jsx(s,{className:"h-4 w-4"})})]}),a===N&&t.jsx("div",{className:"absolute top-2 left-2 bg-primary text-primary-foreground px-2 py-1 rounded text-xs font-medium",children:u("host.photos.coverPhoto","Cover photo")})]},a))})]}),S&&t.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4 md:p-8",onClick:()=>P(null),children:[t.jsx("button",{onClick:()=>P(null),className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 text-white rounded-full hover:bg-opacity-75 transition-all",children:t.jsx(s,{className:"h-6 w-6"})}),t.jsx(p,{src:c(S),alt:"Full size view",className:"w-full h-full object-contain",onClick:t=>t.stopPropagation()})]}),t.jsxs("div",{className:"flex justify-between items-center mt-12 pt-6 border-t",children:[t.jsx(n,{variant:"outline",onClick:()=>{g({photos:b,coverPhotoIndex:N}),j(),m("/host/location")},children:u("common.back","Back")}),t.jsx(n,{onClick:()=>{g({photos:b,coverPhotoIndex:N}),f(),m("/host/title")},disabled:b.length<3,size:"lg",children:u("common.continue","Continue")})]}),t.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:u("common.stepOf","Step {{current}} of {{total}}",{current:4,total:10})})]})})};export{m as default};
