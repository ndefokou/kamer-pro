[build]
base = "frontend"
publish = "dist"
command = "npm install && npm run build"

# SPA routing
[[redirects]]
from = "/*"
to = "/index.html"
status = 200

# Long-cache hashed assets generated by Vite
[[headers]]
for = "/assets/*"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

# App shell should revalidate often
[[headers]]
for = "/index.html"
  [headers.values]
  Cache-Control = "no-cache"

# PWA assets
[[headers]]
for = "/manifest.webmanifest"
  [headers.values]
  Cache-Control = "public, max-age=3600"

[[headers]]
for = "/pwa-*.png"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

# Icons and logo
[[headers]]
for = "/apple-touch-icon.png"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/logo.png"
  [headers.values]
  Cache-Control = "public, max-age=604800"
